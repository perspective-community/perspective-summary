var G0=Object.create;var md=Object.defineProperty;var Y0=Object.getOwnPropertyDescriptor;var X0=Object.getOwnPropertyNames;var Z0=Object.getPrototypeOf,j0=Object.prototype.hasOwnProperty;var O=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var J0=(n,e,r,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of X0(e))!j0.call(n,o)&&o!==r&&md(n,o,{get:()=>e[o],enumerable:!(s=Y0(e,o))||s.enumerable});return n};var Bt=(n,e,r)=>(r=n!=null?G0(Z0(n)):{},J0(e||!n||!n.__esModule?md(r,"default",{value:n,enumerable:!0}):r,n));var ui=O((ns,pd)=>{(function(n,e){typeof ns=="object"&&typeof pd<"u"?e(ns):typeof define=="function"&&define.amd?define(["exports"],e):(n=typeof globalThis<"u"?globalThis:n||self,e(n.lumino_algorithm={}))})(ns,function(n){"use strict";n.ArrayExt=void 0,function(D){function $(Y,ee,P=0,R=-1){let N=Y.length;if(N===0)return-1;P<0?P=Math.max(0,P+N):P=Math.min(P,N-1),R<0?R=Math.max(0,R+N):R=Math.min(R,N-1);let te;R<P?te=R+1+(N-P):te=R-P+1;for(let ie=0;ie<te;++ie){let Me=(P+ie)%N;if(Y[Me]===ee)return Me}return-1}D.firstIndexOf=$;function G(Y,ee,P=-1,R=0){let N=Y.length;if(N===0)return-1;P<0?P=Math.max(0,P+N):P=Math.min(P,N-1),R<0?R=Math.max(0,R+N):R=Math.min(R,N-1);let te;P<R?te=P+1+(N-R):te=P-R+1;for(let ie=0;ie<te;++ie){let Me=(P-ie+N)%N;if(Y[Me]===ee)return Me}return-1}D.lastIndexOf=G;function Q(Y,ee,P=0,R=-1){let N=Y.length;if(N===0)return-1;P<0?P=Math.max(0,P+N):P=Math.min(P,N-1),R<0?R=Math.max(0,R+N):R=Math.min(R,N-1);let te;R<P?te=R+1+(N-P):te=R-P+1;for(let ie=0;ie<te;++ie){let Me=(P+ie)%N;if(ee(Y[Me],Me))return Me}return-1}D.findFirstIndex=Q;function ue(Y,ee,P=-1,R=0){let N=Y.length;if(N===0)return-1;P<0?P=Math.max(0,P+N):P=Math.min(P,N-1),R<0?R=Math.max(0,R+N):R=Math.min(R,N-1);let te;P<R?te=P+1+(N-R):te=P-R+1;for(let ie=0;ie<te;++ie){let Me=(P-ie+N)%N;if(ee(Y[Me],Me))return Me}return-1}D.findLastIndex=ue;function _e(Y,ee,P=0,R=-1){let N=Q(Y,ee,P,R);return N!==-1?Y[N]:void 0}D.findFirstValue=_e;function ce(Y,ee,P=-1,R=0){let N=ue(Y,ee,P,R);return N!==-1?Y[N]:void 0}D.findLastValue=ce;function xe(Y,ee,P,R=0,N=-1){let te=Y.length;if(te===0)return 0;R<0?R=Math.max(0,R+te):R=Math.min(R,te-1),N<0?N=Math.max(0,N+te):N=Math.min(N,te-1);let ie=R,Me=N-R+1;for(;Me>0;){let Ze=Me>>1,Li=ie+Ze;P(Y[Li],ee)<0?(ie=Li+1,Me-=Ze+1):Me=Ze}return ie}D.lowerBound=xe;function Ee(Y,ee,P,R=0,N=-1){let te=Y.length;if(te===0)return 0;R<0?R=Math.max(0,R+te):R=Math.min(R,te-1),N<0?N=Math.max(0,N+te):N=Math.min(N,te-1);let ie=R,Me=N-R+1;for(;Me>0;){let Ze=Me>>1,Li=ie+Ze;P(Y[Li],ee)>0?Me=Ze:(ie=Li+1,Me-=Ze+1)}return ie}D.upperBound=Ee;function be(Y,ee,P){if(Y===ee)return!0;if(Y.length!==ee.length)return!1;for(let R=0,N=Y.length;R<N;++R)if(P?!P(Y[R],ee[R]):Y[R]!==ee[R])return!1;return!0}D.shallowEqual=be;function ke(Y,ee={}){let{start:P,stop:R,step:N}=ee;if(N===void 0&&(N=1),N===0)throw new Error("Slice `step` cannot be zero.");let te=Y.length;P===void 0?P=N<0?te-1:0:P<0?P=Math.max(P+te,N<0?-1:0):P>=te&&(P=N<0?te-1:te),R===void 0?R=N<0?-1:te:R<0?R=Math.max(R+te,N<0?-1:0):R>=te&&(R=N<0?te-1:te);let ie;N<0&&R>=P||N>0&&P>=R?ie=0:N<0?ie=Math.floor((R-P+1)/N+1):ie=Math.floor((R-P-1)/N+1);let Me=[];for(let Ze=0;Ze<ie;++Ze)Me[Ze]=Y[P+Ze*N];return Me}D.slice=ke;function ze(Y,ee,P){let R=Y.length;if(R<=1||(ee<0?ee=Math.max(0,ee+R):ee=Math.min(ee,R-1),P<0?P=Math.max(0,P+R):P=Math.min(P,R-1),ee===P))return;let N=Y[ee],te=ee<P?1:-1;for(let ie=ee;ie!==P;ie+=te)Y[ie]=Y[ie+te];Y[P]=N}D.move=ze;function He(Y,ee=0,P=-1){let R=Y.length;if(!(R<=1))for(ee<0?ee=Math.max(0,ee+R):ee=Math.min(ee,R-1),P<0?P=Math.max(0,P+R):P=Math.min(P,R-1);ee<P;){let N=Y[ee],te=Y[P];Y[ee++]=te,Y[P--]=N}}D.reverse=He;function Re(Y,ee,P=0,R=-1){let N=Y.length;if(N<=1||(P<0?P=Math.max(0,P+N):P=Math.min(P,N-1),R<0?R=Math.max(0,R+N):R=Math.min(R,N-1),P>=R))return;let te=R-P+1;if(ee>0?ee=ee%te:ee<0&&(ee=(ee%te+te)%te),ee===0)return;let ie=P+ee;He(Y,P,ie-1),He(Y,ie,R),He(Y,P,R)}D.rotate=Re;function nt(Y,ee,P=0,R=-1){let N=Y.length;if(N===0)return;P<0?P=Math.max(0,P+N):P=Math.min(P,N-1),R<0?R=Math.max(0,R+N):R=Math.min(R,N-1);let te;R<P?te=R+1+(N-P):te=R-P+1;for(let ie=0;ie<te;++ie)Y[(P+ie)%N]=ee}D.fill=nt;function As(Y,ee,P){let R=Y.length;ee<0?ee=Math.max(0,ee+R):ee=Math.min(ee,R);for(let N=R;N>ee;--N)Y[N]=Y[N-1];Y[ee]=P}D.insert=As;function Pt(Y,ee){let P=Y.length;if(ee<0&&(ee+=P),ee<0||ee>=P)return;let R=Y[ee];for(let N=ee+1;N<P;++N)Y[N-1]=Y[N];return Y.length=P-1,R}D.removeAt=Pt;function ki(Y,ee,P=0,R=-1){let N=$(Y,ee,P,R);return N!==-1&&Pt(Y,N),N}D.removeFirstOf=ki;function Is(Y,ee,P=-1,R=0){let N=G(Y,ee,P,R);return N!==-1&&Pt(Y,N),N}D.removeLastOf=Is;function Zi(Y,ee,P=0,R=-1){let N=Y.length;if(N===0)return 0;P<0?P=Math.max(0,P+N):P=Math.min(P,N-1),R<0?R=Math.max(0,R+N):R=Math.min(R,N-1);let te=0;for(let ie=0;ie<N;++ie)P<=R&&ie>=P&&ie<=R&&Y[ie]===ee||R<P&&(ie<=R||ie>=P)&&Y[ie]===ee?te++:te>0&&(Y[ie-te]=Y[ie]);return te>0&&(Y.length=N-te),te}D.removeAllOf=Zi;function ji(Y,ee,P=0,R=-1){let N,te=Q(Y,ee,P,R);return te!==-1&&(N=Pt(Y,te)),{index:te,value:N}}D.removeFirstWhere=ji;function mr(Y,ee,P=-1,R=0){let N,te=ue(Y,ee,P,R);return te!==-1&&(N=Pt(Y,te)),{index:te,value:N}}D.removeLastWhere=mr;function pt(Y,ee,P=0,R=-1){let N=Y.length;if(N===0)return 0;P<0?P=Math.max(0,P+N):P=Math.min(P,N-1),R<0?R=Math.max(0,R+N):R=Math.min(R,N-1);let te=0;for(let ie=0;ie<N;++ie)P<=R&&ie>=P&&ie<=R&&ee(Y[ie],ie)||R<P&&(ie<=R||ie>=P)&&ee(Y[ie],ie)?te++:te>0&&(Y[ie-te]=Y[ie]);return te>0&&(Y.length=N-te),te}D.removeAllWhere=pt}(n.ArrayExt||(n.ArrayExt={}));function*e(...D){for(let $ of D)yield*$}function*r(){}function*s(D,$=0){for(let G of D)yield[$++,G]}function*o(D,$){let G=0;for(let Q of D)$(Q,G++)&&(yield Q)}function l(D,$){let G=0;for(let Q of D)if($(Q,G++))return Q}function c(D,$){let G=0;for(let Q of D)if($(Q,G++))return G-1;return-1}function d(D,$){let G;for(let Q of D){if(G===void 0){G=Q;continue}$(Q,G)<0&&(G=Q)}return G}function h(D,$){let G;for(let Q of D){if(G===void 0){G=Q;continue}$(Q,G)>0&&(G=Q)}return G}function g(D,$){let G=!0,Q,ue;for(let _e of D)G?(Q=_e,ue=_e,G=!1):$(_e,Q)<0?Q=_e:$(_e,ue)>0&&(ue=_e);return G?void 0:[Q,ue]}function m(D){return Array.from(D)}function p(D){let $={};for(let[G,Q]of D)$[G]=Q;return $}function v(D,$){let G=0;for(let Q of D)if($(Q,G++)===!1)return}function b(D,$){let G=0;for(let Q of D)if($(Q,G++)===!1)return!1;return!0}function _(D,$){let G=0;for(let Q of D)if($(Q,G++))return!0;return!1}function*y(D,$){let G=0;for(let Q of D)yield $(Q,G++)}function*C(D,$,G){$===void 0?($=D,D=0,G=1):G===void 0&&(G=1);let Q=E.rangeLength(D,$,G);for(let ue=0;ue<Q;ue++)yield D+G*ue}var E;(function(D){function $(G,Q,ue){return ue===0?1/0:G>Q&&ue>0||G<Q&&ue<0?0:Math.ceil((Q-G)/ue)}D.rangeLength=$})(E||(E={}));function I(D,$,G){let Q=D[Symbol.iterator](),ue=0,_e=Q.next();if(_e.done&&G===void 0)throw new TypeError("Reduce of empty iterable with no initial value.");if(_e.done)return G;let ce=Q.next();if(ce.done&&G===void 0)return _e.value;if(ce.done)return $(G,_e.value,ue++);let xe;G===void 0?xe=$(_e.value,ce.value,ue++):xe=$($(G,_e.value,ue++),ce.value,ue++);let Ee;for(;!(Ee=Q.next()).done;)xe=$(xe,Ee.value,ue++);return xe}function*M(D,$){for(;0<$--;)yield D}function*S(D){yield D}function*k(D){if(typeof D.retro=="function")yield*D.retro();else for(let $=D.length-1;$>-1;$--)yield D[$]}function B(D){let $=[],G=new Set,Q=new Map;for(let ce of D)ue(ce);for(let[ce]of Q)_e(ce);return $;function ue(ce){let[xe,Ee]=ce,be=Q.get(Ee);be?be.push(xe):Q.set(Ee,[xe])}function _e(ce){if(G.has(ce))return;G.add(ce);let xe=Q.get(ce);if(xe)for(let Ee of xe)_e(Ee);$.push(ce)}}function*H(D,$){let G=0;for(let Q of D)G++%$===0&&(yield Q)}n.StringExt=void 0,function(D){function $(ce,xe,Ee=0){let be=new Array(xe.length);for(let ke=0,ze=Ee,He=xe.length;ke<He;++ke,++ze){if(ze=ce.indexOf(xe[ke],ze),ze===-1)return null;be[ke]=ze}return be}D.findIndices=$;function G(ce,xe,Ee=0){let be=$(ce,xe,Ee);if(!be)return null;let ke=0;for(let ze=0,He=be.length;ze<He;++ze){let Re=be[ze]-Ee;ke+=Re*Re}return{score:ke,indices:be}}D.matchSumOfSquares=G;function Q(ce,xe,Ee=0){let be=$(ce,xe,Ee);if(!be)return null;let ke=0,ze=Ee-1;for(let He=0,Re=be.length;He<Re;++He){let nt=be[He];ke+=nt-ze-1,ze=nt}return{score:ke,indices:be}}D.matchSumOfDeltas=Q;function ue(ce,xe,Ee){let be=[],ke=0,ze=0,He=xe.length;for(;ke<He;){let Re=xe[ke],nt=xe[ke];for(;++ke<He&&xe[ke]===nt+1;)nt++;ze<Re&&be.push(ce.slice(ze,Re)),Re<nt+1&&be.push(Ee(ce.slice(Re,nt+1))),ze=nt+1}return ze<ce.length&&be.push(ce.slice(ze)),be}D.highlight=ue;function _e(ce,xe){return ce<xe?-1:ce>xe?1:0}D.cmp=_e}(n.StringExt||(n.StringExt={}));function*F(D,$){if($<1)return;let G=D[Symbol.iterator](),Q;for(;0<$--&&!(Q=G.next()).done;)yield Q.value}function*J(...D){let $=D.map(Q=>Q[Symbol.iterator]()),G=$.map(Q=>Q.next());for(;b(G,Q=>!Q.done);G=$.map(Q=>Q.next()))yield G.map(Q=>Q.value)}n.chain=e,n.each=v,n.empty=r,n.enumerate=s,n.every=b,n.filter=o,n.find=l,n.findIndex=c,n.map=y,n.max=h,n.min=d,n.minmax=g,n.once=S,n.range=C,n.reduce=I,n.repeat=M,n.retro=k,n.some=_,n.stride=H,n.take=F,n.toArray=m,n.toObject=p,n.topologicSort=B,n.zip=J})});var ss=O((rs,gd)=>{(function(n,e){typeof rs=="object"&&typeof gd<"u"?e(rs,ui()):typeof define=="function"&&define.amd?define(["exports","@lumino/algorithm"],e):(n=typeof globalThis<"u"?globalThis:n||self,e(n.lumino_coreutils={},n.lumino_algorithm))})(rs,function(n,e){"use strict";n.JSONExt=void 0,function(g){g.emptyObject=Object.freeze({}),g.emptyArray=Object.freeze([]);function m(M){return M===null||typeof M=="boolean"||typeof M=="number"||typeof M=="string"}g.isPrimitive=m;function p(M){return Array.isArray(M)}g.isArray=p;function v(M){return!m(M)&&!p(M)}g.isObject=v;function b(M,S){if(M===S)return!0;if(m(M)||m(S))return!1;let k=p(M),B=p(S);return k!==B?!1:k&&B?y(M,S):C(M,S)}g.deepEqual=b;function _(M){return m(M)?M:p(M)?E(M):I(M)}g.deepCopy=_;function y(M,S){if(M===S)return!0;if(M.length!==S.length)return!1;for(let k=0,B=M.length;k<B;++k)if(!b(M[k],S[k]))return!1;return!0}function C(M,S){if(M===S)return!0;for(let k in M)if(M[k]!==void 0&&!(k in S))return!1;for(let k in S)if(S[k]!==void 0&&!(k in M))return!1;for(let k in M){let B=M[k],H=S[k];if(!(B===void 0&&H===void 0)&&(B===void 0||H===void 0||!b(B,H)))return!1}return!0}function E(M){let S=new Array(M.length);for(let k=0,B=M.length;k<B;++k)S[k]=_(M[k]);return S}function I(M){let S={};for(let k in M){let B=M[k];B!==void 0&&(S[k]=_(B))}return S}}(n.JSONExt||(n.JSONExt={}));class r{constructor(){this._types=[],this._values=[]}types(){return this._types.slice()}hasData(m){return this._types.indexOf(m)!==-1}getData(m){let p=this._types.indexOf(m);return p!==-1?this._values[p]:void 0}setData(m,p){this.clearData(m),this._types.push(m),this._values.push(p)}clearData(m){let p=this._types.indexOf(m);p!==-1&&(this._types.splice(p,1),this._values.splice(p,1))}clear(){this._types.length=0,this._values.length=0}}class s{constructor(m={}){this._application=null,this._validatePlugin=()=>!0,this._plugins=new Map,this._services=new Map,m.validatePlugin&&(console.info("Plugins may be rejected by the custom validation plugin method."),this._validatePlugin=m.validatePlugin)}get application(){return this._application}set application(m){if(this._application!==null)throw Error("PluginRegistry.application is already set. It cannot be overridden.");this._application=m}get deferredPlugins(){return Array.from(this._plugins).filter(([m,p])=>p.autoStart==="defer").map(([m,p])=>m)}getPluginDescription(m){var p,v;return(v=(p=this._plugins.get(m))===null||p===void 0?void 0:p.description)!==null&&v!==void 0?v:""}hasPlugin(m){return this._plugins.has(m)}isPluginActivated(m){var p,v;return(v=(p=this._plugins.get(m))===null||p===void 0?void 0:p.activated)!==null&&v!==void 0?v:!1}listPlugins(){return Array.from(this._plugins.keys())}registerPlugin(m){if(this._plugins.has(m.id))throw new TypeError(`Plugin '${m.id}' is already registered.`);if(!this._validatePlugin(m))throw new Error(`Plugin '${m.id}' is not valid.`);let p=o.createPluginData(m);o.ensureNoCycle(p,this._plugins,this._services),p.provides&&this._services.set(p.provides,p.id),this._plugins.set(p.id,p)}registerPlugins(m){for(let p of m)this.registerPlugin(p)}deregisterPlugin(m,p){let v=this._plugins.get(m);if(v){if(v.activated&&!p)throw new Error(`Plugin '${m}' is still active.`);this._plugins.delete(m)}}async activatePlugin(m){let p=this._plugins.get(m);if(!p)throw new ReferenceError(`Plugin '${m}' is not registered.`);if(p.activated)return;if(p.promise)return p.promise;let v=p.requires.map(_=>this.resolveRequiredService(_)),b=p.optional.map(_=>this.resolveOptionalService(_));return p.promise=Promise.all([...v,...b]).then(_=>p.activate.apply(void 0,[this.application,..._])).then(_=>{p.service=_,p.activated=!0,p.promise=null}).catch(_=>{throw p.promise=null,_}),p.promise}async activatePlugins(m,p={}){switch(m){case"defer":{let v=this.deferredPlugins.filter(b=>this._plugins.get(b).autoStart).map(b=>this.activatePlugin(b));await Promise.all(v);break}case"startUp":{let b=o.collectStartupPlugins(this._plugins,p).map(async _=>{try{return await this.activatePlugin(_)}catch(y){console.error(`Plugin '${_}' failed to activate.`,y)}});await Promise.all(b);break}}}async deactivatePlugin(m){let p=this._plugins.get(m);if(!p)throw new ReferenceError(`Plugin '${m}' is not registered.`);if(!p.activated)return[];if(!p.deactivate)throw new TypeError(`Plugin '${m}'#deactivate() method missing`);let v=o.findDependents(m,this._plugins,this._services),b=v.map(_=>this._plugins.get(_));for(let _ of b)if(!_.deactivate)throw new TypeError(`Plugin ${_.id}#deactivate() method missing (depends on ${m})`);for(let _ of b){let y=[..._.requires,..._.optional].map(C=>{let E=this._services.get(C);return E?this._plugins.get(E).service:null});await _.deactivate(this.application,...y),_.service=null,_.activated=!1}return v.pop(),v}async resolveRequiredService(m){let p=this._services.get(m);if(!p)throw new TypeError(`No provider for: ${m.name}.`);let v=this._plugins.get(p);return v.activated||await this.activatePlugin(p),v.service}async resolveOptionalService(m){let p=this._services.get(m);if(!p)return null;let v=this._plugins.get(p);if(!v.activated)try{await this.activatePlugin(p)}catch(b){return console.error(b),null}return v.service}}var o;(function(g){class m{constructor(C){var E,I,M,S;this._activated=!1,this._promise=null,this._service=null,this.id=C.id,this.description=(E=C.description)!==null&&E!==void 0?E:"",this.activate=C.activate,this.deactivate=(I=C.deactivate)!==null&&I!==void 0?I:null,this.provides=(M=C.provides)!==null&&M!==void 0?M:null,this.autoStart=(S=C.autoStart)!==null&&S!==void 0?S:!1,this.requires=C.requires?C.requires.slice():[],this.optional=C.optional?C.optional.slice():[]}get activated(){return this._activated}set activated(C){this._activated=C}get service(){return this._service}set service(C){this._service=C}get promise(){return this._promise}set promise(C){this._promise=C}}function p(y){return new m(y)}g.createPluginData=p;function v(y,C,E){let I=[...y.requires,...y.optional],M=k=>{if(k===y.provides)return!0;let B=E.get(k);if(!B)return!1;let H=C.get(B),F=[...H.requires,...H.optional];return F.length===0?!1:(S.push(B),F.some(M)?!0:(S.pop(),!1))};if(!y.provides||I.length===0)return;let S=[y.id];if(I.some(M))throw new ReferenceError(`Cycle detected: ${S.join(" -> ")}.`)}g.ensureNoCycle=v;function b(y,C,E){let I=new Array,M=F=>{let J=C.get(F),D=[...J.requires,...J.optional];I.push(...D.reduce(($,G)=>{let Q=E.get(G);return Q&&$.push([F,Q]),$},[]))};for(let F of C.keys())M(F);let S=I.filter(F=>F[1]===y),k=0;for(;S.length>k;){let F=S.length,J=new Set(S.map(D=>D[0]));for(let D of J)I.filter($=>$[1]===D).forEach($=>{S.includes($)||S.push($)});k=F}let B=e.topologicSort(S),H=B.findIndex(F=>F===y);return H===-1?[y]:B.slice(0,H+1)}g.findDependents=b;function _(y,C){let E=new Set;for(let I of y.keys())y.get(I).autoStart===!0&&E.add(I);if(C.startPlugins)for(let I of C.startPlugins)E.add(I);if(C.ignorePlugins)for(let I of C.ignorePlugins)E.delete(I);return Array.from(E)}g.collectStartupPlugins=_})(o||(o={}));class l{constructor(){this.promise=new Promise((m,p)=>{this._resolve=m,this._reject=p})}resolve(m){let p=this._resolve;p(m)}reject(m){let p=this._reject;p(m)}}class c{constructor(m,p){this.name=m,this.description=p??"",this._tokenStructuralPropertyT=null}}function d(g){let m=0;for(let p=0,v=g.length;p<v;++p)p%4===0&&(m=Math.random()*4294967295>>>0),g[p]=m&255,m>>>=8}n.Random=void 0,function(g){g.getRandomValues=(()=>{let m=typeof window<"u"&&(window.crypto||window.msCrypto)||null;return m&&typeof m.getRandomValues=="function"?function(v){return m.getRandomValues(v)}:d})()}(n.Random||(n.Random={}));function h(g){let m=new Uint8Array(16),p=new Array(256);for(let v=0;v<16;++v)p[v]="0"+v.toString(16);for(let v=16;v<256;++v)p[v]=v.toString(16);return function(){return g(m),m[6]=64|m[6]&15,m[8]=128|m[8]&63,p[m[0]]+p[m[1]]+p[m[2]]+p[m[3]]+"-"+p[m[4]]+p[m[5]]+"-"+p[m[6]]+p[m[7]]+"-"+p[m[8]]+p[m[9]]+"-"+p[m[10]]+p[m[11]]+p[m[12]]+p[m[13]]+p[m[14]]+p[m[15]]}}n.UUID=void 0,function(g){g.uuid4=h(n.Random.getRandomValues)}(n.UUID||(n.UUID={})),n.MimeData=r,n.PluginRegistry=s,n.PromiseDelegate=l,n.Token=c})});var Cd=O((hE,Md)=>{function ix(){this.__data__=[],this.size=0}Md.exports=ix});var ro=O((fE,Td)=>{function nx(n,e){return n===e||n!==n&&e!==e}Td.exports=nx});var tr=O((mE,Sd)=>{var rx=ro();function sx(n,e){for(var r=n.length;r--;)if(rx(n[r][0],e))return r;return-1}Sd.exports=sx});var Id=O((pE,Ad)=>{var ax=tr(),ox=Array.prototype,lx=ox.splice;function ux(n){var e=this.__data__,r=ax(e,n);if(r<0)return!1;var s=e.length-1;return r==s?e.pop():lx.call(e,r,1),--this.size,!0}Ad.exports=ux});var kd=O((gE,Ed)=>{var dx=tr();function cx(n){var e=this.__data__,r=dx(e,n);return r<0?void 0:e[r][1]}Ed.exports=cx});var zd=O((_E,Ld)=>{var hx=tr();function fx(n){return hx(this.__data__,n)>-1}Ld.exports=fx});var Dd=O((bE,Bd)=>{var mx=tr();function px(n,e){var r=this.__data__,s=mx(r,n);return s<0?(++this.size,r.push([n,e])):r[s][1]=e,this}Bd.exports=px});var ir=O((vE,Pd)=>{var gx=Cd(),_x=Id(),bx=kd(),vx=zd(),wx=Dd();function wn(n){var e=-1,r=n==null?0:n.length;for(this.clear();++e<r;){var s=n[e];this.set(s[0],s[1])}}wn.prototype.clear=gx;wn.prototype.delete=_x;wn.prototype.get=bx;wn.prototype.has=vx;wn.prototype.set=wx;Pd.exports=wn});var Wd=O((wE,Rd)=>{var yx=ir();function xx(){this.__data__=new yx,this.size=0}Rd.exports=xx});var Od=O((yE,Nd)=>{function Mx(n){var e=this.__data__,r=e.delete(n);return this.size=e.size,r}Nd.exports=Mx});var Hd=O((xE,qd)=>{function Cx(n){return this.__data__.get(n)}qd.exports=Cx});var Ud=O((ME,Fd)=>{function Tx(n){return this.__data__.has(n)}Fd.exports=Tx});var so=O((CE,Kd)=>{var Sx=typeof window=="object"&&window&&window.Object===Object&&window;Kd.exports=Sx});var Jt=O((TE,$d)=>{var Ax=so(),Ix=typeof self=="object"&&self&&self.Object===Object&&self,Ex=Ax||Ix||Function("return this")();$d.exports=Ex});var nr=O((SE,Vd)=>{var kx=Jt(),Lx=kx.Symbol;Vd.exports=Lx});var Zd=O((AE,Xd)=>{var Gd=nr(),Yd=Object.prototype,zx=Yd.hasOwnProperty,Bx=Yd.toString,rr=Gd?Gd.toStringTag:void 0;function Dx(n){var e=zx.call(n,rr),r=n[rr];try{n[rr]=void 0;var s=!0}catch{}var o=Bx.call(n);return s&&(e?n[rr]=r:delete n[rr]),o}Xd.exports=Dx});var Jd=O((IE,jd)=>{var Px=Object.prototype,Rx=Px.toString;function Wx(n){return Rx.call(n)}jd.exports=Wx});var yn=O((EE,tc)=>{var Qd=nr(),Nx=Zd(),Ox=Jd(),qx="[object Null]",Hx="[object Undefined]",ec=Qd?Qd.toStringTag:void 0;function Fx(n){return n==null?n===void 0?Hx:qx:ec&&ec in Object(n)?Nx(n):Ox(n)}tc.exports=Fx});var ms=O((kE,ic)=>{function Ux(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}ic.exports=Ux});var ao=O((LE,nc)=>{var Kx=yn(),$x=ms(),Vx="[object AsyncFunction]",Gx="[object Function]",Yx="[object GeneratorFunction]",Xx="[object Proxy]";function Zx(n){if(!$x(n))return!1;var e=Kx(n);return e==Gx||e==Yx||e==Vx||e==Xx}nc.exports=Zx});var sc=O((zE,rc)=>{var jx=Jt(),Jx=jx["__core-js_shared__"];rc.exports=Jx});var lc=O((BE,oc)=>{var oo=sc(),ac=function(){var n=/[^.]+$/.exec(oo&&oo.keys&&oo.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function Qx(n){return!!ac&&ac in n}oc.exports=Qx});var lo=O((DE,uc)=>{var e1=Function.prototype,t1=e1.toString;function i1(n){if(n!=null){try{return t1.call(n)}catch{}try{return n+""}catch{}}return""}uc.exports=i1});var cc=O((PE,dc)=>{var n1=ao(),r1=lc(),s1=ms(),a1=lo(),o1=/[\\^$.*+?()[\]{}|]/g,l1=/^\[object .+?Constructor\]$/,u1=Function.prototype,d1=Object.prototype,c1=u1.toString,h1=d1.hasOwnProperty,f1=RegExp("^"+c1.call(h1).replace(o1,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function m1(n){if(!s1(n)||r1(n))return!1;var e=n1(n)?f1:l1;return e.test(a1(n))}dc.exports=m1});var fc=O((RE,hc)=>{function p1(n,e){return n?.[e]}hc.exports=p1});var Vi=O((WE,mc)=>{var g1=cc(),_1=fc();function b1(n,e){var r=_1(n,e);return g1(r)?r:void 0}mc.exports=b1});var ps=O((NE,pc)=>{var v1=Vi(),w1=Jt(),y1=v1(w1,"Map");pc.exports=y1});var sr=O((OE,gc)=>{var x1=Vi(),M1=x1(Object,"create");gc.exports=M1});var vc=O((qE,bc)=>{var _c=sr();function C1(){this.__data__=_c?_c(null):{},this.size=0}bc.exports=C1});var yc=O((HE,wc)=>{function T1(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}wc.exports=T1});var Mc=O((FE,xc)=>{var S1=sr(),A1="__lodash_hash_undefined__",I1=Object.prototype,E1=I1.hasOwnProperty;function k1(n){var e=this.__data__;if(S1){var r=e[n];return r===A1?void 0:r}return E1.call(e,n)?e[n]:void 0}xc.exports=k1});var Tc=O((UE,Cc)=>{var L1=sr(),z1=Object.prototype,B1=z1.hasOwnProperty;function D1(n){var e=this.__data__;return L1?e[n]!==void 0:B1.call(e,n)}Cc.exports=D1});var Ac=O((KE,Sc)=>{var P1=sr(),R1="__lodash_hash_undefined__";function W1(n,e){var r=this.__data__;return this.size+=this.has(n)?0:1,r[n]=P1&&e===void 0?R1:e,this}Sc.exports=W1});var Ec=O(($E,Ic)=>{var N1=vc(),O1=yc(),q1=Mc(),H1=Tc(),F1=Ac();function xn(n){var e=-1,r=n==null?0:n.length;for(this.clear();++e<r;){var s=n[e];this.set(s[0],s[1])}}xn.prototype.clear=N1;xn.prototype.delete=O1;xn.prototype.get=q1;xn.prototype.has=H1;xn.prototype.set=F1;Ic.exports=xn});var zc=O((VE,Lc)=>{var kc=Ec(),U1=ir(),K1=ps();function $1(){this.size=0,this.__data__={hash:new kc,map:new(K1||U1),string:new kc}}Lc.exports=$1});var Dc=O((GE,Bc)=>{function V1(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}Bc.exports=V1});var ar=O((YE,Pc)=>{var G1=Dc();function Y1(n,e){var r=n.__data__;return G1(e)?r[typeof e=="string"?"string":"hash"]:r.map}Pc.exports=Y1});var Wc=O((XE,Rc)=>{var X1=ar();function Z1(n){var e=X1(this,n).delete(n);return this.size-=e?1:0,e}Rc.exports=Z1});var Oc=O((ZE,Nc)=>{var j1=ar();function J1(n){return j1(this,n).get(n)}Nc.exports=J1});var Hc=O((jE,qc)=>{var Q1=ar();function eM(n){return Q1(this,n).has(n)}qc.exports=eM});var Uc=O((JE,Fc)=>{var tM=ar();function iM(n,e){var r=tM(this,n),s=r.size;return r.set(n,e),this.size+=r.size==s?0:1,this}Fc.exports=iM});var gs=O((QE,Kc)=>{var nM=zc(),rM=Wc(),sM=Oc(),aM=Hc(),oM=Uc();function Mn(n){var e=-1,r=n==null?0:n.length;for(this.clear();++e<r;){var s=n[e];this.set(s[0],s[1])}}Mn.prototype.clear=nM;Mn.prototype.delete=rM;Mn.prototype.get=sM;Mn.prototype.has=aM;Mn.prototype.set=oM;Kc.exports=Mn});var Vc=O((ek,$c)=>{var lM=ir(),uM=ps(),dM=gs(),cM=200;function hM(n,e){var r=this.__data__;if(r instanceof lM){var s=r.__data__;if(!uM||s.length<cM-1)return s.push([n,e]),this.size=++r.size,this;r=this.__data__=new dM(s)}return r.set(n,e),this.size=r.size,this}$c.exports=hM});var uo=O((tk,Gc)=>{var fM=ir(),mM=Wd(),pM=Od(),gM=Hd(),_M=Ud(),bM=Vc();function Cn(n){var e=this.__data__=new fM(n);this.size=e.size}Cn.prototype.clear=mM;Cn.prototype.delete=pM;Cn.prototype.get=gM;Cn.prototype.has=_M;Cn.prototype.set=bM;Gc.exports=Cn});var Xc=O((ik,Yc)=>{var vM="__lodash_hash_undefined__";function wM(n){return this.__data__.set(n,vM),this}Yc.exports=wM});var jc=O((nk,Zc)=>{function yM(n){return this.__data__.has(n)}Zc.exports=yM});var co=O((rk,Jc)=>{var xM=gs(),MM=Xc(),CM=jc();function _s(n){var e=-1,r=n==null?0:n.length;for(this.__data__=new xM;++e<r;)this.add(n[e])}_s.prototype.add=_s.prototype.push=MM;_s.prototype.has=CM;Jc.exports=_s});var eh=O((sk,Qc)=>{function TM(n,e){for(var r=-1,s=n==null?0:n.length;++r<s;)if(e(n[r],r,n))return!0;return!1}Qc.exports=TM});var ho=O((ak,th)=>{function SM(n,e){return n.has(e)}th.exports=SM});var fo=O((ok,ih)=>{var AM=co(),IM=eh(),EM=ho(),kM=1,LM=2;function zM(n,e,r,s,o,l){var c=r&kM,d=n.length,h=e.length;if(d!=h&&!(c&&h>d))return!1;var g=l.get(n),m=l.get(e);if(g&&m)return g==e&&m==n;var p=-1,v=!0,b=r&LM?new AM:void 0;for(l.set(n,e),l.set(e,n);++p<d;){var _=n[p],y=e[p];if(s)var C=c?s(y,_,p,e,n,l):s(_,y,p,n,e,l);if(C!==void 0){if(C)continue;v=!1;break}if(b){if(!IM(e,function(E,I){if(!EM(b,I)&&(_===E||o(_,E,r,s,l)))return b.push(I)})){v=!1;break}}else if(!(_===y||o(_,y,r,s,l))){v=!1;break}}return l.delete(n),l.delete(e),v}ih.exports=zM});var rh=O((lk,nh)=>{var BM=Jt(),DM=BM.Uint8Array;nh.exports=DM});var ah=O((uk,sh)=>{function PM(n){var e=-1,r=Array(n.size);return n.forEach(function(s,o){r[++e]=[o,s]}),r}sh.exports=PM});var bs=O((dk,oh)=>{function RM(n){var e=-1,r=Array(n.size);return n.forEach(function(s){r[++e]=s}),r}oh.exports=RM});var hh=O((ck,ch)=>{var lh=nr(),uh=rh(),WM=ro(),NM=fo(),OM=ah(),qM=bs(),HM=1,FM=2,UM="[object Boolean]",KM="[object Date]",$M="[object Error]",VM="[object Map]",GM="[object Number]",YM="[object RegExp]",XM="[object Set]",ZM="[object String]",jM="[object Symbol]",JM="[object ArrayBuffer]",QM="[object DataView]",dh=lh?lh.prototype:void 0,mo=dh?dh.valueOf:void 0;function eC(n,e,r,s,o,l,c){switch(r){case QM:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case JM:return!(n.byteLength!=e.byteLength||!l(new uh(n),new uh(e)));case UM:case KM:case GM:return WM(+n,+e);case $M:return n.name==e.name&&n.message==e.message;case YM:case ZM:return n==e+"";case VM:var d=OM;case XM:var h=s&HM;if(d||(d=qM),n.size!=e.size&&!h)return!1;var g=c.get(n);if(g)return g==e;s|=FM,c.set(n,e);var m=NM(d(n),d(e),s,o,l,c);return c.delete(n),m;case jM:if(mo)return mo.call(n)==mo.call(e)}return!1}ch.exports=eC});var mh=O((hk,fh)=>{function tC(n,e){for(var r=-1,s=e.length,o=n.length;++r<s;)n[o+r]=e[r];return n}fh.exports=tC});var _i=O((fk,ph)=>{var iC=Array.isArray;ph.exports=iC});var _h=O((mk,gh)=>{var nC=mh(),rC=_i();function sC(n,e,r){var s=e(n);return rC(n)?s:nC(s,r(n))}gh.exports=sC});var vh=O((pk,bh)=>{function aC(n,e){for(var r=-1,s=n==null?0:n.length,o=0,l=[];++r<s;){var c=n[r];e(c,r,n)&&(l[o++]=c)}return l}bh.exports=aC});var yh=O((gk,wh)=>{function oC(){return[]}wh.exports=oC});var Ch=O((_k,Mh)=>{var lC=vh(),uC=yh(),dC=Object.prototype,cC=dC.propertyIsEnumerable,xh=Object.getOwnPropertySymbols,hC=xh?function(n){return n==null?[]:(n=Object(n),lC(xh(n),function(e){return cC.call(n,e)}))}:uC;Mh.exports=hC});var Sh=O((bk,Th)=>{function fC(n,e){for(var r=-1,s=Array(n);++r<n;)s[r]=e(r);return s}Th.exports=fC});var Tn=O((vk,Ah)=>{function mC(n){return n!=null&&typeof n=="object"}Ah.exports=mC});var Eh=O((wk,Ih)=>{var pC=yn(),gC=Tn(),_C="[object Arguments]";function bC(n){return gC(n)&&pC(n)==_C}Ih.exports=bC});var po=O((yk,zh)=>{var kh=Eh(),vC=Tn(),Lh=Object.prototype,wC=Lh.hasOwnProperty,yC=Lh.propertyIsEnumerable,xC=kh(function(){return arguments}())?kh:function(n){return vC(n)&&wC.call(n,"callee")&&!yC.call(n,"callee")};zh.exports=xC});var Dh=O((xk,Bh)=>{function MC(){return!1}Bh.exports=MC});var go=O((or,Sn)=>{var CC=Jt(),TC=Dh(),Wh=typeof or=="object"&&or&&!or.nodeType&&or,Ph=Wh&&typeof Sn=="object"&&Sn&&!Sn.nodeType&&Sn,SC=Ph&&Ph.exports===Wh,Rh=SC?CC.Buffer:void 0,AC=Rh?Rh.isBuffer:void 0,IC=AC||TC;Sn.exports=IC});var _o=O((Mk,Nh)=>{var EC=9007199254740991,kC=/^(?:0|[1-9]\d*)$/;function LC(n,e){var r=typeof n;return e=e??EC,!!e&&(r=="number"||r!="symbol"&&kC.test(n))&&n>-1&&n%1==0&&n<e}Nh.exports=LC});var vs=O((Ck,Oh)=>{var zC=9007199254740991;function BC(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=zC}Oh.exports=BC});var Hh=O((Tk,qh)=>{var DC=yn(),PC=vs(),RC=Tn(),WC="[object Arguments]",NC="[object Array]",OC="[object Boolean]",qC="[object Date]",HC="[object Error]",FC="[object Function]",UC="[object Map]",KC="[object Number]",$C="[object Object]",VC="[object RegExp]",GC="[object Set]",YC="[object String]",XC="[object WeakMap]",ZC="[object ArrayBuffer]",jC="[object DataView]",JC="[object Float32Array]",QC="[object Float64Array]",eT="[object Int8Array]",tT="[object Int16Array]",iT="[object Int32Array]",nT="[object Uint8Array]",rT="[object Uint8ClampedArray]",sT="[object Uint16Array]",aT="[object Uint32Array]",Pe={};Pe[JC]=Pe[QC]=Pe[eT]=Pe[tT]=Pe[iT]=Pe[nT]=Pe[rT]=Pe[sT]=Pe[aT]=!0;Pe[WC]=Pe[NC]=Pe[ZC]=Pe[OC]=Pe[jC]=Pe[qC]=Pe[HC]=Pe[FC]=Pe[UC]=Pe[KC]=Pe[$C]=Pe[VC]=Pe[GC]=Pe[YC]=Pe[XC]=!1;function oT(n){return RC(n)&&PC(n.length)&&!!Pe[DC(n)]}qh.exports=oT});var Uh=O((Sk,Fh)=>{function lT(n){return function(e){return n(e)}}Fh.exports=lT});var $h=O((lr,An)=>{var uT=so(),Kh=typeof lr=="object"&&lr&&!lr.nodeType&&lr,ur=Kh&&typeof An=="object"&&An&&!An.nodeType&&An,dT=ur&&ur.exports===Kh,bo=dT&&uT.process,cT=function(){try{var n=ur&&ur.require&&ur.require("util").types;return n||bo&&bo.binding&&bo.binding("util")}catch{}}();An.exports=cT});var vo=O((Ak,Yh)=>{var hT=Hh(),fT=Uh(),Vh=$h(),Gh=Vh&&Vh.isTypedArray,mT=Gh?fT(Gh):hT;Yh.exports=mT});var Zh=O((Ik,Xh)=>{var pT=Sh(),gT=po(),_T=_i(),bT=go(),vT=_o(),wT=vo(),yT=Object.prototype,xT=yT.hasOwnProperty;function MT(n,e){var r=_T(n),s=!r&&gT(n),o=!r&&!s&&bT(n),l=!r&&!s&&!o&&wT(n),c=r||s||o||l,d=c?pT(n.length,String):[],h=d.length;for(var g in n)(e||xT.call(n,g))&&!(c&&(g=="length"||o&&(g=="offset"||g=="parent")||l&&(g=="buffer"||g=="byteLength"||g=="byteOffset")||vT(g,h)))&&d.push(g);return d}Xh.exports=MT});var Jh=O((Ek,jh)=>{var CT=Object.prototype;function TT(n){var e=n&&n.constructor,r=typeof e=="function"&&e.prototype||CT;return n===r}jh.exports=TT});var ef=O((kk,Qh)=>{function ST(n,e){return function(r){return n(e(r))}}Qh.exports=ST});var nf=O((Lk,tf)=>{var AT=ef(),IT=AT(Object.keys,Object);tf.exports=IT});var sf=O((zk,rf)=>{var ET=Jh(),kT=nf(),LT=Object.prototype,zT=LT.hasOwnProperty;function BT(n){if(!ET(n))return kT(n);var e=[];for(var r in Object(n))zT.call(n,r)&&r!="constructor"&&e.push(r);return e}rf.exports=BT});var of=O((Bk,af)=>{var DT=ao(),PT=vs();function RT(n){return n!=null&&PT(n.length)&&!DT(n)}af.exports=RT});var wo=O((Dk,lf)=>{var WT=Zh(),NT=sf(),OT=of();function qT(n){return OT(n)?WT(n):NT(n)}lf.exports=qT});var df=O((Pk,uf)=>{var HT=_h(),FT=Ch(),UT=wo();function KT(n){return HT(n,UT,FT)}uf.exports=KT});var ff=O((Rk,hf)=>{var cf=df(),$T=1,VT=Object.prototype,GT=VT.hasOwnProperty;function YT(n,e,r,s,o,l){var c=r&$T,d=cf(n),h=d.length,g=cf(e),m=g.length;if(h!=m&&!c)return!1;for(var p=h;p--;){var v=d[p];if(!(c?v in e:GT.call(e,v)))return!1}var b=l.get(n),_=l.get(e);if(b&&_)return b==e&&_==n;var y=!0;l.set(n,e),l.set(e,n);for(var C=c;++p<h;){v=d[p];var E=n[v],I=e[v];if(s)var M=c?s(I,E,v,e,n,l):s(E,I,v,n,e,l);if(!(M===void 0?E===I||o(E,I,r,s,l):M)){y=!1;break}C||(C=v=="constructor")}if(y&&!C){var S=n.constructor,k=e.constructor;S!=k&&"constructor"in n&&"constructor"in e&&!(typeof S=="function"&&S instanceof S&&typeof k=="function"&&k instanceof k)&&(y=!1)}return l.delete(n),l.delete(e),y}hf.exports=YT});var pf=O((Wk,mf)=>{var XT=Vi(),ZT=Jt(),jT=XT(ZT,"DataView");mf.exports=jT});var _f=O((Nk,gf)=>{var JT=Vi(),QT=Jt(),eS=JT(QT,"Promise");gf.exports=eS});var yo=O((Ok,bf)=>{var tS=Vi(),iS=Jt(),nS=tS(iS,"Set");bf.exports=nS});var wf=O((qk,vf)=>{var rS=Vi(),sS=Jt(),aS=rS(sS,"WeakMap");vf.exports=aS});var If=O((Hk,Af)=>{var xo=pf(),Mo=ps(),Co=_f(),To=yo(),So=wf(),Sf=yn(),In=lo(),yf="[object Map]",oS="[object Object]",xf="[object Promise]",Mf="[object Set]",Cf="[object WeakMap]",Tf="[object DataView]",lS=In(xo),uS=In(Mo),dS=In(Co),cS=In(To),hS=In(So),Gi=Sf;(xo&&Gi(new xo(new ArrayBuffer(1)))!=Tf||Mo&&Gi(new Mo)!=yf||Co&&Gi(Co.resolve())!=xf||To&&Gi(new To)!=Mf||So&&Gi(new So)!=Cf)&&(Gi=function(n){var e=Sf(n),r=e==oS?n.constructor:void 0,s=r?In(r):"";if(s)switch(s){case lS:return Tf;case uS:return yf;case dS:return xf;case cS:return Mf;case hS:return Cf}return e});Af.exports=Gi});var Rf=O((Fk,Pf)=>{var Ao=uo(),fS=fo(),mS=hh(),pS=ff(),Ef=If(),kf=_i(),Lf=go(),gS=vo(),_S=1,zf="[object Arguments]",Bf="[object Array]",ws="[object Object]",bS=Object.prototype,Df=bS.hasOwnProperty;function vS(n,e,r,s,o,l){var c=kf(n),d=kf(e),h=c?Bf:Ef(n),g=d?Bf:Ef(e);h=h==zf?ws:h,g=g==zf?ws:g;var m=h==ws,p=g==ws,v=h==g;if(v&&Lf(n)){if(!Lf(e))return!1;c=!0,m=!1}if(v&&!m)return l||(l=new Ao),c||gS(n)?fS(n,e,r,s,o,l):mS(n,e,h,r,s,o,l);if(!(r&_S)){var b=m&&Df.call(n,"__wrapped__"),_=p&&Df.call(e,"__wrapped__");if(b||_){var y=b?n.value():n,C=_?e.value():e;return l||(l=new Ao),o(y,C,r,s,l)}}return v?(l||(l=new Ao),pS(n,e,r,s,o,l)):!1}Pf.exports=vS});var Io=O((Uk,Of)=>{var wS=Rf(),Wf=Tn();function Nf(n,e,r,s,o){return n===e?!0:n==null||e==null||!Wf(n)&&!Wf(e)?n!==n&&e!==e:wS(n,e,r,s,Nf,o)}Of.exports=Nf});var Hf=O((Kk,qf)=>{var yS=uo(),xS=Io(),MS=1,CS=2;function TS(n,e,r,s){var o=r.length,l=o,c=!s;if(n==null)return!l;for(n=Object(n);o--;){var d=r[o];if(c&&d[2]?d[1]!==n[d[0]]:!(d[0]in n))return!1}for(;++o<l;){d=r[o];var h=d[0],g=n[h],m=d[1];if(c&&d[2]){if(g===void 0&&!(h in n))return!1}else{var p=new yS;if(s)var v=s(g,m,h,n,e,p);if(!(v===void 0?xS(m,g,MS|CS,s,p):v))return!1}}return!0}qf.exports=TS});var Eo=O(($k,Ff)=>{var SS=ms();function AS(n){return n===n&&!SS(n)}Ff.exports=AS});var Kf=O((Vk,Uf)=>{var IS=Eo(),ES=wo();function kS(n){for(var e=ES(n),r=e.length;r--;){var s=e[r],o=n[s];e[r]=[s,o,IS(o)]}return e}Uf.exports=kS});var ko=O((Gk,$f)=>{function LS(n,e){return function(r){return r==null?!1:r[n]===e&&(e!==void 0||n in Object(r))}}$f.exports=LS});var Gf=O((Yk,Vf)=>{var zS=Hf(),BS=Kf(),DS=ko();function PS(n){var e=BS(n);return e.length==1&&e[0][2]?DS(e[0][0],e[0][1]):function(r){return r===n||zS(r,n,e)}}Vf.exports=PS});var ys=O((Xk,Yf)=>{var RS=yn(),WS=Tn(),NS="[object Symbol]";function OS(n){return typeof n=="symbol"||WS(n)&&RS(n)==NS}Yf.exports=OS});var xs=O((Zk,Xf)=>{var qS=_i(),HS=ys(),FS=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,US=/^\w*$/;function KS(n,e){if(qS(n))return!1;var r=typeof n;return r=="number"||r=="symbol"||r=="boolean"||n==null||HS(n)?!0:US.test(n)||!FS.test(n)||e!=null&&n in Object(e)}Xf.exports=KS});var Jf=O((jk,jf)=>{var Zf=gs(),$S="Expected a function";function Lo(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError($S);var r=function(){var s=arguments,o=e?e.apply(this,s):s[0],l=r.cache;if(l.has(o))return l.get(o);var c=n.apply(this,s);return r.cache=l.set(o,c)||l,c};return r.cache=new(Lo.Cache||Zf),r}Lo.Cache=Zf;jf.exports=Lo});var em=O((Jk,Qf)=>{var VS=Jf(),GS=500;function YS(n){var e=VS(n,function(s){return r.size===GS&&r.clear(),s}),r=e.cache;return e}Qf.exports=YS});var im=O((Qk,tm)=>{var XS=em(),ZS=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,jS=/\\(\\)?/g,JS=XS(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(ZS,function(r,s,o,l){e.push(o?l.replace(jS,"$1"):s||r)}),e});tm.exports=JS});var rm=O((eL,nm)=>{function QS(n,e){for(var r=-1,s=n==null?0:n.length,o=Array(s);++r<s;)o[r]=e(n[r],r,n);return o}nm.exports=QS});var dm=O((tL,um)=>{var sm=nr(),eA=rm(),tA=_i(),iA=ys(),nA=1/0,am=sm?sm.prototype:void 0,om=am?am.toString:void 0;function lm(n){if(typeof n=="string")return n;if(tA(n))return eA(n,lm)+"";if(iA(n))return om?om.call(n):"";var e=n+"";return e=="0"&&1/n==-nA?"-0":e}um.exports=lm});var hm=O((iL,cm)=>{var rA=dm();function sA(n){return n==null?"":rA(n)}cm.exports=sA});var zo=O((nL,fm)=>{var aA=_i(),oA=xs(),lA=im(),uA=hm();function dA(n,e){return aA(n)?n:oA(n,e)?[n]:lA(uA(n))}fm.exports=dA});var dr=O((rL,mm)=>{var cA=ys(),hA=1/0;function fA(n){if(typeof n=="string"||cA(n))return n;var e=n+"";return e=="0"&&1/n==-hA?"-0":e}mm.exports=fA});var Bo=O((sL,pm)=>{var mA=zo(),pA=dr();function gA(n,e){e=mA(e,n);for(var r=0,s=e.length;n!=null&&r<s;)n=n[pA(e[r++])];return r&&r==s?n:void 0}pm.exports=gA});var _m=O((aL,gm)=>{var _A=Bo();function bA(n,e,r){var s=n==null?void 0:_A(n,e);return s===void 0?r:s}gm.exports=bA});var vm=O((oL,bm)=>{function vA(n,e){return n!=null&&e in Object(n)}bm.exports=vA});var ym=O((lL,wm)=>{var wA=zo(),yA=po(),xA=_i(),MA=_o(),CA=vs(),TA=dr();function SA(n,e,r){e=wA(e,n);for(var s=-1,o=e.length,l=!1;++s<o;){var c=TA(e[s]);if(!(l=n!=null&&r(n,c)))break;n=n[c]}return l||++s!=o?l:(o=n==null?0:n.length,!!o&&CA(o)&&MA(c,o)&&(xA(n)||yA(n)))}wm.exports=SA});var Mm=O((uL,xm)=>{var AA=vm(),IA=ym();function EA(n,e){return n!=null&&IA(n,e,AA)}xm.exports=EA});var Tm=O((dL,Cm)=>{var kA=Io(),LA=_m(),zA=Mm(),BA=xs(),DA=Eo(),PA=ko(),RA=dr(),WA=1,NA=2;function OA(n,e){return BA(n)&&DA(e)?PA(RA(n),e):function(r){var s=LA(r,n);return s===void 0&&s===e?zA(r,n):kA(e,s,WA|NA)}}Cm.exports=OA});var Am=O((cL,Sm)=>{function qA(n){return n}Sm.exports=qA});var Em=O((hL,Im)=>{function HA(n){return function(e){return e?.[n]}}Im.exports=HA});var Lm=O((fL,km)=>{var FA=Bo();function UA(n){return function(e){return FA(e,n)}}km.exports=UA});var Bm=O((mL,zm)=>{var KA=Em(),$A=Lm(),VA=xs(),GA=dr();function YA(n){return VA(n)?KA(GA(n)):$A(n)}zm.exports=YA});var Pm=O((pL,Dm)=>{var XA=Gf(),ZA=Tm(),jA=Am(),JA=_i(),QA=Bm();function eI(n){return typeof n=="function"?n:n==null?jA:typeof n=="object"?JA(n)?ZA(n[0],n[1]):XA(n):QA(n)}Dm.exports=eI});var Wm=O((gL,Rm)=>{function tI(n,e,r,s){for(var o=n.length,l=r+(s?1:-1);s?l--:++l<o;)if(e(n[l],l,n))return l;return-1}Rm.exports=tI});var Om=O((_L,Nm)=>{function iI(n){return n!==n}Nm.exports=iI});var Hm=O((bL,qm)=>{function nI(n,e,r){for(var s=r-1,o=n.length;++s<o;)if(n[s]===e)return s;return-1}qm.exports=nI});var Um=O((vL,Fm)=>{var rI=Wm(),sI=Om(),aI=Hm();function oI(n,e,r){return e===e?aI(n,e,r):rI(n,sI,r)}Fm.exports=oI});var $m=O((wL,Km)=>{var lI=Um();function uI(n,e){var r=n==null?0:n.length;return!!r&&lI(n,e,0)>-1}Km.exports=uI});var Gm=O((yL,Vm)=>{function dI(n,e,r){for(var s=-1,o=n==null?0:n.length;++s<o;)if(r(e,n[s]))return!0;return!1}Vm.exports=dI});var Xm=O((xL,Ym)=>{function cI(){}Ym.exports=cI});var jm=O((ML,Zm)=>{var Do=yo(),hI=Xm(),fI=bs(),mI=1/0,pI=Do&&1/fI(new Do([,-0]))[1]==mI?function(n){return new Do(n)}:hI;Zm.exports=pI});var Qm=O((CL,Jm)=>{var gI=co(),_I=$m(),bI=Gm(),vI=ho(),wI=jm(),yI=bs(),xI=200;function MI(n,e,r){var s=-1,o=_I,l=n.length,c=!0,d=[],h=d;if(r)c=!1,o=bI;else if(l>=xI){var g=e?null:wI(n);if(g)return yI(g);c=!1,o=vI,h=new gI}else h=e?[]:d;e:for(;++s<l;){var m=n[s],p=e?e(m):m;if(m=r||m!==0?m:0,c&&p===p){for(var v=h.length;v--;)if(h[v]===p)continue e;e&&h.push(p),d.push(m)}else o(h,p,r)||(h!==d&&h.push(p),d.push(m))}return d}Jm.exports=MI});var tp=O((TL,ep)=>{var CI=Pm(),TI=Qm();function SI(n,e){return n&&n.length?TI(n,CI(e,2)):[]}ep.exports=SI});var ip=O((En,cr)=>{(function(){var n,e="4.17.21",r=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",l="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",d=500,h="__lodash_placeholder__",g=1,m=2,p=4,v=1,b=2,_=1,y=2,C=4,E=8,I=16,M=32,S=64,k=128,B=256,H=512,F=30,J="...",D=800,$=16,G=1,Q=2,ue=3,_e=1/0,ce=9007199254740991,xe=17976931348623157e292,Ee=NaN,be=4294967295,ke=be-1,ze=be>>>1,He=[["ary",k],["bind",_],["bindKey",y],["curry",E],["curryRight",I],["flip",H],["partial",M],["partialRight",S],["rearg",B]],Re="[object Arguments]",nt="[object Array]",As="[object AsyncFunction]",Pt="[object Boolean]",ki="[object Date]",Is="[object DOMException]",Zi="[object Error]",ji="[object Function]",mr="[object GeneratorFunction]",pt="[object Map]",Y="[object Number]",ee="[object Null]",P="[object Object]",R="[object Promise]",N="[object Proxy]",te="[object RegExp]",ie="[object Set]",Me="[object String]",Ze="[object Symbol]",Li="[object Undefined]",kn="[object WeakMap]",fp="[object WeakSet]",Ln="[object ArrayBuffer]",Ji="[object DataView]",Es="[object Float32Array]",ks="[object Float64Array]",Ls="[object Int8Array]",zs="[object Int16Array]",Bs="[object Int32Array]",Ds="[object Uint8Array]",Ps="[object Uint8ClampedArray]",Rs="[object Uint16Array]",Ws="[object Uint32Array]",mp=/\b__p \+= '';/g,pp=/\b(__p \+=) '' \+/g,gp=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Oo=/&(?:amp|lt|gt|quot|#39);/g,qo=/[&<>"']/g,_p=RegExp(Oo.source),bp=RegExp(qo.source),vp=/<%-([\s\S]+?)%>/g,wp=/<%([\s\S]+?)%>/g,Ho=/<%=([\s\S]+?)%>/g,yp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,xp=/^\w*$/,Mp=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ns=/[\\^$.*+?()[\]{}|]/g,Cp=RegExp(Ns.source),Os=/^\s+/,Tp=/\s/,Sp=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ap=/\{\n\/\* \[wrapped with (.+)\] \*/,Ip=/,? & /,Ep=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,kp=/[()=,{}\[\]\/\s]/,Lp=/\\(\\)?/g,zp=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Fo=/\w*$/,Bp=/^[-+]0x[0-9a-f]+$/i,Dp=/^0b[01]+$/i,Pp=/^\[object .+?Constructor\]$/,Rp=/^0o[0-7]+$/i,Wp=/^(?:0|[1-9]\d*)$/,Np=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,pr=/($^)/,Op=/['\n\r\u2028\u2029\\]/g,gr="\\ud800-\\udfff",qp="\\u0300-\\u036f",Hp="\\ufe20-\\ufe2f",Fp="\\u20d0-\\u20ff",Uo=qp+Hp+Fp,Ko="\\u2700-\\u27bf",$o="a-z\\xdf-\\xf6\\xf8-\\xff",Up="\\xac\\xb1\\xd7\\xf7",Kp="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",$p="\\u2000-\\u206f",Vp=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Vo="A-Z\\xc0-\\xd6\\xd8-\\xde",Go="\\ufe0e\\ufe0f",Yo=Up+Kp+$p+Vp,qs="['\u2019]",Gp="["+gr+"]",Xo="["+Yo+"]",_r="["+Uo+"]",Zo="\\d+",Yp="["+Ko+"]",jo="["+$o+"]",Jo="[^"+gr+Yo+Zo+Ko+$o+Vo+"]",Hs="\\ud83c[\\udffb-\\udfff]",Xp="(?:"+_r+"|"+Hs+")",Qo="[^"+gr+"]",Fs="(?:\\ud83c[\\udde6-\\uddff]){2}",Us="[\\ud800-\\udbff][\\udc00-\\udfff]",Qi="["+Vo+"]",el="\\u200d",tl="(?:"+jo+"|"+Jo+")",Zp="(?:"+Qi+"|"+Jo+")",il="(?:"+qs+"(?:d|ll|m|re|s|t|ve))?",nl="(?:"+qs+"(?:D|LL|M|RE|S|T|VE))?",rl=Xp+"?",sl="["+Go+"]?",jp="(?:"+el+"(?:"+[Qo,Fs,Us].join("|")+")"+sl+rl+")*",Jp="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Qp="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",al=sl+rl+jp,eg="(?:"+[Yp,Fs,Us].join("|")+")"+al,tg="(?:"+[Qo+_r+"?",_r,Fs,Us,Gp].join("|")+")",ig=RegExp(qs,"g"),ng=RegExp(_r,"g"),Ks=RegExp(Hs+"(?="+Hs+")|"+tg+al,"g"),rg=RegExp([Qi+"?"+jo+"+"+il+"(?="+[Xo,Qi,"$"].join("|")+")",Zp+"+"+nl+"(?="+[Xo,Qi+tl,"$"].join("|")+")",Qi+"?"+tl+"+"+il,Qi+"+"+nl,Qp,Jp,Zo,eg].join("|"),"g"),sg=RegExp("["+el+gr+Uo+Go+"]"),ag=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,og=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],lg=-1,De={};De[Es]=De[ks]=De[Ls]=De[zs]=De[Bs]=De[Ds]=De[Ps]=De[Rs]=De[Ws]=!0,De[Re]=De[nt]=De[Ln]=De[Pt]=De[Ji]=De[ki]=De[Zi]=De[ji]=De[pt]=De[Y]=De[P]=De[te]=De[ie]=De[Me]=De[kn]=!1;var Be={};Be[Re]=Be[nt]=Be[Ln]=Be[Ji]=Be[Pt]=Be[ki]=Be[Es]=Be[ks]=Be[Ls]=Be[zs]=Be[Bs]=Be[pt]=Be[Y]=Be[P]=Be[te]=Be[ie]=Be[Me]=Be[Ze]=Be[Ds]=Be[Ps]=Be[Rs]=Be[Ws]=!0,Be[Zi]=Be[ji]=Be[kn]=!1;var ug={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},dg={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},cg={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},hg={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},fg=parseFloat,mg=parseInt,ol=typeof window=="object"&&window&&window.Object===Object&&window,pg=typeof self=="object"&&self&&self.Object===Object&&self,Ye=ol||pg||Function("return this")(),$s=typeof En=="object"&&En&&!En.nodeType&&En,zi=$s&&typeof cr=="object"&&cr&&!cr.nodeType&&cr,ll=zi&&zi.exports===$s,Vs=ll&&ol.process,Tt=function(){try{var L=zi&&zi.require&&zi.require("util").types;return L||Vs&&Vs.binding&&Vs.binding("util")}catch{}}(),ul=Tt&&Tt.isArrayBuffer,dl=Tt&&Tt.isDate,cl=Tt&&Tt.isMap,hl=Tt&&Tt.isRegExp,fl=Tt&&Tt.isSet,ml=Tt&&Tt.isTypedArray;function gt(L,q,W){switch(W.length){case 0:return L.call(q);case 1:return L.call(q,W[0]);case 2:return L.call(q,W[0],W[1]);case 3:return L.call(q,W[0],W[1],W[2])}return L.apply(q,W)}function gg(L,q,W,re){for(var de=-1,Te=L==null?0:L.length;++de<Te;){var $e=L[de];q(re,$e,W($e),L)}return re}function St(L,q){for(var W=-1,re=L==null?0:L.length;++W<re&&q(L[W],W,L)!==!1;);return L}function _g(L,q){for(var W=L==null?0:L.length;W--&&q(L[W],W,L)!==!1;);return L}function pl(L,q){for(var W=-1,re=L==null?0:L.length;++W<re;)if(!q(L[W],W,L))return!1;return!0}function bi(L,q){for(var W=-1,re=L==null?0:L.length,de=0,Te=[];++W<re;){var $e=L[W];q($e,W,L)&&(Te[de++]=$e)}return Te}function br(L,q){var W=L==null?0:L.length;return!!W&&en(L,q,0)>-1}function Gs(L,q,W){for(var re=-1,de=L==null?0:L.length;++re<de;)if(W(q,L[re]))return!0;return!1}function We(L,q){for(var W=-1,re=L==null?0:L.length,de=Array(re);++W<re;)de[W]=q(L[W],W,L);return de}function vi(L,q){for(var W=-1,re=q.length,de=L.length;++W<re;)L[de+W]=q[W];return L}function Ys(L,q,W,re){var de=-1,Te=L==null?0:L.length;for(re&&Te&&(W=L[++de]);++de<Te;)W=q(W,L[de],de,L);return W}function bg(L,q,W,re){var de=L==null?0:L.length;for(re&&de&&(W=L[--de]);de--;)W=q(W,L[de],de,L);return W}function Xs(L,q){for(var W=-1,re=L==null?0:L.length;++W<re;)if(q(L[W],W,L))return!0;return!1}var vg=Zs("length");function wg(L){return L.split("")}function yg(L){return L.match(Ep)||[]}function gl(L,q,W){var re;return W(L,function(de,Te,$e){if(q(de,Te,$e))return re=Te,!1}),re}function vr(L,q,W,re){for(var de=L.length,Te=W+(re?1:-1);re?Te--:++Te<de;)if(q(L[Te],Te,L))return Te;return-1}function en(L,q,W){return q===q?Bg(L,q,W):vr(L,_l,W)}function xg(L,q,W,re){for(var de=W-1,Te=L.length;++de<Te;)if(re(L[de],q))return de;return-1}function _l(L){return L!==L}function bl(L,q){var W=L==null?0:L.length;return W?Js(L,q)/W:Ee}function Zs(L){return function(q){return q==null?n:q[L]}}function js(L){return function(q){return L==null?n:L[q]}}function vl(L,q,W,re,de){return de(L,function(Te,$e,Le){W=re?(re=!1,Te):q(W,Te,$e,Le)}),W}function Mg(L,q){var W=L.length;for(L.sort(q);W--;)L[W]=L[W].value;return L}function Js(L,q){for(var W,re=-1,de=L.length;++re<de;){var Te=q(L[re]);Te!==n&&(W=W===n?Te:W+Te)}return W}function Qs(L,q){for(var W=-1,re=Array(L);++W<L;)re[W]=q(W);return re}function Cg(L,q){return We(q,function(W){return[W,L[W]]})}function wl(L){return L&&L.slice(0,Cl(L)+1).replace(Os,"")}function _t(L){return function(q){return L(q)}}function ea(L,q){return We(q,function(W){return L[W]})}function zn(L,q){return L.has(q)}function yl(L,q){for(var W=-1,re=L.length;++W<re&&en(q,L[W],0)>-1;);return W}function xl(L,q){for(var W=L.length;W--&&en(q,L[W],0)>-1;);return W}function Tg(L,q){for(var W=L.length,re=0;W--;)L[W]===q&&++re;return re}var Sg=js(ug),Ag=js(dg);function Ig(L){return"\\"+hg[L]}function Eg(L,q){return L==null?n:L[q]}function tn(L){return sg.test(L)}function kg(L){return ag.test(L)}function Lg(L){for(var q,W=[];!(q=L.next()).done;)W.push(q.value);return W}function ta(L){var q=-1,W=Array(L.size);return L.forEach(function(re,de){W[++q]=[de,re]}),W}function Ml(L,q){return function(W){return L(q(W))}}function wi(L,q){for(var W=-1,re=L.length,de=0,Te=[];++W<re;){var $e=L[W];($e===q||$e===h)&&(L[W]=h,Te[de++]=W)}return Te}function wr(L){var q=-1,W=Array(L.size);return L.forEach(function(re){W[++q]=re}),W}function zg(L){var q=-1,W=Array(L.size);return L.forEach(function(re){W[++q]=[re,re]}),W}function Bg(L,q,W){for(var re=W-1,de=L.length;++re<de;)if(L[re]===q)return re;return-1}function Dg(L,q,W){for(var re=W+1;re--;)if(L[re]===q)return re;return re}function nn(L){return tn(L)?Rg(L):vg(L)}function Rt(L){return tn(L)?Wg(L):wg(L)}function Cl(L){for(var q=L.length;q--&&Tp.test(L.charAt(q)););return q}var Pg=js(cg);function Rg(L){for(var q=Ks.lastIndex=0;Ks.test(L);)++q;return q}function Wg(L){return L.match(Ks)||[]}function Ng(L){return L.match(rg)||[]}var Og=function L(q){q=q==null?Ye:yi.defaults(Ye.Object(),q,yi.pick(Ye,og));var W=q.Array,re=q.Date,de=q.Error,Te=q.Function,$e=q.Math,Le=q.Object,ia=q.RegExp,qg=q.String,At=q.TypeError,yr=W.prototype,Hg=Te.prototype,rn=Le.prototype,xr=q["__core-js_shared__"],Mr=Hg.toString,Ae=rn.hasOwnProperty,Fg=0,Tl=function(){var t=/[^.]+$/.exec(xr&&xr.keys&&xr.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Cr=rn.toString,Ug=Mr.call(Le),Kg=Ye._,$g=ia("^"+Mr.call(Ae).replace(Ns,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Tr=ll?q.Buffer:n,xi=q.Symbol,Sr=q.Uint8Array,Sl=Tr?Tr.allocUnsafe:n,Ar=Ml(Le.getPrototypeOf,Le),Al=Le.create,Il=rn.propertyIsEnumerable,Ir=yr.splice,El=xi?xi.isConcatSpreadable:n,Bn=xi?xi.iterator:n,Bi=xi?xi.toStringTag:n,Er=function(){try{var t=Ni(Le,"defineProperty");return t({},"",{}),t}catch{}}(),Vg=q.clearTimeout!==Ye.clearTimeout&&q.clearTimeout,Gg=re&&re.now!==Ye.Date.now&&re.now,Yg=q.setTimeout!==Ye.setTimeout&&q.setTimeout,kr=$e.ceil,Lr=$e.floor,na=Le.getOwnPropertySymbols,Xg=Tr?Tr.isBuffer:n,kl=q.isFinite,Zg=yr.join,jg=Ml(Le.keys,Le),Ve=$e.max,Qe=$e.min,Jg=re.now,Qg=q.parseInt,Ll=$e.random,e_=yr.reverse,ra=Ni(q,"DataView"),Dn=Ni(q,"Map"),sa=Ni(q,"Promise"),sn=Ni(q,"Set"),Pn=Ni(q,"WeakMap"),Rn=Ni(Le,"create"),zr=Pn&&new Pn,an={},t_=Oi(ra),i_=Oi(Dn),n_=Oi(sa),r_=Oi(sn),s_=Oi(Pn),Br=xi?xi.prototype:n,Wn=Br?Br.valueOf:n,zl=Br?Br.toString:n;function w(t){if(Oe(t)&&!he(t)&&!(t instanceof we)){if(t instanceof It)return t;if(Ae.call(t,"__wrapped__"))return Bu(t)}return new It(t)}var on=function(){function t(){}return function(i){if(!Ne(i))return{};if(Al)return Al(i);t.prototype=i;var a=new t;return t.prototype=n,a}}();function Dr(){}function It(t,i){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=n}w.templateSettings={escape:vp,evaluate:wp,interpolate:Ho,variable:"",imports:{_:w}},w.prototype=Dr.prototype,w.prototype.constructor=w,It.prototype=on(Dr.prototype),It.prototype.constructor=It;function we(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=be,this.__views__=[]}function a_(){var t=new we(this.__wrapped__);return t.__actions__=ct(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=ct(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=ct(this.__views__),t}function o_(){if(this.__filtered__){var t=new we(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function l_(){var t=this.__wrapped__.value(),i=this.__dir__,a=he(t),u=i<0,f=a?t.length:0,x=wb(0,f,this.__views__),T=x.start,A=x.end,z=A-T,U=u?A:T-1,K=this.__iteratees__,V=K.length,ne=0,se=Qe(z,this.__takeCount__);if(!a||!u&&f==z&&se==z)return iu(t,this.__actions__);var oe=[];e:for(;z--&&ne<se;){U+=i;for(var pe=-1,le=t[U];++pe<V;){var ve=K[pe],ye=ve.iteratee,wt=ve.type,at=ye(le);if(wt==Q)le=at;else if(!at){if(wt==G)continue e;break e}}oe[ne++]=le}return oe}we.prototype=on(Dr.prototype),we.prototype.constructor=we;function Di(t){var i=-1,a=t==null?0:t.length;for(this.clear();++i<a;){var u=t[i];this.set(u[0],u[1])}}function u_(){this.__data__=Rn?Rn(null):{},this.size=0}function d_(t){var i=this.has(t)&&delete this.__data__[t];return this.size-=i?1:0,i}function c_(t){var i=this.__data__;if(Rn){var a=i[t];return a===c?n:a}return Ae.call(i,t)?i[t]:n}function h_(t){var i=this.__data__;return Rn?i[t]!==n:Ae.call(i,t)}function f_(t,i){var a=this.__data__;return this.size+=this.has(t)?0:1,a[t]=Rn&&i===n?c:i,this}Di.prototype.clear=u_,Di.prototype.delete=d_,Di.prototype.get=c_,Di.prototype.has=h_,Di.prototype.set=f_;function ei(t){var i=-1,a=t==null?0:t.length;for(this.clear();++i<a;){var u=t[i];this.set(u[0],u[1])}}function m_(){this.__data__=[],this.size=0}function p_(t){var i=this.__data__,a=Pr(i,t);if(a<0)return!1;var u=i.length-1;return a==u?i.pop():Ir.call(i,a,1),--this.size,!0}function g_(t){var i=this.__data__,a=Pr(i,t);return a<0?n:i[a][1]}function __(t){return Pr(this.__data__,t)>-1}function b_(t,i){var a=this.__data__,u=Pr(a,t);return u<0?(++this.size,a.push([t,i])):a[u][1]=i,this}ei.prototype.clear=m_,ei.prototype.delete=p_,ei.prototype.get=g_,ei.prototype.has=__,ei.prototype.set=b_;function ti(t){var i=-1,a=t==null?0:t.length;for(this.clear();++i<a;){var u=t[i];this.set(u[0],u[1])}}function v_(){this.size=0,this.__data__={hash:new Di,map:new(Dn||ei),string:new Di}}function w_(t){var i=Gr(this,t).delete(t);return this.size-=i?1:0,i}function y_(t){return Gr(this,t).get(t)}function x_(t){return Gr(this,t).has(t)}function M_(t,i){var a=Gr(this,t),u=a.size;return a.set(t,i),this.size+=a.size==u?0:1,this}ti.prototype.clear=v_,ti.prototype.delete=w_,ti.prototype.get=y_,ti.prototype.has=x_,ti.prototype.set=M_;function Pi(t){var i=-1,a=t==null?0:t.length;for(this.__data__=new ti;++i<a;)this.add(t[i])}function C_(t){return this.__data__.set(t,c),this}function T_(t){return this.__data__.has(t)}Pi.prototype.add=Pi.prototype.push=C_,Pi.prototype.has=T_;function Wt(t){var i=this.__data__=new ei(t);this.size=i.size}function S_(){this.__data__=new ei,this.size=0}function A_(t){var i=this.__data__,a=i.delete(t);return this.size=i.size,a}function I_(t){return this.__data__.get(t)}function E_(t){return this.__data__.has(t)}function k_(t,i){var a=this.__data__;if(a instanceof ei){var u=a.__data__;if(!Dn||u.length<r-1)return u.push([t,i]),this.size=++a.size,this;a=this.__data__=new ti(u)}return a.set(t,i),this.size=a.size,this}Wt.prototype.clear=S_,Wt.prototype.delete=A_,Wt.prototype.get=I_,Wt.prototype.has=E_,Wt.prototype.set=k_;function Bl(t,i){var a=he(t),u=!a&&qi(t),f=!a&&!u&&Ai(t),x=!a&&!u&&!f&&cn(t),T=a||u||f||x,A=T?Qs(t.length,qg):[],z=A.length;for(var U in t)(i||Ae.call(t,U))&&!(T&&(U=="length"||f&&(U=="offset"||U=="parent")||x&&(U=="buffer"||U=="byteLength"||U=="byteOffset")||si(U,z)))&&A.push(U);return A}function Dl(t){var i=t.length;return i?t[ga(0,i-1)]:n}function L_(t,i){return Yr(ct(t),Ri(i,0,t.length))}function z_(t){return Yr(ct(t))}function aa(t,i,a){(a!==n&&!Nt(t[i],a)||a===n&&!(i in t))&&ii(t,i,a)}function Nn(t,i,a){var u=t[i];(!(Ae.call(t,i)&&Nt(u,a))||a===n&&!(i in t))&&ii(t,i,a)}function Pr(t,i){for(var a=t.length;a--;)if(Nt(t[a][0],i))return a;return-1}function B_(t,i,a,u){return Mi(t,function(f,x,T){i(u,f,a(f),T)}),u}function Pl(t,i){return t&&Vt(i,Xe(i),t)}function D_(t,i){return t&&Vt(i,ft(i),t)}function ii(t,i,a){i=="__proto__"&&Er?Er(t,i,{configurable:!0,enumerable:!0,value:a,writable:!0}):t[i]=a}function oa(t,i){for(var a=-1,u=i.length,f=W(u),x=t==null;++a<u;)f[a]=x?n:Ha(t,i[a]);return f}function Ri(t,i,a){return t===t&&(a!==n&&(t=t<=a?t:a),i!==n&&(t=t>=i?t:i)),t}function Et(t,i,a,u,f,x){var T,A=i&g,z=i&m,U=i&p;if(a&&(T=f?a(t,u,f,x):a(t)),T!==n)return T;if(!Ne(t))return t;var K=he(t);if(K){if(T=xb(t),!A)return ct(t,T)}else{var V=et(t),ne=V==ji||V==mr;if(Ai(t))return su(t,A);if(V==P||V==Re||ne&&!f){if(T=z||ne?{}:Cu(t),!A)return z?cb(t,D_(T,t)):db(t,Pl(T,t))}else{if(!Be[V])return f?t:{};T=Mb(t,V,A)}}x||(x=new Wt);var se=x.get(t);if(se)return se;x.set(t,T),Qu(t)?t.forEach(function(le){T.add(Et(le,i,a,le,t,x))}):ju(t)&&t.forEach(function(le,ve){T.set(ve,Et(le,i,a,ve,t,x))});var oe=U?z?Aa:Sa:z?ft:Xe,pe=K?n:oe(t);return St(pe||t,function(le,ve){pe&&(ve=le,le=t[ve]),Nn(T,ve,Et(le,i,a,ve,t,x))}),T}function P_(t){var i=Xe(t);return function(a){return Rl(a,t,i)}}function Rl(t,i,a){var u=a.length;if(t==null)return!u;for(t=Le(t);u--;){var f=a[u],x=i[f],T=t[f];if(T===n&&!(f in t)||!x(T))return!1}return!0}function Wl(t,i,a){if(typeof t!="function")throw new At(o);return $n(function(){t.apply(n,a)},i)}function On(t,i,a,u){var f=-1,x=br,T=!0,A=t.length,z=[],U=i.length;if(!A)return z;a&&(i=We(i,_t(a))),u?(x=Gs,T=!1):i.length>=r&&(x=zn,T=!1,i=new Pi(i));e:for(;++f<A;){var K=t[f],V=a==null?K:a(K);if(K=u||K!==0?K:0,T&&V===V){for(var ne=U;ne--;)if(i[ne]===V)continue e;z.push(K)}else x(i,V,u)||z.push(K)}return z}var Mi=du($t),Nl=du(ua,!0);function R_(t,i){var a=!0;return Mi(t,function(u,f,x){return a=!!i(u,f,x),a}),a}function Rr(t,i,a){for(var u=-1,f=t.length;++u<f;){var x=t[u],T=i(x);if(T!=null&&(A===n?T===T&&!vt(T):a(T,A)))var A=T,z=x}return z}function W_(t,i,a,u){var f=t.length;for(a=me(a),a<0&&(a=-a>f?0:f+a),u=u===n||u>f?f:me(u),u<0&&(u+=f),u=a>u?0:td(u);a<u;)t[a++]=i;return t}function Ol(t,i){var a=[];return Mi(t,function(u,f,x){i(u,f,x)&&a.push(u)}),a}function je(t,i,a,u,f){var x=-1,T=t.length;for(a||(a=Tb),f||(f=[]);++x<T;){var A=t[x];i>0&&a(A)?i>1?je(A,i-1,a,u,f):vi(f,A):u||(f[f.length]=A)}return f}var la=cu(),ql=cu(!0);function $t(t,i){return t&&la(t,i,Xe)}function ua(t,i){return t&&ql(t,i,Xe)}function Wr(t,i){return bi(i,function(a){return ai(t[a])})}function Wi(t,i){i=Ti(i,t);for(var a=0,u=i.length;t!=null&&a<u;)t=t[Gt(i[a++])];return a&&a==u?t:n}function Hl(t,i,a){var u=i(t);return he(t)?u:vi(u,a(t))}function rt(t){return t==null?t===n?Li:ee:Bi&&Bi in Le(t)?vb(t):zb(t)}function da(t,i){return t>i}function N_(t,i){return t!=null&&Ae.call(t,i)}function O_(t,i){return t!=null&&i in Le(t)}function q_(t,i,a){return t>=Qe(i,a)&&t<Ve(i,a)}function ca(t,i,a){for(var u=a?Gs:br,f=t[0].length,x=t.length,T=x,A=W(x),z=1/0,U=[];T--;){var K=t[T];T&&i&&(K=We(K,_t(i))),z=Qe(K.length,z),A[T]=!a&&(i||f>=120&&K.length>=120)?new Pi(T&&K):n}K=t[0];var V=-1,ne=A[0];e:for(;++V<f&&U.length<z;){var se=K[V],oe=i?i(se):se;if(se=a||se!==0?se:0,!(ne?zn(ne,oe):u(U,oe,a))){for(T=x;--T;){var pe=A[T];if(!(pe?zn(pe,oe):u(t[T],oe,a)))continue e}ne&&ne.push(oe),U.push(se)}}return U}function H_(t,i,a,u){return $t(t,function(f,x,T){i(u,a(f),x,T)}),u}function qn(t,i,a){i=Ti(i,t),t=Iu(t,i);var u=t==null?t:t[Gt(Lt(i))];return u==null?n:gt(u,t,a)}function Fl(t){return Oe(t)&&rt(t)==Re}function F_(t){return Oe(t)&&rt(t)==Ln}function U_(t){return Oe(t)&&rt(t)==ki}function Hn(t,i,a,u,f){return t===i?!0:t==null||i==null||!Oe(t)&&!Oe(i)?t!==t&&i!==i:K_(t,i,a,u,Hn,f)}function K_(t,i,a,u,f,x){var T=he(t),A=he(i),z=T?nt:et(t),U=A?nt:et(i);z=z==Re?P:z,U=U==Re?P:U;var K=z==P,V=U==P,ne=z==U;if(ne&&Ai(t)){if(!Ai(i))return!1;T=!0,K=!1}if(ne&&!K)return x||(x=new Wt),T||cn(t)?yu(t,i,a,u,f,x):_b(t,i,z,a,u,f,x);if(!(a&v)){var se=K&&Ae.call(t,"__wrapped__"),oe=V&&Ae.call(i,"__wrapped__");if(se||oe){var pe=se?t.value():t,le=oe?i.value():i;return x||(x=new Wt),f(pe,le,a,u,x)}}return ne?(x||(x=new Wt),bb(t,i,a,u,f,x)):!1}function $_(t){return Oe(t)&&et(t)==pt}function ha(t,i,a,u){var f=a.length,x=f,T=!u;if(t==null)return!x;for(t=Le(t);f--;){var A=a[f];if(T&&A[2]?A[1]!==t[A[0]]:!(A[0]in t))return!1}for(;++f<x;){A=a[f];var z=A[0],U=t[z],K=A[1];if(T&&A[2]){if(U===n&&!(z in t))return!1}else{var V=new Wt;if(u)var ne=u(U,K,z,t,i,V);if(!(ne===n?Hn(K,U,v|b,u,V):ne))return!1}}return!0}function Ul(t){if(!Ne(t)||Ab(t))return!1;var i=ai(t)?$g:Pp;return i.test(Oi(t))}function V_(t){return Oe(t)&&rt(t)==te}function G_(t){return Oe(t)&&et(t)==ie}function Y_(t){return Oe(t)&&es(t.length)&&!!De[rt(t)]}function Kl(t){return typeof t=="function"?t:t==null?mt:typeof t=="object"?he(t)?Gl(t[0],t[1]):Vl(t):hd(t)}function fa(t){if(!Kn(t))return jg(t);var i=[];for(var a in Le(t))Ae.call(t,a)&&a!="constructor"&&i.push(a);return i}function X_(t){if(!Ne(t))return Lb(t);var i=Kn(t),a=[];for(var u in t)u=="constructor"&&(i||!Ae.call(t,u))||a.push(u);return a}function ma(t,i){return t<i}function $l(t,i){var a=-1,u=ht(t)?W(t.length):[];return Mi(t,function(f,x,T){u[++a]=i(f,x,T)}),u}function Vl(t){var i=Ea(t);return i.length==1&&i[0][2]?Su(i[0][0],i[0][1]):function(a){return a===t||ha(a,t,i)}}function Gl(t,i){return La(t)&&Tu(i)?Su(Gt(t),i):function(a){var u=Ha(a,t);return u===n&&u===i?Fa(a,t):Hn(i,u,v|b)}}function Nr(t,i,a,u,f){t!==i&&la(i,function(x,T){if(f||(f=new Wt),Ne(x))Z_(t,i,T,a,Nr,u,f);else{var A=u?u(Ba(t,T),x,T+"",t,i,f):n;A===n&&(A=x),aa(t,T,A)}},ft)}function Z_(t,i,a,u,f,x,T){var A=Ba(t,a),z=Ba(i,a),U=T.get(z);if(U){aa(t,a,U);return}var K=x?x(A,z,a+"",t,i,T):n,V=K===n;if(V){var ne=he(z),se=!ne&&Ai(z),oe=!ne&&!se&&cn(z);K=z,ne||se||oe?he(A)?K=A:Fe(A)?K=ct(A):se?(V=!1,K=su(z,!0)):oe?(V=!1,K=au(z,!0)):K=[]:Vn(z)||qi(z)?(K=A,qi(A)?K=id(A):(!Ne(A)||ai(A))&&(K=Cu(z))):V=!1}V&&(T.set(z,K),f(K,z,u,x,T),T.delete(z)),aa(t,a,K)}function Yl(t,i){var a=t.length;if(a)return i+=i<0?a:0,si(i,a)?t[i]:n}function Xl(t,i,a){i.length?i=We(i,function(x){return he(x)?function(T){return Wi(T,x.length===1?x[0]:x)}:x}):i=[mt];var u=-1;i=We(i,_t(ae()));var f=$l(t,function(x,T,A){var z=We(i,function(U){return U(x)});return{criteria:z,index:++u,value:x}});return Mg(f,function(x,T){return ub(x,T,a)})}function j_(t,i){return Zl(t,i,function(a,u){return Fa(t,u)})}function Zl(t,i,a){for(var u=-1,f=i.length,x={};++u<f;){var T=i[u],A=Wi(t,T);a(A,T)&&Fn(x,Ti(T,t),A)}return x}function J_(t){return function(i){return Wi(i,t)}}function pa(t,i,a,u){var f=u?xg:en,x=-1,T=i.length,A=t;for(t===i&&(i=ct(i)),a&&(A=We(t,_t(a)));++x<T;)for(var z=0,U=i[x],K=a?a(U):U;(z=f(A,K,z,u))>-1;)A!==t&&Ir.call(A,z,1),Ir.call(t,z,1);return t}function jl(t,i){for(var a=t?i.length:0,u=a-1;a--;){var f=i[a];if(a==u||f!==x){var x=f;si(f)?Ir.call(t,f,1):va(t,f)}}return t}function ga(t,i){return t+Lr(Ll()*(i-t+1))}function Q_(t,i,a,u){for(var f=-1,x=Ve(kr((i-t)/(a||1)),0),T=W(x);x--;)T[u?x:++f]=t,t+=a;return T}function _a(t,i){var a="";if(!t||i<1||i>ce)return a;do i%2&&(a+=t),i=Lr(i/2),i&&(t+=t);while(i);return a}function ge(t,i){return Da(Au(t,i,mt),t+"")}function eb(t){return Dl(hn(t))}function tb(t,i){var a=hn(t);return Yr(a,Ri(i,0,a.length))}function Fn(t,i,a,u){if(!Ne(t))return t;i=Ti(i,t);for(var f=-1,x=i.length,T=x-1,A=t;A!=null&&++f<x;){var z=Gt(i[f]),U=a;if(z==="__proto__"||z==="constructor"||z==="prototype")return t;if(f!=T){var K=A[z];U=u?u(K,z,A):n,U===n&&(U=Ne(K)?K:si(i[f+1])?[]:{})}Nn(A,z,U),A=A[z]}return t}var Jl=zr?function(t,i){return zr.set(t,i),t}:mt,ib=Er?function(t,i){return Er(t,"toString",{configurable:!0,enumerable:!1,value:Ka(i),writable:!0})}:mt;function nb(t){return Yr(hn(t))}function kt(t,i,a){var u=-1,f=t.length;i<0&&(i=-i>f?0:f+i),a=a>f?f:a,a<0&&(a+=f),f=i>a?0:a-i>>>0,i>>>=0;for(var x=W(f);++u<f;)x[u]=t[u+i];return x}function rb(t,i){var a;return Mi(t,function(u,f,x){return a=i(u,f,x),!a}),!!a}function Or(t,i,a){var u=0,f=t==null?u:t.length;if(typeof i=="number"&&i===i&&f<=ze){for(;u<f;){var x=u+f>>>1,T=t[x];T!==null&&!vt(T)&&(a?T<=i:T<i)?u=x+1:f=x}return f}return ba(t,i,mt,a)}function ba(t,i,a,u){var f=0,x=t==null?0:t.length;if(x===0)return 0;i=a(i);for(var T=i!==i,A=i===null,z=vt(i),U=i===n;f<x;){var K=Lr((f+x)/2),V=a(t[K]),ne=V!==n,se=V===null,oe=V===V,pe=vt(V);if(T)var le=u||oe;else U?le=oe&&(u||ne):A?le=oe&&ne&&(u||!se):z?le=oe&&ne&&!se&&(u||!pe):se||pe?le=!1:le=u?V<=i:V<i;le?f=K+1:x=K}return Qe(x,ke)}function Ql(t,i){for(var a=-1,u=t.length,f=0,x=[];++a<u;){var T=t[a],A=i?i(T):T;if(!a||!Nt(A,z)){var z=A;x[f++]=T===0?0:T}}return x}function eu(t){return typeof t=="number"?t:vt(t)?Ee:+t}function bt(t){if(typeof t=="string")return t;if(he(t))return We(t,bt)+"";if(vt(t))return zl?zl.call(t):"";var i=t+"";return i=="0"&&1/t==-_e?"-0":i}function Ci(t,i,a){var u=-1,f=br,x=t.length,T=!0,A=[],z=A;if(a)T=!1,f=Gs;else if(x>=r){var U=i?null:pb(t);if(U)return wr(U);T=!1,f=zn,z=new Pi}else z=i?[]:A;e:for(;++u<x;){var K=t[u],V=i?i(K):K;if(K=a||K!==0?K:0,T&&V===V){for(var ne=z.length;ne--;)if(z[ne]===V)continue e;i&&z.push(V),A.push(K)}else f(z,V,a)||(z!==A&&z.push(V),A.push(K))}return A}function va(t,i){return i=Ti(i,t),t=Iu(t,i),t==null||delete t[Gt(Lt(i))]}function tu(t,i,a,u){return Fn(t,i,a(Wi(t,i)),u)}function qr(t,i,a,u){for(var f=t.length,x=u?f:-1;(u?x--:++x<f)&&i(t[x],x,t););return a?kt(t,u?0:x,u?x+1:f):kt(t,u?x+1:0,u?f:x)}function iu(t,i){var a=t;return a instanceof we&&(a=a.value()),Ys(i,function(u,f){return f.func.apply(f.thisArg,vi([u],f.args))},a)}function wa(t,i,a){var u=t.length;if(u<2)return u?Ci(t[0]):[];for(var f=-1,x=W(u);++f<u;)for(var T=t[f],A=-1;++A<u;)A!=f&&(x[f]=On(x[f]||T,t[A],i,a));return Ci(je(x,1),i,a)}function nu(t,i,a){for(var u=-1,f=t.length,x=i.length,T={};++u<f;){var A=u<x?i[u]:n;a(T,t[u],A)}return T}function ya(t){return Fe(t)?t:[]}function xa(t){return typeof t=="function"?t:mt}function Ti(t,i){return he(t)?t:La(t,i)?[t]:zu(Se(t))}var sb=ge;function Si(t,i,a){var u=t.length;return a=a===n?u:a,!i&&a>=u?t:kt(t,i,a)}var ru=Vg||function(t){return Ye.clearTimeout(t)};function su(t,i){if(i)return t.slice();var a=t.length,u=Sl?Sl(a):new t.constructor(a);return t.copy(u),u}function Ma(t){var i=new t.constructor(t.byteLength);return new Sr(i).set(new Sr(t)),i}function ab(t,i){var a=i?Ma(t.buffer):t.buffer;return new t.constructor(a,t.byteOffset,t.byteLength)}function ob(t){var i=new t.constructor(t.source,Fo.exec(t));return i.lastIndex=t.lastIndex,i}function lb(t){return Wn?Le(Wn.call(t)):{}}function au(t,i){var a=i?Ma(t.buffer):t.buffer;return new t.constructor(a,t.byteOffset,t.length)}function ou(t,i){if(t!==i){var a=t!==n,u=t===null,f=t===t,x=vt(t),T=i!==n,A=i===null,z=i===i,U=vt(i);if(!A&&!U&&!x&&t>i||x&&T&&z&&!A&&!U||u&&T&&z||!a&&z||!f)return 1;if(!u&&!x&&!U&&t<i||U&&a&&f&&!u&&!x||A&&a&&f||!T&&f||!z)return-1}return 0}function ub(t,i,a){for(var u=-1,f=t.criteria,x=i.criteria,T=f.length,A=a.length;++u<T;){var z=ou(f[u],x[u]);if(z){if(u>=A)return z;var U=a[u];return z*(U=="desc"?-1:1)}}return t.index-i.index}function lu(t,i,a,u){for(var f=-1,x=t.length,T=a.length,A=-1,z=i.length,U=Ve(x-T,0),K=W(z+U),V=!u;++A<z;)K[A]=i[A];for(;++f<T;)(V||f<x)&&(K[a[f]]=t[f]);for(;U--;)K[A++]=t[f++];return K}function uu(t,i,a,u){for(var f=-1,x=t.length,T=-1,A=a.length,z=-1,U=i.length,K=Ve(x-A,0),V=W(K+U),ne=!u;++f<K;)V[f]=t[f];for(var se=f;++z<U;)V[se+z]=i[z];for(;++T<A;)(ne||f<x)&&(V[se+a[T]]=t[f++]);return V}function ct(t,i){var a=-1,u=t.length;for(i||(i=W(u));++a<u;)i[a]=t[a];return i}function Vt(t,i,a,u){var f=!a;a||(a={});for(var x=-1,T=i.length;++x<T;){var A=i[x],z=u?u(a[A],t[A],A,a,t):n;z===n&&(z=t[A]),f?ii(a,A,z):Nn(a,A,z)}return a}function db(t,i){return Vt(t,ka(t),i)}function cb(t,i){return Vt(t,xu(t),i)}function Hr(t,i){return function(a,u){var f=he(a)?gg:B_,x=i?i():{};return f(a,t,ae(u,2),x)}}function ln(t){return ge(function(i,a){var u=-1,f=a.length,x=f>1?a[f-1]:n,T=f>2?a[2]:n;for(x=t.length>3&&typeof x=="function"?(f--,x):n,T&&st(a[0],a[1],T)&&(x=f<3?n:x,f=1),i=Le(i);++u<f;){var A=a[u];A&&t(i,A,u,x)}return i})}function du(t,i){return function(a,u){if(a==null)return a;if(!ht(a))return t(a,u);for(var f=a.length,x=i?f:-1,T=Le(a);(i?x--:++x<f)&&u(T[x],x,T)!==!1;);return a}}function cu(t){return function(i,a,u){for(var f=-1,x=Le(i),T=u(i),A=T.length;A--;){var z=T[t?A:++f];if(a(x[z],z,x)===!1)break}return i}}function hb(t,i,a){var u=i&_,f=Un(t);function x(){var T=this&&this!==Ye&&this instanceof x?f:t;return T.apply(u?a:this,arguments)}return x}function hu(t){return function(i){i=Se(i);var a=tn(i)?Rt(i):n,u=a?a[0]:i.charAt(0),f=a?Si(a,1).join(""):i.slice(1);return u[t]()+f}}function un(t){return function(i){return Ys(dd(ud(i).replace(ig,"")),t,"")}}function Un(t){return function(){var i=arguments;switch(i.length){case 0:return new t;case 1:return new t(i[0]);case 2:return new t(i[0],i[1]);case 3:return new t(i[0],i[1],i[2]);case 4:return new t(i[0],i[1],i[2],i[3]);case 5:return new t(i[0],i[1],i[2],i[3],i[4]);case 6:return new t(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new t(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var a=on(t.prototype),u=t.apply(a,i);return Ne(u)?u:a}}function fb(t,i,a){var u=Un(t);function f(){for(var x=arguments.length,T=W(x),A=x,z=dn(f);A--;)T[A]=arguments[A];var U=x<3&&T[0]!==z&&T[x-1]!==z?[]:wi(T,z);if(x-=U.length,x<a)return _u(t,i,Fr,f.placeholder,n,T,U,n,n,a-x);var K=this&&this!==Ye&&this instanceof f?u:t;return gt(K,this,T)}return f}function fu(t){return function(i,a,u){var f=Le(i);if(!ht(i)){var x=ae(a,3);i=Xe(i),a=function(A){return x(f[A],A,f)}}var T=t(i,a,u);return T>-1?f[x?i[T]:T]:n}}function mu(t){return ri(function(i){var a=i.length,u=a,f=It.prototype.thru;for(t&&i.reverse();u--;){var x=i[u];if(typeof x!="function")throw new At(o);if(f&&!T&&Vr(x)=="wrapper")var T=new It([],!0)}for(u=T?u:a;++u<a;){x=i[u];var A=Vr(x),z=A=="wrapper"?Ia(x):n;z&&za(z[0])&&z[1]==(k|E|M|B)&&!z[4].length&&z[9]==1?T=T[Vr(z[0])].apply(T,z[3]):T=x.length==1&&za(x)?T[A]():T.thru(x)}return function(){var U=arguments,K=U[0];if(T&&U.length==1&&he(K))return T.plant(K).value();for(var V=0,ne=a?i[V].apply(this,U):K;++V<a;)ne=i[V].call(this,ne);return ne}})}function Fr(t,i,a,u,f,x,T,A,z,U){var K=i&k,V=i&_,ne=i&y,se=i&(E|I),oe=i&H,pe=ne?n:Un(t);function le(){for(var ve=arguments.length,ye=W(ve),wt=ve;wt--;)ye[wt]=arguments[wt];if(se)var at=dn(le),yt=Tg(ye,at);if(u&&(ye=lu(ye,u,f,se)),x&&(ye=uu(ye,x,T,se)),ve-=yt,se&&ve<U){var Ue=wi(ye,at);return _u(t,i,Fr,le.placeholder,a,ye,Ue,A,z,U-ve)}var Ot=V?a:this,li=ne?Ot[t]:t;return ve=ye.length,A?ye=Bb(ye,A):oe&&ve>1&&ye.reverse(),K&&z<ve&&(ye.length=z),this&&this!==Ye&&this instanceof le&&(li=pe||Un(li)),li.apply(Ot,ye)}return le}function pu(t,i){return function(a,u){return H_(a,t,i(u),{})}}function Ur(t,i){return function(a,u){var f;if(a===n&&u===n)return i;if(a!==n&&(f=a),u!==n){if(f===n)return u;typeof a=="string"||typeof u=="string"?(a=bt(a),u=bt(u)):(a=eu(a),u=eu(u)),f=t(a,u)}return f}}function Ca(t){return ri(function(i){return i=We(i,_t(ae())),ge(function(a){var u=this;return t(i,function(f){return gt(f,u,a)})})})}function Kr(t,i){i=i===n?" ":bt(i);var a=i.length;if(a<2)return a?_a(i,t):i;var u=_a(i,kr(t/nn(i)));return tn(i)?Si(Rt(u),0,t).join(""):u.slice(0,t)}function mb(t,i,a,u){var f=i&_,x=Un(t);function T(){for(var A=-1,z=arguments.length,U=-1,K=u.length,V=W(K+z),ne=this&&this!==Ye&&this instanceof T?x:t;++U<K;)V[U]=u[U];for(;z--;)V[U++]=arguments[++A];return gt(ne,f?a:this,V)}return T}function gu(t){return function(i,a,u){return u&&typeof u!="number"&&st(i,a,u)&&(a=u=n),i=oi(i),a===n?(a=i,i=0):a=oi(a),u=u===n?i<a?1:-1:oi(u),Q_(i,a,u,t)}}function $r(t){return function(i,a){return typeof i=="string"&&typeof a=="string"||(i=zt(i),a=zt(a)),t(i,a)}}function _u(t,i,a,u,f,x,T,A,z,U){var K=i&E,V=K?T:n,ne=K?n:T,se=K?x:n,oe=K?n:x;i|=K?M:S,i&=~(K?S:M),i&C||(i&=~(_|y));var pe=[t,i,f,se,V,oe,ne,A,z,U],le=a.apply(n,pe);return za(t)&&Eu(le,pe),le.placeholder=u,ku(le,t,i)}function Ta(t){var i=$e[t];return function(a,u){if(a=zt(a),u=u==null?0:Qe(me(u),292),u&&kl(a)){var f=(Se(a)+"e").split("e"),x=i(f[0]+"e"+(+f[1]+u));return f=(Se(x)+"e").split("e"),+(f[0]+"e"+(+f[1]-u))}return i(a)}}var pb=sn&&1/wr(new sn([,-0]))[1]==_e?function(t){return new sn(t)}:Ga;function bu(t){return function(i){var a=et(i);return a==pt?ta(i):a==ie?zg(i):Cg(i,t(i))}}function ni(t,i,a,u,f,x,T,A){var z=i&y;if(!z&&typeof t!="function")throw new At(o);var U=u?u.length:0;if(U||(i&=~(M|S),u=f=n),T=T===n?T:Ve(me(T),0),A=A===n?A:me(A),U-=f?f.length:0,i&S){var K=u,V=f;u=f=n}var ne=z?n:Ia(t),se=[t,i,a,u,f,K,V,x,T,A];if(ne&&kb(se,ne),t=se[0],i=se[1],a=se[2],u=se[3],f=se[4],A=se[9]=se[9]===n?z?0:t.length:Ve(se[9]-U,0),!A&&i&(E|I)&&(i&=~(E|I)),!i||i==_)var oe=hb(t,i,a);else i==E||i==I?oe=fb(t,i,A):(i==M||i==(_|M))&&!f.length?oe=mb(t,i,a,u):oe=Fr.apply(n,se);var pe=ne?Jl:Eu;return ku(pe(oe,se),t,i)}function vu(t,i,a,u){return t===n||Nt(t,rn[a])&&!Ae.call(u,a)?i:t}function wu(t,i,a,u,f,x){return Ne(t)&&Ne(i)&&(x.set(i,t),Nr(t,i,n,wu,x),x.delete(i)),t}function gb(t){return Vn(t)?n:t}function yu(t,i,a,u,f,x){var T=a&v,A=t.length,z=i.length;if(A!=z&&!(T&&z>A))return!1;var U=x.get(t),K=x.get(i);if(U&&K)return U==i&&K==t;var V=-1,ne=!0,se=a&b?new Pi:n;for(x.set(t,i),x.set(i,t);++V<A;){var oe=t[V],pe=i[V];if(u)var le=T?u(pe,oe,V,i,t,x):u(oe,pe,V,t,i,x);if(le!==n){if(le)continue;ne=!1;break}if(se){if(!Xs(i,function(ve,ye){if(!zn(se,ye)&&(oe===ve||f(oe,ve,a,u,x)))return se.push(ye)})){ne=!1;break}}else if(!(oe===pe||f(oe,pe,a,u,x))){ne=!1;break}}return x.delete(t),x.delete(i),ne}function _b(t,i,a,u,f,x,T){switch(a){case Ji:if(t.byteLength!=i.byteLength||t.byteOffset!=i.byteOffset)return!1;t=t.buffer,i=i.buffer;case Ln:return!(t.byteLength!=i.byteLength||!x(new Sr(t),new Sr(i)));case Pt:case ki:case Y:return Nt(+t,+i);case Zi:return t.name==i.name&&t.message==i.message;case te:case Me:return t==i+"";case pt:var A=ta;case ie:var z=u&v;if(A||(A=wr),t.size!=i.size&&!z)return!1;var U=T.get(t);if(U)return U==i;u|=b,T.set(t,i);var K=yu(A(t),A(i),u,f,x,T);return T.delete(t),K;case Ze:if(Wn)return Wn.call(t)==Wn.call(i)}return!1}function bb(t,i,a,u,f,x){var T=a&v,A=Sa(t),z=A.length,U=Sa(i),K=U.length;if(z!=K&&!T)return!1;for(var V=z;V--;){var ne=A[V];if(!(T?ne in i:Ae.call(i,ne)))return!1}var se=x.get(t),oe=x.get(i);if(se&&oe)return se==i&&oe==t;var pe=!0;x.set(t,i),x.set(i,t);for(var le=T;++V<z;){ne=A[V];var ve=t[ne],ye=i[ne];if(u)var wt=T?u(ye,ve,ne,i,t,x):u(ve,ye,ne,t,i,x);if(!(wt===n?ve===ye||f(ve,ye,a,u,x):wt)){pe=!1;break}le||(le=ne=="constructor")}if(pe&&!le){var at=t.constructor,yt=i.constructor;at!=yt&&"constructor"in t&&"constructor"in i&&!(typeof at=="function"&&at instanceof at&&typeof yt=="function"&&yt instanceof yt)&&(pe=!1)}return x.delete(t),x.delete(i),pe}function ri(t){return Da(Au(t,n,Ru),t+"")}function Sa(t){return Hl(t,Xe,ka)}function Aa(t){return Hl(t,ft,xu)}var Ia=zr?function(t){return zr.get(t)}:Ga;function Vr(t){for(var i=t.name+"",a=an[i],u=Ae.call(an,i)?a.length:0;u--;){var f=a[u],x=f.func;if(x==null||x==t)return f.name}return i}function dn(t){var i=Ae.call(w,"placeholder")?w:t;return i.placeholder}function ae(){var t=w.iteratee||$a;return t=t===$a?Kl:t,arguments.length?t(arguments[0],arguments[1]):t}function Gr(t,i){var a=t.__data__;return Sb(i)?a[typeof i=="string"?"string":"hash"]:a.map}function Ea(t){for(var i=Xe(t),a=i.length;a--;){var u=i[a],f=t[u];i[a]=[u,f,Tu(f)]}return i}function Ni(t,i){var a=Eg(t,i);return Ul(a)?a:n}function vb(t){var i=Ae.call(t,Bi),a=t[Bi];try{t[Bi]=n;var u=!0}catch{}var f=Cr.call(t);return u&&(i?t[Bi]=a:delete t[Bi]),f}var ka=na?function(t){return t==null?[]:(t=Le(t),bi(na(t),function(i){return Il.call(t,i)}))}:Ya,xu=na?function(t){for(var i=[];t;)vi(i,ka(t)),t=Ar(t);return i}:Ya,et=rt;(ra&&et(new ra(new ArrayBuffer(1)))!=Ji||Dn&&et(new Dn)!=pt||sa&&et(sa.resolve())!=R||sn&&et(new sn)!=ie||Pn&&et(new Pn)!=kn)&&(et=function(t){var i=rt(t),a=i==P?t.constructor:n,u=a?Oi(a):"";if(u)switch(u){case t_:return Ji;case i_:return pt;case n_:return R;case r_:return ie;case s_:return kn}return i});function wb(t,i,a){for(var u=-1,f=a.length;++u<f;){var x=a[u],T=x.size;switch(x.type){case"drop":t+=T;break;case"dropRight":i-=T;break;case"take":i=Qe(i,t+T);break;case"takeRight":t=Ve(t,i-T);break}}return{start:t,end:i}}function yb(t){var i=t.match(Ap);return i?i[1].split(Ip):[]}function Mu(t,i,a){i=Ti(i,t);for(var u=-1,f=i.length,x=!1;++u<f;){var T=Gt(i[u]);if(!(x=t!=null&&a(t,T)))break;t=t[T]}return x||++u!=f?x:(f=t==null?0:t.length,!!f&&es(f)&&si(T,f)&&(he(t)||qi(t)))}function xb(t){var i=t.length,a=new t.constructor(i);return i&&typeof t[0]=="string"&&Ae.call(t,"index")&&(a.index=t.index,a.input=t.input),a}function Cu(t){return typeof t.constructor=="function"&&!Kn(t)?on(Ar(t)):{}}function Mb(t,i,a){var u=t.constructor;switch(i){case Ln:return Ma(t);case Pt:case ki:return new u(+t);case Ji:return ab(t,a);case Es:case ks:case Ls:case zs:case Bs:case Ds:case Ps:case Rs:case Ws:return au(t,a);case pt:return new u;case Y:case Me:return new u(t);case te:return ob(t);case ie:return new u;case Ze:return lb(t)}}function Cb(t,i){var a=i.length;if(!a)return t;var u=a-1;return i[u]=(a>1?"& ":"")+i[u],i=i.join(a>2?", ":" "),t.replace(Sp,`{
/* [wrapped with `+i+`] */
`)}function Tb(t){return he(t)||qi(t)||!!(El&&t&&t[El])}function si(t,i){var a=typeof t;return i=i??ce,!!i&&(a=="number"||a!="symbol"&&Wp.test(t))&&t>-1&&t%1==0&&t<i}function st(t,i,a){if(!Ne(a))return!1;var u=typeof i;return(u=="number"?ht(a)&&si(i,a.length):u=="string"&&i in a)?Nt(a[i],t):!1}function La(t,i){if(he(t))return!1;var a=typeof t;return a=="number"||a=="symbol"||a=="boolean"||t==null||vt(t)?!0:xp.test(t)||!yp.test(t)||i!=null&&t in Le(i)}function Sb(t){var i=typeof t;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?t!=="__proto__":t===null}function za(t){var i=Vr(t),a=w[i];if(typeof a!="function"||!(i in we.prototype))return!1;if(t===a)return!0;var u=Ia(a);return!!u&&t===u[0]}function Ab(t){return!!Tl&&Tl in t}var Ib=xr?ai:Xa;function Kn(t){var i=t&&t.constructor,a=typeof i=="function"&&i.prototype||rn;return t===a}function Tu(t){return t===t&&!Ne(t)}function Su(t,i){return function(a){return a==null?!1:a[t]===i&&(i!==n||t in Le(a))}}function Eb(t){var i=Jr(t,function(u){return a.size===d&&a.clear(),u}),a=i.cache;return i}function kb(t,i){var a=t[1],u=i[1],f=a|u,x=f<(_|y|k),T=u==k&&a==E||u==k&&a==B&&t[7].length<=i[8]||u==(k|B)&&i[7].length<=i[8]&&a==E;if(!(x||T))return t;u&_&&(t[2]=i[2],f|=a&_?0:C);var A=i[3];if(A){var z=t[3];t[3]=z?lu(z,A,i[4]):A,t[4]=z?wi(t[3],h):i[4]}return A=i[5],A&&(z=t[5],t[5]=z?uu(z,A,i[6]):A,t[6]=z?wi(t[5],h):i[6]),A=i[7],A&&(t[7]=A),u&k&&(t[8]=t[8]==null?i[8]:Qe(t[8],i[8])),t[9]==null&&(t[9]=i[9]),t[0]=i[0],t[1]=f,t}function Lb(t){var i=[];if(t!=null)for(var a in Le(t))i.push(a);return i}function zb(t){return Cr.call(t)}function Au(t,i,a){return i=Ve(i===n?t.length-1:i,0),function(){for(var u=arguments,f=-1,x=Ve(u.length-i,0),T=W(x);++f<x;)T[f]=u[i+f];f=-1;for(var A=W(i+1);++f<i;)A[f]=u[f];return A[i]=a(T),gt(t,this,A)}}function Iu(t,i){return i.length<2?t:Wi(t,kt(i,0,-1))}function Bb(t,i){for(var a=t.length,u=Qe(i.length,a),f=ct(t);u--;){var x=i[u];t[u]=si(x,a)?f[x]:n}return t}function Ba(t,i){if(!(i==="constructor"&&typeof t[i]=="function")&&i!="__proto__")return t[i]}var Eu=Lu(Jl),$n=Yg||function(t,i){return Ye.setTimeout(t,i)},Da=Lu(ib);function ku(t,i,a){var u=i+"";return Da(t,Cb(u,Db(yb(u),a)))}function Lu(t){var i=0,a=0;return function(){var u=Jg(),f=$-(u-a);if(a=u,f>0){if(++i>=D)return arguments[0]}else i=0;return t.apply(n,arguments)}}function Yr(t,i){var a=-1,u=t.length,f=u-1;for(i=i===n?u:i;++a<i;){var x=ga(a,f),T=t[x];t[x]=t[a],t[a]=T}return t.length=i,t}var zu=Eb(function(t){var i=[];return t.charCodeAt(0)===46&&i.push(""),t.replace(Mp,function(a,u,f,x){i.push(f?x.replace(Lp,"$1"):u||a)}),i});function Gt(t){if(typeof t=="string"||vt(t))return t;var i=t+"";return i=="0"&&1/t==-_e?"-0":i}function Oi(t){if(t!=null){try{return Mr.call(t)}catch{}try{return t+""}catch{}}return""}function Db(t,i){return St(He,function(a){var u="_."+a[0];i&a[1]&&!br(t,u)&&t.push(u)}),t.sort()}function Bu(t){if(t instanceof we)return t.clone();var i=new It(t.__wrapped__,t.__chain__);return i.__actions__=ct(t.__actions__),i.__index__=t.__index__,i.__values__=t.__values__,i}function Pb(t,i,a){(a?st(t,i,a):i===n)?i=1:i=Ve(me(i),0);var u=t==null?0:t.length;if(!u||i<1)return[];for(var f=0,x=0,T=W(kr(u/i));f<u;)T[x++]=kt(t,f,f+=i);return T}function Rb(t){for(var i=-1,a=t==null?0:t.length,u=0,f=[];++i<a;){var x=t[i];x&&(f[u++]=x)}return f}function Wb(){var t=arguments.length;if(!t)return[];for(var i=W(t-1),a=arguments[0],u=t;u--;)i[u-1]=arguments[u];return vi(he(a)?ct(a):[a],je(i,1))}var Nb=ge(function(t,i){return Fe(t)?On(t,je(i,1,Fe,!0)):[]}),Ob=ge(function(t,i){var a=Lt(i);return Fe(a)&&(a=n),Fe(t)?On(t,je(i,1,Fe,!0),ae(a,2)):[]}),qb=ge(function(t,i){var a=Lt(i);return Fe(a)&&(a=n),Fe(t)?On(t,je(i,1,Fe,!0),n,a):[]});function Hb(t,i,a){var u=t==null?0:t.length;return u?(i=a||i===n?1:me(i),kt(t,i<0?0:i,u)):[]}function Fb(t,i,a){var u=t==null?0:t.length;return u?(i=a||i===n?1:me(i),i=u-i,kt(t,0,i<0?0:i)):[]}function Ub(t,i){return t&&t.length?qr(t,ae(i,3),!0,!0):[]}function Kb(t,i){return t&&t.length?qr(t,ae(i,3),!0):[]}function $b(t,i,a,u){var f=t==null?0:t.length;return f?(a&&typeof a!="number"&&st(t,i,a)&&(a=0,u=f),W_(t,i,a,u)):[]}function Du(t,i,a){var u=t==null?0:t.length;if(!u)return-1;var f=a==null?0:me(a);return f<0&&(f=Ve(u+f,0)),vr(t,ae(i,3),f)}function Pu(t,i,a){var u=t==null?0:t.length;if(!u)return-1;var f=u-1;return a!==n&&(f=me(a),f=a<0?Ve(u+f,0):Qe(f,u-1)),vr(t,ae(i,3),f,!0)}function Ru(t){var i=t==null?0:t.length;return i?je(t,1):[]}function Vb(t){var i=t==null?0:t.length;return i?je(t,_e):[]}function Gb(t,i){var a=t==null?0:t.length;return a?(i=i===n?1:me(i),je(t,i)):[]}function Yb(t){for(var i=-1,a=t==null?0:t.length,u={};++i<a;){var f=t[i];u[f[0]]=f[1]}return u}function Wu(t){return t&&t.length?t[0]:n}function Xb(t,i,a){var u=t==null?0:t.length;if(!u)return-1;var f=a==null?0:me(a);return f<0&&(f=Ve(u+f,0)),en(t,i,f)}function Zb(t){var i=t==null?0:t.length;return i?kt(t,0,-1):[]}var jb=ge(function(t){var i=We(t,ya);return i.length&&i[0]===t[0]?ca(i):[]}),Jb=ge(function(t){var i=Lt(t),a=We(t,ya);return i===Lt(a)?i=n:a.pop(),a.length&&a[0]===t[0]?ca(a,ae(i,2)):[]}),Qb=ge(function(t){var i=Lt(t),a=We(t,ya);return i=typeof i=="function"?i:n,i&&a.pop(),a.length&&a[0]===t[0]?ca(a,n,i):[]});function ev(t,i){return t==null?"":Zg.call(t,i)}function Lt(t){var i=t==null?0:t.length;return i?t[i-1]:n}function tv(t,i,a){var u=t==null?0:t.length;if(!u)return-1;var f=u;return a!==n&&(f=me(a),f=f<0?Ve(u+f,0):Qe(f,u-1)),i===i?Dg(t,i,f):vr(t,_l,f,!0)}function iv(t,i){return t&&t.length?Yl(t,me(i)):n}var nv=ge(Nu);function Nu(t,i){return t&&t.length&&i&&i.length?pa(t,i):t}function rv(t,i,a){return t&&t.length&&i&&i.length?pa(t,i,ae(a,2)):t}function sv(t,i,a){return t&&t.length&&i&&i.length?pa(t,i,n,a):t}var av=ri(function(t,i){var a=t==null?0:t.length,u=oa(t,i);return jl(t,We(i,function(f){return si(f,a)?+f:f}).sort(ou)),u});function ov(t,i){var a=[];if(!(t&&t.length))return a;var u=-1,f=[],x=t.length;for(i=ae(i,3);++u<x;){var T=t[u];i(T,u,t)&&(a.push(T),f.push(u))}return jl(t,f),a}function Pa(t){return t==null?t:e_.call(t)}function lv(t,i,a){var u=t==null?0:t.length;return u?(a&&typeof a!="number"&&st(t,i,a)?(i=0,a=u):(i=i==null?0:me(i),a=a===n?u:me(a)),kt(t,i,a)):[]}function uv(t,i){return Or(t,i)}function dv(t,i,a){return ba(t,i,ae(a,2))}function cv(t,i){var a=t==null?0:t.length;if(a){var u=Or(t,i);if(u<a&&Nt(t[u],i))return u}return-1}function hv(t,i){return Or(t,i,!0)}function fv(t,i,a){return ba(t,i,ae(a,2),!0)}function mv(t,i){var a=t==null?0:t.length;if(a){var u=Or(t,i,!0)-1;if(Nt(t[u],i))return u}return-1}function pv(t){return t&&t.length?Ql(t):[]}function gv(t,i){return t&&t.length?Ql(t,ae(i,2)):[]}function _v(t){var i=t==null?0:t.length;return i?kt(t,1,i):[]}function bv(t,i,a){return t&&t.length?(i=a||i===n?1:me(i),kt(t,0,i<0?0:i)):[]}function vv(t,i,a){var u=t==null?0:t.length;return u?(i=a||i===n?1:me(i),i=u-i,kt(t,i<0?0:i,u)):[]}function wv(t,i){return t&&t.length?qr(t,ae(i,3),!1,!0):[]}function yv(t,i){return t&&t.length?qr(t,ae(i,3)):[]}var xv=ge(function(t){return Ci(je(t,1,Fe,!0))}),Mv=ge(function(t){var i=Lt(t);return Fe(i)&&(i=n),Ci(je(t,1,Fe,!0),ae(i,2))}),Cv=ge(function(t){var i=Lt(t);return i=typeof i=="function"?i:n,Ci(je(t,1,Fe,!0),n,i)});function Tv(t){return t&&t.length?Ci(t):[]}function Sv(t,i){return t&&t.length?Ci(t,ae(i,2)):[]}function Av(t,i){return i=typeof i=="function"?i:n,t&&t.length?Ci(t,n,i):[]}function Ra(t){if(!(t&&t.length))return[];var i=0;return t=bi(t,function(a){if(Fe(a))return i=Ve(a.length,i),!0}),Qs(i,function(a){return We(t,Zs(a))})}function Ou(t,i){if(!(t&&t.length))return[];var a=Ra(t);return i==null?a:We(a,function(u){return gt(i,n,u)})}var Iv=ge(function(t,i){return Fe(t)?On(t,i):[]}),Ev=ge(function(t){return wa(bi(t,Fe))}),kv=ge(function(t){var i=Lt(t);return Fe(i)&&(i=n),wa(bi(t,Fe),ae(i,2))}),Lv=ge(function(t){var i=Lt(t);return i=typeof i=="function"?i:n,wa(bi(t,Fe),n,i)}),zv=ge(Ra);function Bv(t,i){return nu(t||[],i||[],Nn)}function Dv(t,i){return nu(t||[],i||[],Fn)}var Pv=ge(function(t){var i=t.length,a=i>1?t[i-1]:n;return a=typeof a=="function"?(t.pop(),a):n,Ou(t,a)});function qu(t){var i=w(t);return i.__chain__=!0,i}function Rv(t,i){return i(t),t}function Xr(t,i){return i(t)}var Wv=ri(function(t){var i=t.length,a=i?t[0]:0,u=this.__wrapped__,f=function(x){return oa(x,t)};return i>1||this.__actions__.length||!(u instanceof we)||!si(a)?this.thru(f):(u=u.slice(a,+a+(i?1:0)),u.__actions__.push({func:Xr,args:[f],thisArg:n}),new It(u,this.__chain__).thru(function(x){return i&&!x.length&&x.push(n),x}))});function Nv(){return qu(this)}function Ov(){return new It(this.value(),this.__chain__)}function qv(){this.__values__===n&&(this.__values__=ed(this.value()));var t=this.__index__>=this.__values__.length,i=t?n:this.__values__[this.__index__++];return{done:t,value:i}}function Hv(){return this}function Fv(t){for(var i,a=this;a instanceof Dr;){var u=Bu(a);u.__index__=0,u.__values__=n,i?f.__wrapped__=u:i=u;var f=u;a=a.__wrapped__}return f.__wrapped__=t,i}function Uv(){var t=this.__wrapped__;if(t instanceof we){var i=t;return this.__actions__.length&&(i=new we(this)),i=i.reverse(),i.__actions__.push({func:Xr,args:[Pa],thisArg:n}),new It(i,this.__chain__)}return this.thru(Pa)}function Kv(){return iu(this.__wrapped__,this.__actions__)}var $v=Hr(function(t,i,a){Ae.call(t,a)?++t[a]:ii(t,a,1)});function Vv(t,i,a){var u=he(t)?pl:R_;return a&&st(t,i,a)&&(i=n),u(t,ae(i,3))}function Gv(t,i){var a=he(t)?bi:Ol;return a(t,ae(i,3))}var Yv=fu(Du),Xv=fu(Pu);function Zv(t,i){return je(Zr(t,i),1)}function jv(t,i){return je(Zr(t,i),_e)}function Jv(t,i,a){return a=a===n?1:me(a),je(Zr(t,i),a)}function Hu(t,i){var a=he(t)?St:Mi;return a(t,ae(i,3))}function Fu(t,i){var a=he(t)?_g:Nl;return a(t,ae(i,3))}var Qv=Hr(function(t,i,a){Ae.call(t,a)?t[a].push(i):ii(t,a,[i])});function ew(t,i,a,u){t=ht(t)?t:hn(t),a=a&&!u?me(a):0;var f=t.length;return a<0&&(a=Ve(f+a,0)),ts(t)?a<=f&&t.indexOf(i,a)>-1:!!f&&en(t,i,a)>-1}var tw=ge(function(t,i,a){var u=-1,f=typeof i=="function",x=ht(t)?W(t.length):[];return Mi(t,function(T){x[++u]=f?gt(i,T,a):qn(T,i,a)}),x}),iw=Hr(function(t,i,a){ii(t,a,i)});function Zr(t,i){var a=he(t)?We:$l;return a(t,ae(i,3))}function nw(t,i,a,u){return t==null?[]:(he(i)||(i=i==null?[]:[i]),a=u?n:a,he(a)||(a=a==null?[]:[a]),Xl(t,i,a))}var rw=Hr(function(t,i,a){t[a?0:1].push(i)},function(){return[[],[]]});function sw(t,i,a){var u=he(t)?Ys:vl,f=arguments.length<3;return u(t,ae(i,4),a,f,Mi)}function aw(t,i,a){var u=he(t)?bg:vl,f=arguments.length<3;return u(t,ae(i,4),a,f,Nl)}function ow(t,i){var a=he(t)?bi:Ol;return a(t,Qr(ae(i,3)))}function lw(t){var i=he(t)?Dl:eb;return i(t)}function uw(t,i,a){(a?st(t,i,a):i===n)?i=1:i=me(i);var u=he(t)?L_:tb;return u(t,i)}function dw(t){var i=he(t)?z_:nb;return i(t)}function cw(t){if(t==null)return 0;if(ht(t))return ts(t)?nn(t):t.length;var i=et(t);return i==pt||i==ie?t.size:fa(t).length}function hw(t,i,a){var u=he(t)?Xs:rb;return a&&st(t,i,a)&&(i=n),u(t,ae(i,3))}var fw=ge(function(t,i){if(t==null)return[];var a=i.length;return a>1&&st(t,i[0],i[1])?i=[]:a>2&&st(i[0],i[1],i[2])&&(i=[i[0]]),Xl(t,je(i,1),[])}),jr=Gg||function(){return Ye.Date.now()};function mw(t,i){if(typeof i!="function")throw new At(o);return t=me(t),function(){if(--t<1)return i.apply(this,arguments)}}function Uu(t,i,a){return i=a?n:i,i=t&&i==null?t.length:i,ni(t,k,n,n,n,n,i)}function Ku(t,i){var a;if(typeof i!="function")throw new At(o);return t=me(t),function(){return--t>0&&(a=i.apply(this,arguments)),t<=1&&(i=n),a}}var Wa=ge(function(t,i,a){var u=_;if(a.length){var f=wi(a,dn(Wa));u|=M}return ni(t,u,i,a,f)}),$u=ge(function(t,i,a){var u=_|y;if(a.length){var f=wi(a,dn($u));u|=M}return ni(i,u,t,a,f)});function Vu(t,i,a){i=a?n:i;var u=ni(t,E,n,n,n,n,n,i);return u.placeholder=Vu.placeholder,u}function Gu(t,i,a){i=a?n:i;var u=ni(t,I,n,n,n,n,n,i);return u.placeholder=Gu.placeholder,u}function Yu(t,i,a){var u,f,x,T,A,z,U=0,K=!1,V=!1,ne=!0;if(typeof t!="function")throw new At(o);i=zt(i)||0,Ne(a)&&(K=!!a.leading,V="maxWait"in a,x=V?Ve(zt(a.maxWait)||0,i):x,ne="trailing"in a?!!a.trailing:ne);function se(Ue){var Ot=u,li=f;return u=f=n,U=Ue,T=t.apply(li,Ot),T}function oe(Ue){return U=Ue,A=$n(ve,i),K?se(Ue):T}function pe(Ue){var Ot=Ue-z,li=Ue-U,fd=i-Ot;return V?Qe(fd,x-li):fd}function le(Ue){var Ot=Ue-z,li=Ue-U;return z===n||Ot>=i||Ot<0||V&&li>=x}function ve(){var Ue=jr();if(le(Ue))return ye(Ue);A=$n(ve,pe(Ue))}function ye(Ue){return A=n,ne&&u?se(Ue):(u=f=n,T)}function wt(){A!==n&&ru(A),U=0,u=z=f=A=n}function at(){return A===n?T:ye(jr())}function yt(){var Ue=jr(),Ot=le(Ue);if(u=arguments,f=this,z=Ue,Ot){if(A===n)return oe(z);if(V)return ru(A),A=$n(ve,i),se(z)}return A===n&&(A=$n(ve,i)),T}return yt.cancel=wt,yt.flush=at,yt}var pw=ge(function(t,i){return Wl(t,1,i)}),gw=ge(function(t,i,a){return Wl(t,zt(i)||0,a)});function _w(t){return ni(t,H)}function Jr(t,i){if(typeof t!="function"||i!=null&&typeof i!="function")throw new At(o);var a=function(){var u=arguments,f=i?i.apply(this,u):u[0],x=a.cache;if(x.has(f))return x.get(f);var T=t.apply(this,u);return a.cache=x.set(f,T)||x,T};return a.cache=new(Jr.Cache||ti),a}Jr.Cache=ti;function Qr(t){if(typeof t!="function")throw new At(o);return function(){var i=arguments;switch(i.length){case 0:return!t.call(this);case 1:return!t.call(this,i[0]);case 2:return!t.call(this,i[0],i[1]);case 3:return!t.call(this,i[0],i[1],i[2])}return!t.apply(this,i)}}function bw(t){return Ku(2,t)}var vw=sb(function(t,i){i=i.length==1&&he(i[0])?We(i[0],_t(ae())):We(je(i,1),_t(ae()));var a=i.length;return ge(function(u){for(var f=-1,x=Qe(u.length,a);++f<x;)u[f]=i[f].call(this,u[f]);return gt(t,this,u)})}),Na=ge(function(t,i){var a=wi(i,dn(Na));return ni(t,M,n,i,a)}),Xu=ge(function(t,i){var a=wi(i,dn(Xu));return ni(t,S,n,i,a)}),ww=ri(function(t,i){return ni(t,B,n,n,n,i)});function yw(t,i){if(typeof t!="function")throw new At(o);return i=i===n?i:me(i),ge(t,i)}function xw(t,i){if(typeof t!="function")throw new At(o);return i=i==null?0:Ve(me(i),0),ge(function(a){var u=a[i],f=Si(a,0,i);return u&&vi(f,u),gt(t,this,f)})}function Mw(t,i,a){var u=!0,f=!0;if(typeof t!="function")throw new At(o);return Ne(a)&&(u="leading"in a?!!a.leading:u,f="trailing"in a?!!a.trailing:f),Yu(t,i,{leading:u,maxWait:i,trailing:f})}function Cw(t){return Uu(t,1)}function Tw(t,i){return Na(xa(i),t)}function Sw(){if(!arguments.length)return[];var t=arguments[0];return he(t)?t:[t]}function Aw(t){return Et(t,p)}function Iw(t,i){return i=typeof i=="function"?i:n,Et(t,p,i)}function Ew(t){return Et(t,g|p)}function kw(t,i){return i=typeof i=="function"?i:n,Et(t,g|p,i)}function Lw(t,i){return i==null||Rl(t,i,Xe(i))}function Nt(t,i){return t===i||t!==t&&i!==i}var zw=$r(da),Bw=$r(function(t,i){return t>=i}),qi=Fl(function(){return arguments}())?Fl:function(t){return Oe(t)&&Ae.call(t,"callee")&&!Il.call(t,"callee")},he=W.isArray,Dw=ul?_t(ul):F_;function ht(t){return t!=null&&es(t.length)&&!ai(t)}function Fe(t){return Oe(t)&&ht(t)}function Pw(t){return t===!0||t===!1||Oe(t)&&rt(t)==Pt}var Ai=Xg||Xa,Rw=dl?_t(dl):U_;function Ww(t){return Oe(t)&&t.nodeType===1&&!Vn(t)}function Nw(t){if(t==null)return!0;if(ht(t)&&(he(t)||typeof t=="string"||typeof t.splice=="function"||Ai(t)||cn(t)||qi(t)))return!t.length;var i=et(t);if(i==pt||i==ie)return!t.size;if(Kn(t))return!fa(t).length;for(var a in t)if(Ae.call(t,a))return!1;return!0}function Ow(t,i){return Hn(t,i)}function qw(t,i,a){a=typeof a=="function"?a:n;var u=a?a(t,i):n;return u===n?Hn(t,i,n,a):!!u}function Oa(t){if(!Oe(t))return!1;var i=rt(t);return i==Zi||i==Is||typeof t.message=="string"&&typeof t.name=="string"&&!Vn(t)}function Hw(t){return typeof t=="number"&&kl(t)}function ai(t){if(!Ne(t))return!1;var i=rt(t);return i==ji||i==mr||i==As||i==N}function Zu(t){return typeof t=="number"&&t==me(t)}function es(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=ce}function Ne(t){var i=typeof t;return t!=null&&(i=="object"||i=="function")}function Oe(t){return t!=null&&typeof t=="object"}var ju=cl?_t(cl):$_;function Fw(t,i){return t===i||ha(t,i,Ea(i))}function Uw(t,i,a){return a=typeof a=="function"?a:n,ha(t,i,Ea(i),a)}function Kw(t){return Ju(t)&&t!=+t}function $w(t){if(Ib(t))throw new de(s);return Ul(t)}function Vw(t){return t===null}function Gw(t){return t==null}function Ju(t){return typeof t=="number"||Oe(t)&&rt(t)==Y}function Vn(t){if(!Oe(t)||rt(t)!=P)return!1;var i=Ar(t);if(i===null)return!0;var a=Ae.call(i,"constructor")&&i.constructor;return typeof a=="function"&&a instanceof a&&Mr.call(a)==Ug}var qa=hl?_t(hl):V_;function Yw(t){return Zu(t)&&t>=-ce&&t<=ce}var Qu=fl?_t(fl):G_;function ts(t){return typeof t=="string"||!he(t)&&Oe(t)&&rt(t)==Me}function vt(t){return typeof t=="symbol"||Oe(t)&&rt(t)==Ze}var cn=ml?_t(ml):Y_;function Xw(t){return t===n}function Zw(t){return Oe(t)&&et(t)==kn}function jw(t){return Oe(t)&&rt(t)==fp}var Jw=$r(ma),Qw=$r(function(t,i){return t<=i});function ed(t){if(!t)return[];if(ht(t))return ts(t)?Rt(t):ct(t);if(Bn&&t[Bn])return Lg(t[Bn]());var i=et(t),a=i==pt?ta:i==ie?wr:hn;return a(t)}function oi(t){if(!t)return t===0?t:0;if(t=zt(t),t===_e||t===-_e){var i=t<0?-1:1;return i*xe}return t===t?t:0}function me(t){var i=oi(t),a=i%1;return i===i?a?i-a:i:0}function td(t){return t?Ri(me(t),0,be):0}function zt(t){if(typeof t=="number")return t;if(vt(t))return Ee;if(Ne(t)){var i=typeof t.valueOf=="function"?t.valueOf():t;t=Ne(i)?i+"":i}if(typeof t!="string")return t===0?t:+t;t=wl(t);var a=Dp.test(t);return a||Rp.test(t)?mg(t.slice(2),a?2:8):Bp.test(t)?Ee:+t}function id(t){return Vt(t,ft(t))}function ey(t){return t?Ri(me(t),-ce,ce):t===0?t:0}function Se(t){return t==null?"":bt(t)}var ty=ln(function(t,i){if(Kn(i)||ht(i)){Vt(i,Xe(i),t);return}for(var a in i)Ae.call(i,a)&&Nn(t,a,i[a])}),nd=ln(function(t,i){Vt(i,ft(i),t)}),is=ln(function(t,i,a,u){Vt(i,ft(i),t,u)}),iy=ln(function(t,i,a,u){Vt(i,Xe(i),t,u)}),ny=ri(oa);function ry(t,i){var a=on(t);return i==null?a:Pl(a,i)}var sy=ge(function(t,i){t=Le(t);var a=-1,u=i.length,f=u>2?i[2]:n;for(f&&st(i[0],i[1],f)&&(u=1);++a<u;)for(var x=i[a],T=ft(x),A=-1,z=T.length;++A<z;){var U=T[A],K=t[U];(K===n||Nt(K,rn[U])&&!Ae.call(t,U))&&(t[U]=x[U])}return t}),ay=ge(function(t){return t.push(n,wu),gt(rd,n,t)});function oy(t,i){return gl(t,ae(i,3),$t)}function ly(t,i){return gl(t,ae(i,3),ua)}function uy(t,i){return t==null?t:la(t,ae(i,3),ft)}function dy(t,i){return t==null?t:ql(t,ae(i,3),ft)}function cy(t,i){return t&&$t(t,ae(i,3))}function hy(t,i){return t&&ua(t,ae(i,3))}function fy(t){return t==null?[]:Wr(t,Xe(t))}function my(t){return t==null?[]:Wr(t,ft(t))}function Ha(t,i,a){var u=t==null?n:Wi(t,i);return u===n?a:u}function py(t,i){return t!=null&&Mu(t,i,N_)}function Fa(t,i){return t!=null&&Mu(t,i,O_)}var gy=pu(function(t,i,a){i!=null&&typeof i.toString!="function"&&(i=Cr.call(i)),t[i]=a},Ka(mt)),_y=pu(function(t,i,a){i!=null&&typeof i.toString!="function"&&(i=Cr.call(i)),Ae.call(t,i)?t[i].push(a):t[i]=[a]},ae),by=ge(qn);function Xe(t){return ht(t)?Bl(t):fa(t)}function ft(t){return ht(t)?Bl(t,!0):X_(t)}function vy(t,i){var a={};return i=ae(i,3),$t(t,function(u,f,x){ii(a,i(u,f,x),u)}),a}function wy(t,i){var a={};return i=ae(i,3),$t(t,function(u,f,x){ii(a,f,i(u,f,x))}),a}var yy=ln(function(t,i,a){Nr(t,i,a)}),rd=ln(function(t,i,a,u){Nr(t,i,a,u)}),xy=ri(function(t,i){var a={};if(t==null)return a;var u=!1;i=We(i,function(x){return x=Ti(x,t),u||(u=x.length>1),x}),Vt(t,Aa(t),a),u&&(a=Et(a,g|m|p,gb));for(var f=i.length;f--;)va(a,i[f]);return a});function My(t,i){return sd(t,Qr(ae(i)))}var Cy=ri(function(t,i){return t==null?{}:j_(t,i)});function sd(t,i){if(t==null)return{};var a=We(Aa(t),function(u){return[u]});return i=ae(i),Zl(t,a,function(u,f){return i(u,f[0])})}function Ty(t,i,a){i=Ti(i,t);var u=-1,f=i.length;for(f||(f=1,t=n);++u<f;){var x=t==null?n:t[Gt(i[u])];x===n&&(u=f,x=a),t=ai(x)?x.call(t):x}return t}function Sy(t,i,a){return t==null?t:Fn(t,i,a)}function Ay(t,i,a,u){return u=typeof u=="function"?u:n,t==null?t:Fn(t,i,a,u)}var ad=bu(Xe),od=bu(ft);function Iy(t,i,a){var u=he(t),f=u||Ai(t)||cn(t);if(i=ae(i,4),a==null){var x=t&&t.constructor;f?a=u?new x:[]:Ne(t)?a=ai(x)?on(Ar(t)):{}:a={}}return(f?St:$t)(t,function(T,A,z){return i(a,T,A,z)}),a}function Ey(t,i){return t==null?!0:va(t,i)}function ky(t,i,a){return t==null?t:tu(t,i,xa(a))}function Ly(t,i,a,u){return u=typeof u=="function"?u:n,t==null?t:tu(t,i,xa(a),u)}function hn(t){return t==null?[]:ea(t,Xe(t))}function zy(t){return t==null?[]:ea(t,ft(t))}function By(t,i,a){return a===n&&(a=i,i=n),a!==n&&(a=zt(a),a=a===a?a:0),i!==n&&(i=zt(i),i=i===i?i:0),Ri(zt(t),i,a)}function Dy(t,i,a){return i=oi(i),a===n?(a=i,i=0):a=oi(a),t=zt(t),q_(t,i,a)}function Py(t,i,a){if(a&&typeof a!="boolean"&&st(t,i,a)&&(i=a=n),a===n&&(typeof i=="boolean"?(a=i,i=n):typeof t=="boolean"&&(a=t,t=n)),t===n&&i===n?(t=0,i=1):(t=oi(t),i===n?(i=t,t=0):i=oi(i)),t>i){var u=t;t=i,i=u}if(a||t%1||i%1){var f=Ll();return Qe(t+f*(i-t+fg("1e-"+((f+"").length-1))),i)}return ga(t,i)}var Ry=un(function(t,i,a){return i=i.toLowerCase(),t+(a?ld(i):i)});function ld(t){return Ua(Se(t).toLowerCase())}function ud(t){return t=Se(t),t&&t.replace(Np,Sg).replace(ng,"")}function Wy(t,i,a){t=Se(t),i=bt(i);var u=t.length;a=a===n?u:Ri(me(a),0,u);var f=a;return a-=i.length,a>=0&&t.slice(a,f)==i}function Ny(t){return t=Se(t),t&&bp.test(t)?t.replace(qo,Ag):t}function Oy(t){return t=Se(t),t&&Cp.test(t)?t.replace(Ns,"\\$&"):t}var qy=un(function(t,i,a){return t+(a?"-":"")+i.toLowerCase()}),Hy=un(function(t,i,a){return t+(a?" ":"")+i.toLowerCase()}),Fy=hu("toLowerCase");function Uy(t,i,a){t=Se(t),i=me(i);var u=i?nn(t):0;if(!i||u>=i)return t;var f=(i-u)/2;return Kr(Lr(f),a)+t+Kr(kr(f),a)}function Ky(t,i,a){t=Se(t),i=me(i);var u=i?nn(t):0;return i&&u<i?t+Kr(i-u,a):t}function $y(t,i,a){t=Se(t),i=me(i);var u=i?nn(t):0;return i&&u<i?Kr(i-u,a)+t:t}function Vy(t,i,a){return a||i==null?i=0:i&&(i=+i),Qg(Se(t).replace(Os,""),i||0)}function Gy(t,i,a){return(a?st(t,i,a):i===n)?i=1:i=me(i),_a(Se(t),i)}function Yy(){var t=arguments,i=Se(t[0]);return t.length<3?i:i.replace(t[1],t[2])}var Xy=un(function(t,i,a){return t+(a?"_":"")+i.toLowerCase()});function Zy(t,i,a){return a&&typeof a!="number"&&st(t,i,a)&&(i=a=n),a=a===n?be:a>>>0,a?(t=Se(t),t&&(typeof i=="string"||i!=null&&!qa(i))&&(i=bt(i),!i&&tn(t))?Si(Rt(t),0,a):t.split(i,a)):[]}var jy=un(function(t,i,a){return t+(a?" ":"")+Ua(i)});function Jy(t,i,a){return t=Se(t),a=a==null?0:Ri(me(a),0,t.length),i=bt(i),t.slice(a,a+i.length)==i}function Qy(t,i,a){var u=w.templateSettings;a&&st(t,i,a)&&(i=n),t=Se(t),i=is({},i,u,vu);var f=is({},i.imports,u.imports,vu),x=Xe(f),T=ea(f,x),A,z,U=0,K=i.interpolate||pr,V="__p += '",ne=ia((i.escape||pr).source+"|"+K.source+"|"+(K===Ho?zp:pr).source+"|"+(i.evaluate||pr).source+"|$","g"),se="//# sourceURL="+(Ae.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++lg+"]")+`
`;t.replace(ne,function(le,ve,ye,wt,at,yt){return ye||(ye=wt),V+=t.slice(U,yt).replace(Op,Ig),ve&&(A=!0,V+=`' +
__e(`+ve+`) +
'`),at&&(z=!0,V+=`';
`+at+`;
__p += '`),ye&&(V+=`' +
((__t = (`+ye+`)) == null ? '' : __t) +
'`),U=yt+le.length,le}),V+=`';
`;var oe=Ae.call(i,"variable")&&i.variable;if(!oe)V=`with (obj) {
`+V+`
}
`;else if(kp.test(oe))throw new de(l);V=(z?V.replace(mp,""):V).replace(pp,"$1").replace(gp,"$1;"),V="function("+(oe||"obj")+`) {
`+(oe?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(A?", __e = _.escape":"")+(z?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+V+`return __p
}`;var pe=cd(function(){return Te(x,se+"return "+V).apply(n,T)});if(pe.source=V,Oa(pe))throw pe;return pe}function e0(t){return Se(t).toLowerCase()}function t0(t){return Se(t).toUpperCase()}function i0(t,i,a){if(t=Se(t),t&&(a||i===n))return wl(t);if(!t||!(i=bt(i)))return t;var u=Rt(t),f=Rt(i),x=yl(u,f),T=xl(u,f)+1;return Si(u,x,T).join("")}function n0(t,i,a){if(t=Se(t),t&&(a||i===n))return t.slice(0,Cl(t)+1);if(!t||!(i=bt(i)))return t;var u=Rt(t),f=xl(u,Rt(i))+1;return Si(u,0,f).join("")}function r0(t,i,a){if(t=Se(t),t&&(a||i===n))return t.replace(Os,"");if(!t||!(i=bt(i)))return t;var u=Rt(t),f=yl(u,Rt(i));return Si(u,f).join("")}function s0(t,i){var a=F,u=J;if(Ne(i)){var f="separator"in i?i.separator:f;a="length"in i?me(i.length):a,u="omission"in i?bt(i.omission):u}t=Se(t);var x=t.length;if(tn(t)){var T=Rt(t);x=T.length}if(a>=x)return t;var A=a-nn(u);if(A<1)return u;var z=T?Si(T,0,A).join(""):t.slice(0,A);if(f===n)return z+u;if(T&&(A+=z.length-A),qa(f)){if(t.slice(A).search(f)){var U,K=z;for(f.global||(f=ia(f.source,Se(Fo.exec(f))+"g")),f.lastIndex=0;U=f.exec(K);)var V=U.index;z=z.slice(0,V===n?A:V)}}else if(t.indexOf(bt(f),A)!=A){var ne=z.lastIndexOf(f);ne>-1&&(z=z.slice(0,ne))}return z+u}function a0(t){return t=Se(t),t&&_p.test(t)?t.replace(Oo,Pg):t}var o0=un(function(t,i,a){return t+(a?" ":"")+i.toUpperCase()}),Ua=hu("toUpperCase");function dd(t,i,a){return t=Se(t),i=a?n:i,i===n?kg(t)?Ng(t):yg(t):t.match(i)||[]}var cd=ge(function(t,i){try{return gt(t,n,i)}catch(a){return Oa(a)?a:new de(a)}}),l0=ri(function(t,i){return St(i,function(a){a=Gt(a),ii(t,a,Wa(t[a],t))}),t});function u0(t){var i=t==null?0:t.length,a=ae();return t=i?We(t,function(u){if(typeof u[1]!="function")throw new At(o);return[a(u[0]),u[1]]}):[],ge(function(u){for(var f=-1;++f<i;){var x=t[f];if(gt(x[0],this,u))return gt(x[1],this,u)}})}function d0(t){return P_(Et(t,g))}function Ka(t){return function(){return t}}function c0(t,i){return t==null||t!==t?i:t}var h0=mu(),f0=mu(!0);function mt(t){return t}function $a(t){return Kl(typeof t=="function"?t:Et(t,g))}function m0(t){return Vl(Et(t,g))}function p0(t,i){return Gl(t,Et(i,g))}var g0=ge(function(t,i){return function(a){return qn(a,t,i)}}),_0=ge(function(t,i){return function(a){return qn(t,a,i)}});function Va(t,i,a){var u=Xe(i),f=Wr(i,u);a==null&&!(Ne(i)&&(f.length||!u.length))&&(a=i,i=t,t=this,f=Wr(i,Xe(i)));var x=!(Ne(a)&&"chain"in a)||!!a.chain,T=ai(t);return St(f,function(A){var z=i[A];t[A]=z,T&&(t.prototype[A]=function(){var U=this.__chain__;if(x||U){var K=t(this.__wrapped__),V=K.__actions__=ct(this.__actions__);return V.push({func:z,args:arguments,thisArg:t}),K.__chain__=U,K}return z.apply(t,vi([this.value()],arguments))})}),t}function b0(){return Ye._===this&&(Ye._=Kg),this}function Ga(){}function v0(t){return t=me(t),ge(function(i){return Yl(i,t)})}var w0=Ca(We),y0=Ca(pl),x0=Ca(Xs);function hd(t){return La(t)?Zs(Gt(t)):J_(t)}function M0(t){return function(i){return t==null?n:Wi(t,i)}}var C0=gu(),T0=gu(!0);function Ya(){return[]}function Xa(){return!1}function S0(){return{}}function A0(){return""}function I0(){return!0}function E0(t,i){if(t=me(t),t<1||t>ce)return[];var a=be,u=Qe(t,be);i=ae(i),t-=be;for(var f=Qs(u,i);++a<t;)i(a);return f}function k0(t){return he(t)?We(t,Gt):vt(t)?[t]:ct(zu(Se(t)))}function L0(t){var i=++Fg;return Se(t)+i}var z0=Ur(function(t,i){return t+i},0),B0=Ta("ceil"),D0=Ur(function(t,i){return t/i},1),P0=Ta("floor");function R0(t){return t&&t.length?Rr(t,mt,da):n}function W0(t,i){return t&&t.length?Rr(t,ae(i,2),da):n}function N0(t){return bl(t,mt)}function O0(t,i){return bl(t,ae(i,2))}function q0(t){return t&&t.length?Rr(t,mt,ma):n}function H0(t,i){return t&&t.length?Rr(t,ae(i,2),ma):n}var F0=Ur(function(t,i){return t*i},1),U0=Ta("round"),K0=Ur(function(t,i){return t-i},0);function $0(t){return t&&t.length?Js(t,mt):0}function V0(t,i){return t&&t.length?Js(t,ae(i,2)):0}return w.after=mw,w.ary=Uu,w.assign=ty,w.assignIn=nd,w.assignInWith=is,w.assignWith=iy,w.at=ny,w.before=Ku,w.bind=Wa,w.bindAll=l0,w.bindKey=$u,w.castArray=Sw,w.chain=qu,w.chunk=Pb,w.compact=Rb,w.concat=Wb,w.cond=u0,w.conforms=d0,w.constant=Ka,w.countBy=$v,w.create=ry,w.curry=Vu,w.curryRight=Gu,w.debounce=Yu,w.defaults=sy,w.defaultsDeep=ay,w.defer=pw,w.delay=gw,w.difference=Nb,w.differenceBy=Ob,w.differenceWith=qb,w.drop=Hb,w.dropRight=Fb,w.dropRightWhile=Ub,w.dropWhile=Kb,w.fill=$b,w.filter=Gv,w.flatMap=Zv,w.flatMapDeep=jv,w.flatMapDepth=Jv,w.flatten=Ru,w.flattenDeep=Vb,w.flattenDepth=Gb,w.flip=_w,w.flow=h0,w.flowRight=f0,w.fromPairs=Yb,w.functions=fy,w.functionsIn=my,w.groupBy=Qv,w.initial=Zb,w.intersection=jb,w.intersectionBy=Jb,w.intersectionWith=Qb,w.invert=gy,w.invertBy=_y,w.invokeMap=tw,w.iteratee=$a,w.keyBy=iw,w.keys=Xe,w.keysIn=ft,w.map=Zr,w.mapKeys=vy,w.mapValues=wy,w.matches=m0,w.matchesProperty=p0,w.memoize=Jr,w.merge=yy,w.mergeWith=rd,w.method=g0,w.methodOf=_0,w.mixin=Va,w.negate=Qr,w.nthArg=v0,w.omit=xy,w.omitBy=My,w.once=bw,w.orderBy=nw,w.over=w0,w.overArgs=vw,w.overEvery=y0,w.overSome=x0,w.partial=Na,w.partialRight=Xu,w.partition=rw,w.pick=Cy,w.pickBy=sd,w.property=hd,w.propertyOf=M0,w.pull=nv,w.pullAll=Nu,w.pullAllBy=rv,w.pullAllWith=sv,w.pullAt=av,w.range=C0,w.rangeRight=T0,w.rearg=ww,w.reject=ow,w.remove=ov,w.rest=yw,w.reverse=Pa,w.sampleSize=uw,w.set=Sy,w.setWith=Ay,w.shuffle=dw,w.slice=lv,w.sortBy=fw,w.sortedUniq=pv,w.sortedUniqBy=gv,w.split=Zy,w.spread=xw,w.tail=_v,w.take=bv,w.takeRight=vv,w.takeRightWhile=wv,w.takeWhile=yv,w.tap=Rv,w.throttle=Mw,w.thru=Xr,w.toArray=ed,w.toPairs=ad,w.toPairsIn=od,w.toPath=k0,w.toPlainObject=id,w.transform=Iy,w.unary=Cw,w.union=xv,w.unionBy=Mv,w.unionWith=Cv,w.uniq=Tv,w.uniqBy=Sv,w.uniqWith=Av,w.unset=Ey,w.unzip=Ra,w.unzipWith=Ou,w.update=ky,w.updateWith=Ly,w.values=hn,w.valuesIn=zy,w.without=Iv,w.words=dd,w.wrap=Tw,w.xor=Ev,w.xorBy=kv,w.xorWith=Lv,w.zip=zv,w.zipObject=Bv,w.zipObjectDeep=Dv,w.zipWith=Pv,w.entries=ad,w.entriesIn=od,w.extend=nd,w.extendWith=is,Va(w,w),w.add=z0,w.attempt=cd,w.camelCase=Ry,w.capitalize=ld,w.ceil=B0,w.clamp=By,w.clone=Aw,w.cloneDeep=Ew,w.cloneDeepWith=kw,w.cloneWith=Iw,w.conformsTo=Lw,w.deburr=ud,w.defaultTo=c0,w.divide=D0,w.endsWith=Wy,w.eq=Nt,w.escape=Ny,w.escapeRegExp=Oy,w.every=Vv,w.find=Yv,w.findIndex=Du,w.findKey=oy,w.findLast=Xv,w.findLastIndex=Pu,w.findLastKey=ly,w.floor=P0,w.forEach=Hu,w.forEachRight=Fu,w.forIn=uy,w.forInRight=dy,w.forOwn=cy,w.forOwnRight=hy,w.get=Ha,w.gt=zw,w.gte=Bw,w.has=py,w.hasIn=Fa,w.head=Wu,w.identity=mt,w.includes=ew,w.indexOf=Xb,w.inRange=Dy,w.invoke=by,w.isArguments=qi,w.isArray=he,w.isArrayBuffer=Dw,w.isArrayLike=ht,w.isArrayLikeObject=Fe,w.isBoolean=Pw,w.isBuffer=Ai,w.isDate=Rw,w.isElement=Ww,w.isEmpty=Nw,w.isEqual=Ow,w.isEqualWith=qw,w.isError=Oa,w.isFinite=Hw,w.isFunction=ai,w.isInteger=Zu,w.isLength=es,w.isMap=ju,w.isMatch=Fw,w.isMatchWith=Uw,w.isNaN=Kw,w.isNative=$w,w.isNil=Gw,w.isNull=Vw,w.isNumber=Ju,w.isObject=Ne,w.isObjectLike=Oe,w.isPlainObject=Vn,w.isRegExp=qa,w.isSafeInteger=Yw,w.isSet=Qu,w.isString=ts,w.isSymbol=vt,w.isTypedArray=cn,w.isUndefined=Xw,w.isWeakMap=Zw,w.isWeakSet=jw,w.join=ev,w.kebabCase=qy,w.last=Lt,w.lastIndexOf=tv,w.lowerCase=Hy,w.lowerFirst=Fy,w.lt=Jw,w.lte=Qw,w.max=R0,w.maxBy=W0,w.mean=N0,w.meanBy=O0,w.min=q0,w.minBy=H0,w.stubArray=Ya,w.stubFalse=Xa,w.stubObject=S0,w.stubString=A0,w.stubTrue=I0,w.multiply=F0,w.nth=iv,w.noConflict=b0,w.noop=Ga,w.now=jr,w.pad=Uy,w.padEnd=Ky,w.padStart=$y,w.parseInt=Vy,w.random=Py,w.reduce=sw,w.reduceRight=aw,w.repeat=Gy,w.replace=Yy,w.result=Ty,w.round=U0,w.runInContext=L,w.sample=lw,w.size=cw,w.snakeCase=Xy,w.some=hw,w.sortedIndex=uv,w.sortedIndexBy=dv,w.sortedIndexOf=cv,w.sortedLastIndex=hv,w.sortedLastIndexBy=fv,w.sortedLastIndexOf=mv,w.startCase=jy,w.startsWith=Jy,w.subtract=K0,w.sum=$0,w.sumBy=V0,w.template=Qy,w.times=E0,w.toFinite=oi,w.toInteger=me,w.toLength=td,w.toLower=e0,w.toNumber=zt,w.toSafeInteger=ey,w.toString=Se,w.toUpper=t0,w.trim=i0,w.trimEnd=n0,w.trimStart=r0,w.truncate=s0,w.unescape=a0,w.uniqueId=L0,w.upperCase=o0,w.upperFirst=Ua,w.each=Hu,w.eachRight=Fu,w.first=Wu,Va(w,function(){var t={};return $t(w,function(i,a){Ae.call(w.prototype,a)||(t[a]=i)}),t}(),{chain:!1}),w.VERSION=e,St(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){w[t].placeholder=w}),St(["drop","take"],function(t,i){we.prototype[t]=function(a){a=a===n?1:Ve(me(a),0);var u=this.__filtered__&&!i?new we(this):this.clone();return u.__filtered__?u.__takeCount__=Qe(a,u.__takeCount__):u.__views__.push({size:Qe(a,be),type:t+(u.__dir__<0?"Right":"")}),u},we.prototype[t+"Right"]=function(a){return this.reverse()[t](a).reverse()}}),St(["filter","map","takeWhile"],function(t,i){var a=i+1,u=a==G||a==ue;we.prototype[t]=function(f){var x=this.clone();return x.__iteratees__.push({iteratee:ae(f,3),type:a}),x.__filtered__=x.__filtered__||u,x}}),St(["head","last"],function(t,i){var a="take"+(i?"Right":"");we.prototype[t]=function(){return this[a](1).value()[0]}}),St(["initial","tail"],function(t,i){var a="drop"+(i?"":"Right");we.prototype[t]=function(){return this.__filtered__?new we(this):this[a](1)}}),we.prototype.compact=function(){return this.filter(mt)},we.prototype.find=function(t){return this.filter(t).head()},we.prototype.findLast=function(t){return this.reverse().find(t)},we.prototype.invokeMap=ge(function(t,i){return typeof t=="function"?new we(this):this.map(function(a){return qn(a,t,i)})}),we.prototype.reject=function(t){return this.filter(Qr(ae(t)))},we.prototype.slice=function(t,i){t=me(t);var a=this;return a.__filtered__&&(t>0||i<0)?new we(a):(t<0?a=a.takeRight(-t):t&&(a=a.drop(t)),i!==n&&(i=me(i),a=i<0?a.dropRight(-i):a.take(i-t)),a)},we.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},we.prototype.toArray=function(){return this.take(be)},$t(we.prototype,function(t,i){var a=/^(?:filter|find|map|reject)|While$/.test(i),u=/^(?:head|last)$/.test(i),f=w[u?"take"+(i=="last"?"Right":""):i],x=u||/^find/.test(i);f&&(w.prototype[i]=function(){var T=this.__wrapped__,A=u?[1]:arguments,z=T instanceof we,U=A[0],K=z||he(T),V=function(ve){var ye=f.apply(w,vi([ve],A));return u&&ne?ye[0]:ye};K&&a&&typeof U=="function"&&U.length!=1&&(z=K=!1);var ne=this.__chain__,se=!!this.__actions__.length,oe=x&&!ne,pe=z&&!se;if(!x&&K){T=pe?T:new we(this);var le=t.apply(T,A);return le.__actions__.push({func:Xr,args:[V],thisArg:n}),new It(le,ne)}return oe&&pe?t.apply(this,A):(le=this.thru(V),oe?u?le.value()[0]:le.value():le)})}),St(["pop","push","shift","sort","splice","unshift"],function(t){var i=yr[t],a=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",u=/^(?:pop|shift)$/.test(t);w.prototype[t]=function(){var f=arguments;if(u&&!this.__chain__){var x=this.value();return i.apply(he(x)?x:[],f)}return this[a](function(T){return i.apply(he(T)?T:[],f)})}}),$t(we.prototype,function(t,i){var a=w[i];if(a){var u=a.name+"";Ae.call(an,u)||(an[u]=[]),an[u].push({name:i,func:a})}}),an[Fr(n,y).name]=[{name:"wrapper",func:n}],we.prototype.clone=a_,we.prototype.reverse=o_,we.prototype.value=l_,w.prototype.at=Wv,w.prototype.chain=Nv,w.prototype.commit=Ov,w.prototype.next=qv,w.prototype.plant=Fv,w.prototype.reverse=Uv,w.prototype.toJSON=w.prototype.valueOf=w.prototype.value=Kv,w.prototype.first=w.prototype.head,Bn&&(w.prototype[Bn]=Hv),w},yi=Og();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Ye._=yi,define(function(){return yi})):zi?((zi.exports=yi)._=yi,$s._=yi):Ye._=yi}).call(En)});var ci=Bt(ui());var fn=class{constructor(){this._first=null,this._last=null,this._size=0}get isEmpty(){return this._size===0}get size(){return this._size}get length(){return this._size}get first(){return this._first?this._first.value:void 0}get last(){return this._last?this._last.value:void 0}get firstNode(){return this._first}get lastNode(){return this._last}*[Symbol.iterator](){let e=this._first;for(;e;)yield e.value,e=e.next}*retro(){let e=this._last;for(;e;)yield e.value,e=e.prev}*nodes(){let e=this._first;for(;e;)yield e,e=e.next}*retroNodes(){let e=this._last;for(;e;)yield e,e=e.prev}assign(e){this.clear();for(let r of e)this.addLast(r)}push(e){this.addLast(e)}pop(){return this.removeLast()}shift(e){this.addFirst(e)}unshift(){return this.removeFirst()}addFirst(e){let r=new di.LinkedListNode(this,e);return this._first?(r.next=this._first,this._first.prev=r,this._first=r):(this._first=r,this._last=r),this._size++,r}addLast(e){let r=new di.LinkedListNode(this,e);return this._last?(r.prev=this._last,this._last.next=r,this._last=r):(this._first=r,this._last=r),this._size++,r}insertBefore(e,r){if(!r||r===this._first)return this.addFirst(e);if(!(r instanceof di.LinkedListNode)||r.list!==this)throw new Error("Reference node is not owned by the list.");let s=new di.LinkedListNode(this,e),o=r,l=o.prev;return s.next=o,s.prev=l,o.prev=s,l.next=s,this._size++,s}insertAfter(e,r){if(!r||r===this._last)return this.addLast(e);if(!(r instanceof di.LinkedListNode)||r.list!==this)throw new Error("Reference node is not owned by the list.");let s=new di.LinkedListNode(this,e),o=r,l=o.next;return s.next=l,s.prev=o,o.next=s,l.prev=s,this._size++,s}removeFirst(){let e=this._first;if(e)return e===this._last?(this._first=null,this._last=null):(this._first=e.next,this._first.prev=null),e.list=null,e.next=null,e.prev=null,this._size--,e.value}removeLast(){let e=this._last;if(e)return e===this._first?(this._first=null,this._last=null):(this._last=e.prev,this._last.next=null),e.list=null,e.next=null,e.prev=null,this._size--,e.value}removeNode(e){if(!(e instanceof di.LinkedListNode)||e.list!==this)throw new Error("Node is not owned by the list.");let r=e;r===this._first&&r===this._last?(this._first=null,this._last=null):r===this._first?(this._first=r.next,this._first.prev=null):r===this._last?(this._last=r.prev,this._last.next=null):(r.next.prev=r.prev,r.prev.next=r.next),r.list=null,r.next=null,r.prev=null,this._size--}clear(){let e=this._first;for(;e;){let r=e.next;e.list=null,e.prev=null,e.next=null,e=r}this._first=null,this._last=null,this._size=0}};(function(n){function e(r){let s=new n;return s.assign(r),s}n.from=e})(fn||(fn={}));var di;(function(n){class e{constructor(s,o){this.list=null,this.next=null,this.prev=null,this.list=s,this.value=o}}n.LinkedListNode=e})(di||(di={}));var ot=class{constructor(e){this.type=e}get isConflatable(){return!1}conflate(e){return!1}},Ii=class extends ot{get isConflatable(){return!0}conflate(e){return!0}},Z;(function(n){let e=null,r=(F=>J=>{let D=!1;return F.then(()=>!D&&J()),()=>{D=!0}})(Promise.resolve());function s(F,J){let D=v.get(F);if(!D||D.length===0){E(F,J);return}(0,ci.every)((0,ci.retro)(D),G=>G?C(G,F,J):!0)&&E(F,J)}n.sendMessage=s;function o(F,J){if(!J.isConflatable){I(F,J);return}(0,ci.some)(p,$=>$.handler!==F||!$.msg||$.msg.type!==J.type||!$.msg.isConflatable?!1:$.msg.conflate(J))||I(F,J)}n.postMessage=o;function l(F,J){let D=v.get(F);D&&D.indexOf(J)!==-1||(D?D.push(J):v.set(F,[J]))}n.installMessageHook=l;function c(F,J){let D=v.get(F);if(!D)return;let $=D.indexOf(J);$!==-1&&(D[$]=null,S(D))}n.removeMessageHook=c;function d(F){let J=v.get(F);J&&J.length>0&&(ci.ArrayExt.fill(J,null),S(J));for(let D of p)D.handler===F&&(D.handler=null,D.msg=null)}n.clearData=d;function h(){y||e===null||(e(),e=null,y=!0,M(),y=!1)}n.flush=h;function g(){return _}n.getExceptionHandler=g;function m(F){let J=_;return _=F,J}n.setExceptionHandler=m;let p=new fn,v=new WeakMap,b=new Set,_=F=>{console.error(F)},y=!1;function C(F,J,D){let $=!0;try{typeof F=="function"?$=F(J,D):$=F.messageHook(J,D)}catch(G){_(G)}return $}function E(F,J){try{F.processMessage(J)}catch(D){_(D)}}function I(F,J){p.addLast({handler:F,msg:J}),e===null&&(e=r(M))}function M(){if(e=null,p.isEmpty)return;let F={handler:null,msg:null};for(p.addLast(F);;){let J=p.removeFirst();if(J===F)return;J.handler&&J.msg&&s(J.handler,J.msg)}}function S(F){b.size===0&&r(k),b.add(F)}function k(){b.forEach(B),b.clear()}function B(F){ci.ArrayExt.removeAllWhere(F,H)}function H(F){return F===null}})(Z||(Z={}));var X=Bt(ui()),mi=Bt(ss());var _d;(function(n){function e(r){let s=document.body,o=l=>{l.preventDefault(),l.stopPropagation(),l.clipboardData.setData("text",r),s.removeEventListener("copy",o,!0)};s.addEventListener("copy",o,!0),document.execCommand("copy")}n.copyText=e})(_d||(_d={}));var Ce;(function(n){function e(l){let c=window.getComputedStyle(l),d=parseFloat(c.borderTopWidth)||0,h=parseFloat(c.borderLeftWidth)||0,g=parseFloat(c.borderRightWidth)||0,m=parseFloat(c.borderBottomWidth)||0,p=parseFloat(c.paddingTop)||0,v=parseFloat(c.paddingLeft)||0,b=parseFloat(c.paddingRight)||0,_=parseFloat(c.paddingBottom)||0,y=h+v+b+g,C=d+p+_+m;return{borderTop:d,borderLeft:h,borderRight:g,borderBottom:m,paddingTop:p,paddingLeft:v,paddingRight:b,paddingBottom:_,horizontalSum:y,verticalSum:C}}n.boxSizing=e;function r(l){let c=window.getComputedStyle(l),d=parseFloat(c.minWidth)||0,h=parseFloat(c.minHeight)||0,g=parseFloat(c.maxWidth)||1/0,m=parseFloat(c.maxHeight)||1/0;return g=Math.max(d,g),m=Math.max(h,m),{minWidth:d,minHeight:h,maxWidth:g,maxHeight:m}}n.sizeLimits=r;function s(l,c,d){let h=l.getBoundingClientRect();return c>=h.left&&c<h.right&&d>=h.top&&d<h.bottom}n.hitTest=s;function o(l,c){let d=l.getBoundingClientRect(),h=c.getBoundingClientRect();if(!(h.top<=d.top&&h.bottom>=d.bottom)){if(h.top<d.top&&h.height<=d.height){l.scrollTop-=d.top-h.top;return}if(h.bottom>d.bottom&&h.height>=d.height){l.scrollTop-=d.top-h.top;return}if(h.top<d.top&&h.height>d.height){l.scrollTop-=d.bottom-h.bottom;return}if(h.bottom>d.bottom&&h.height<d.height){l.scrollTop-=d.bottom-h.bottom;return}}}n.scrollIntoViewIfNeeded=o})(Ce||(Ce={}));var tt;(function(n){n.IS_MAC=!!navigator.platform.match(/Mac/i),n.IS_WIN=!!navigator.platform.match(/Win/i),n.IS_IE=/Trident/.test(navigator.userAgent),n.IS_EDGE=/Edge/.test(navigator.userAgent);function e(r){return n.IS_MAC?r.metaKey:r.ctrlKey}n.accelKey=e})(tt||(tt={}));var Ht;(function(n){function e(o){if(o in qt.specificityCache)return qt.specificityCache[o];let l=qt.calculateSingle(o);return qt.specificityCache[o]=l}n.calculateSpecificity=e;function r(o){if(o in qt.validityCache)return qt.validityCache[o];let l=!0;try{qt.testElem.querySelector(o)}catch{l=!1}return qt.validityCache[o]=l}n.isValid=r;function s(o,l){return qt.protoMatchFunc.call(o,l)}n.matches=s})(Ht||(Ht={}));var qt;(function(n){n.specificityCache=Object.create(null),n.validityCache=Object.create(null),n.testElem=document.createElement("div"),n.protoMatchFunc=(()=>{let m=Element.prototype;return m.matches||m.matchesSelector||m.mozMatchesSelector||m.msMatchesSelector||m.oMatchesSelector||m.webkitMatchesSelector||function(p){let v=this,b=v.ownerDocument?v.ownerDocument.querySelectorAll(p):[];return Array.prototype.indexOf.call(b,v)!==-1}})();function e(m){m=m.split(",",1)[0];let p=0,v=0,b=0;function _(y){let C=m.match(y);return C===null?!1:(m=m.slice(C[0].length),!0)}for(m=m.replace(g," $1 ");m.length>0;){if(_(r)){p++;continue}if(_(s)){v++;continue}if(_(o)){v++;continue}if(_(c)){b++;continue}if(_(d)){v++;continue}if(_(l)){b++;continue}if(!_(h))return 0}return p=Math.min(p,255),v=Math.min(v,255),b=Math.min(b,255),p<<16|v<<8|b}n.calculateSingle=e;let r=/^#[^\s\+>~#\.\[:]+/,s=/^\.[^\s\+>~#\.\[:]+/,o=/^\[[^\]]+\]/,l=/^[^\s\+>~#\.\[:]+/,c=/^(::[^\s\+>~#\.\[:]+|:first-line|:first-letter|:before|:after)/,d=/^:[^\s\+>~#\.\[:]+/,h=/^[\s\+>~\*]+/,g=/:not\(([^\)]+)\)/g})(qt||(qt={}));var lt=class{constructor(e){this._pid=Hi.nextPID(),this.name=e.name,this._create=e.create,this._coerce=e.coerce||null,this._compare=e.compare||null,this._changed=e.changed||null}get(e){let r,s=Hi.ensureMap(e);return this._pid in s?r=s[this._pid]:r=s[this._pid]=this._createValue(e),r}set(e,r){let s,o=Hi.ensureMap(e);this._pid in o?s=o[this._pid]:s=o[this._pid]=this._createValue(e);let l=this._coerceValue(e,r);this._maybeNotify(e,s,o[this._pid]=l)}coerce(e){let r,s=Hi.ensureMap(e);this._pid in s?r=s[this._pid]:r=s[this._pid]=this._createValue(e);let o=this._coerceValue(e,r);this._maybeNotify(e,r,s[this._pid]=o)}_createValue(e){let r=this._create;return r(e)}_coerceValue(e,r){let s=this._coerce;return s?s(e,r):r}_compareValue(e,r){let s=this._compare;return s?s(e,r):e===r}_maybeNotify(e,r,s){let o=this._changed;o&&!this._compareValue(r,s)&&o(e,r,s)}};(function(n){function e(r){Hi.ownerData.delete(r)}n.clearData=e})(lt||(lt={}));var Hi;(function(n){n.ownerData=new WeakMap,n.nextPID=(()=>{let r=0;return()=>`pid-${`${Math.random()}`.slice(2)}-${r++}`})();function e(r){let s=n.ownerData.get(r);return s||(s=Object.create(null),n.ownerData.set(r,s),s)}n.ensureMap=e})(Hi||(Hi={}));var as=Bt(ui()),Q0=Bt(ss()),Ie=class{constructor(e){this.sender=e}connect(e,r){return xt.connect(this,e,r)}disconnect(e,r){return xt.disconnect(this,e,r)}emit(e){xt.emit(this,e)}};(function(n){function e(h,g){xt.disconnectBetween(h,g)}n.disconnectBetween=e;function r(h){xt.disconnectSender(h)}n.disconnectSender=r;function s(h){xt.disconnectReceiver(h)}n.disconnectReceiver=s;function o(h){xt.disconnectAll(h)}n.disconnectAll=o;function l(h){xt.disconnectAll(h)}n.clearData=l;function c(){return xt.exceptionHandler}n.getExceptionHandler=c;function d(h){let g=xt.exceptionHandler;return xt.exceptionHandler=h,g}n.setExceptionHandler=d})(Ie||(Ie={}));var xt;(function(n){n.exceptionHandler=I=>{console.error(I)};function e(I,M,S){S=S||void 0;let k=h.get(I.sender);if(k||(k=[],h.set(I.sender,k)),v(k,I,M,S))return!1;let B=S||M,H=g.get(B);H||(H=[],g.set(B,H));let F={signal:I,slot:M,thisArg:S};return k.push(F),H.push(F),!0}n.connect=e;function r(I,M,S){S=S||void 0;let k=h.get(I.sender);if(!k||k.length===0)return!1;let B=v(k,I,M,S);if(!B)return!1;let H=S||M,F=g.get(H);return B.signal=null,_(k),_(F),!0}n.disconnect=r;function s(I,M){let S=h.get(I);if(!S||S.length===0)return;let k=g.get(M);if(!(!k||k.length===0)){for(let B of k)B.signal&&B.signal.sender===I&&(B.signal=null);_(S),_(k)}}n.disconnectBetween=s;function o(I){let M=h.get(I);if(!(!M||M.length===0)){for(let S of M){if(!S.signal)continue;let k=S.thisArg||S.slot;S.signal=null,_(g.get(k))}_(M)}}n.disconnectSender=o;function l(I){let M=g.get(I);if(!(!M||M.length===0)){for(let S of M){if(!S.signal)continue;let k=S.signal.sender;S.signal=null,_(h.get(k))}_(M)}}n.disconnectReceiver=l;function c(I){o(I),l(I)}n.disconnectAll=c;function d(I,M){let S=h.get(I.sender);if(!(!S||S.length===0))for(let k=0,B=S.length;k<B;++k){let H=S[k];H.signal===I&&b(H,M)}}n.emit=d;let h=new WeakMap,g=new WeakMap,m=new Set,p=typeof requestAnimationFrame=="function"?requestAnimationFrame:setImmediate;function v(I,M,S,k){return(0,as.find)(I,B=>B.signal===M&&B.slot===S&&B.thisArg===k)}function b(I,M){let{signal:S,slot:k,thisArg:B}=I;try{k.call(B,S.sender,M)}catch(H){n.exceptionHandler(H)}}function _(I){m.size===0&&p(y),m.add(I)}function y(){m.forEach(C),m.clear()}function C(I){as.ArrayExt.removeAllWhere(I,E)}function E(I){return I.signal===null}})(xt||(xt={}));var Ei=class{constructor(e){this._fn=e}get isDisposed(){return!this._fn}dispose(){if(!this._fn)return;let e=this._fn;this._fn=null,e()}};var Gn=class{constructor(){this._isDisposed=!1,this._items=new Set}get isDisposed(){return this._isDisposed}dispose(){this._isDisposed||(this._isDisposed=!0,this._items.forEach(e=>{e.dispose()}),this._items.clear())}contains(e){return this._items.has(e)}add(e){this._items.add(e)}remove(e){this._items.delete(e)}clear(){this._items.clear()}};(function(n){function e(r){let s=new n;for(let o of r)s.add(o);return s}n.from=e})(Gn||(Gn={}));var os=class extends Gn{constructor(){super(...arguments),this._disposed=new Ie(this)}get disposed(){return this._disposed}dispose(){this.isDisposed||(super.dispose(),this._disposed.emit(void 0),Ie.clearData(this))}};(function(n){function e(r){let s=new n;for(let o of r)s.add(o);return s}n.from=e})(os||(os={}));var ut=class n{constructor(e){this._onScrollFrame=()=>{if(!this._scrollTarget)return;let{element:r,edge:s,distance:o}=this._scrollTarget,l=it.SCROLL_EDGE_SIZE-o,c=Math.pow(l/it.SCROLL_EDGE_SIZE,2),d=Math.max(1,Math.round(c*it.SCROLL_EDGE_SIZE));switch(s){case"top":r.scrollTop-=d;break;case"left":r.scrollLeft-=d;break;case"right":r.scrollLeft+=d;break;case"bottom":r.scrollTop+=d;break}requestAnimationFrame(this._onScrollFrame)},this._disposed=!1,this._dropAction="none",this._override=null,this._currentTarget=null,this._currentElement=null,this._promise=null,this._scrollTarget=null,this._resolve=null,this.document=e.document||document,this.mimeData=e.mimeData,this.dragImage=e.dragImage||null,this.proposedAction=e.proposedAction||"copy",this.supportedActions=e.supportedActions||"all",this.source=e.source||null}dispose(){if(!this._disposed){if(this._disposed=!0,this._currentTarget){let e=new PointerEvent("pointerup",{bubbles:!0,cancelable:!0,clientX:-1,clientY:-1});it.dispatchDragLeave(this,this._currentTarget,null,e)}this._finalize("none")}}get isDisposed(){return this._disposed}start(e,r){if(this._disposed)return Promise.resolve("none");if(this._promise)return this._promise;this._addListeners(),this._attachDragImage(e,r),this._promise=new Promise(o=>{this._resolve=o});let s=new PointerEvent("pointermove",{bubbles:!0,cancelable:!0,clientX:e,clientY:r});return document.dispatchEvent(s),this._promise}handleEvent(e){switch(e.type){case"pointermove":this._evtPointerMove(e);break;case"pointerup":this._evtPointerUp(e);break;case"keydown":this._evtKeyDown(e);break;default:e.preventDefault(),e.stopPropagation();break}}moveDragImage(e,r){if(!this.dragImage)return;let s=this.dragImage.style;s.transform=`translate(${e}px, ${r}px)`}_evtPointerMove(e){e.preventDefault(),e.stopPropagation(),this._updateCurrentTarget(e),this._updateDragScroll(e),this.moveDragImage(e.clientX,e.clientY)}_evtPointerUp(e){if(e.preventDefault(),e.stopPropagation(),e.button!==0)return;if(this._updateCurrentTarget(e),!this._currentTarget){this._finalize("none");return}if(this._dropAction==="none"){it.dispatchDragLeave(this,this._currentTarget,null,e),this._finalize("none");return}let r=it.dispatchDrop(this,this._currentTarget,e);this._finalize(r)}_evtKeyDown(e){e.preventDefault(),e.stopPropagation(),e.keyCode===27&&this.dispose()}_addListeners(){document.addEventListener("pointerdown",this,!0),document.addEventListener("pointermove",this,!0),document.addEventListener("pointerup",this,!0),document.addEventListener("pointerenter",this,!0),document.addEventListener("pointerleave",this,!0),document.addEventListener("pointerover",this,!0),document.addEventListener("pointerout",this,!0),document.addEventListener("keydown",this,!0),document.addEventListener("keyup",this,!0),document.addEventListener("keypress",this,!0),document.addEventListener("contextmenu",this,!0)}_removeListeners(){document.removeEventListener("pointerdown",this,!0),document.removeEventListener("pointermove",this,!0),document.removeEventListener("pointerup",this,!0),document.removeEventListener("pointerenter",this,!0),document.removeEventListener("pointerleave",this,!0),document.removeEventListener("pointerover",this,!0),document.removeEventListener("pointerout",this,!0),document.removeEventListener("keydown",this,!0),document.removeEventListener("keyup",this,!0),document.removeEventListener("keypress",this,!0),document.removeEventListener("contextmenu",this,!0)}_updateDragScroll(e){let r=it.findScrollTarget(e);!this._scrollTarget&&!r||(this._scrollTarget||setTimeout(this._onScrollFrame,500),this._scrollTarget=r)}_updateCurrentTarget(e){let r=this._currentTarget,s=this._currentTarget,o=this._currentElement,l=it.findElementBehindBackdrop(e,this.document);this._currentElement=l,l!==o&&l!==s&&it.dispatchDragExit(this,s,l,e),l!==o&&l!==s&&(s=it.dispatchDragEnter(this,l,s,e)),s!==r&&(this._currentTarget=s,it.dispatchDragLeave(this,r,s,e));let c=it.dispatchDragOver(this,s,e);this._setDropAction(c)}_attachDragImage(e,r){if(!this.dragImage)return;this.dragImage.classList.add("lm-mod-drag-image");let s=this.dragImage.style;s.pointerEvents="none",s.position="fixed",s.transform=`translate(${e}px, ${r}px)`,(this.document instanceof Document?this.document.body:this.document.firstElementChild).appendChild(this.dragImage)}_detachDragImage(){if(!this.dragImage)return;let e=this.dragImage.parentNode;e&&e.removeChild(this.dragImage)}_setDropAction(e){if(e=it.validateAction(e,this.supportedActions),!(this._override&&this._dropAction===e))switch(e){case"none":this._dropAction=e,this._override=n.overrideCursor("no-drop",this.document);break;case"copy":this._dropAction=e,this._override=n.overrideCursor("copy",this.document);break;case"link":this._dropAction=e,this._override=n.overrideCursor("alias",this.document);break;case"move":this._dropAction=e,this._override=n.overrideCursor("move",this.document);break}}_finalize(e){let r=this._resolve;this._removeListeners(),this._detachDragImage(),this._override&&(this._override.dispose(),this._override=null),this.mimeData.clear(),this._disposed=!0,this._dropAction="none",this._currentTarget=null,this._currentElement=null,this._scrollTarget=null,this._promise=null,this._resolve=null,r&&r(e)}};(function(n){class e extends DragEvent{constructor(o,l){super(l.type,{bubbles:!0,cancelable:!0,altKey:o.altKey,button:o.button,clientX:o.clientX,clientY:o.clientY,ctrlKey:o.ctrlKey,detail:0,metaKey:o.metaKey,relatedTarget:l.related,screenX:o.screenX,screenY:o.screenY,shiftKey:o.shiftKey,view:window});let{drag:c}=l;this.dropAction="none",this.mimeData=c.mimeData,this.proposedAction=c.proposedAction,this.supportedActions=c.supportedActions,this.source=c.source}}n.Event=e;function r(s,o=document){return it.overrideCursor(s,o)}n.overrideCursor=r})(ut||(ut={}));var it;(function(n){n.SCROLL_EDGE_SIZE=20;function e(S,k){return p[S]&v[k]?S:"none"}n.validateAction=e;function r(S,k=document){if(S){if(s&&S==s.event)return s.element;n.cursorBackdrop.style.zIndex="-1000";let B=k.elementFromPoint(S.clientX,S.clientY);return n.cursorBackdrop.style.zIndex="",s={event:S,element:B},B}else{let B=n.cursorBackdrop.style.transform;if(o&&B===o.transform)return o.element;let H=n.cursorBackdrop.getBoundingClientRect();n.cursorBackdrop.style.zIndex="-1000";let F=k.elementFromPoint(H.left+H.width/2,H.top+H.height/2);return n.cursorBackdrop.style.zIndex="",o={transform:B,element:F},F}}n.findElementBehindBackdrop=r;let s=null,o=null;function l(S){let k=S.clientX,B=S.clientY,H=r(S);for(;H;H=H.parentElement){if(!H.hasAttribute("data-lm-dragscroll"))continue;let F=0,J=0;H===document.body&&(F=window.pageXOffset,J=window.pageYOffset);let D=H.getBoundingClientRect(),$=D.top+J,G=D.left+F,Q=G+D.width,ue=$+D.height;if(k<G||k>=Q||B<$||B>=ue)continue;let _e=k-G+1,ce=B-$+1,xe=Q-k,Ee=ue-B,be=Math.min(_e,ce,xe,Ee);if(be>n.SCROLL_EDGE_SIZE)continue;let ke;switch(be){case Ee:ke="bottom";break;case ce:ke="top";break;case xe:ke="right";break;case _e:ke="left";break;default:throw"unreachable"}let ze=H.scrollWidth-H.clientWidth,He=H.scrollHeight-H.clientHeight,Re;switch(ke){case"top":Re=He>0&&H.scrollTop>0;break;case"left":Re=ze>0&&H.scrollLeft>0;break;case"right":Re=ze>0&&H.scrollLeft<ze;break;case"bottom":Re=He>0&&H.scrollTop<He;break;default:throw"unreachable"}if(Re)return{element:H,edge:ke,distance:be}}return null}n.findScrollTarget=l;function c(S,k,B,H){if(!k)return null;let F=new ut.Event(H,{drag:S,related:B,type:"lm-dragenter"});if(!k.dispatchEvent(F))return k;let D=S.document instanceof Document?S.document.body:S.document.firstElementChild;return k===D?B:(F=new ut.Event(H,{drag:S,related:B,type:"lm-dragenter"}),D.dispatchEvent(F),D)}n.dispatchDragEnter=c;function d(S,k,B,H){if(!k)return;let F=new ut.Event(H,{drag:S,related:B,type:"lm-dragexit"});k.dispatchEvent(F)}n.dispatchDragExit=d;function h(S,k,B,H){if(!k)return;let F=new ut.Event(H,{drag:S,related:B,type:"lm-dragleave"});k.dispatchEvent(F)}n.dispatchDragLeave=h;function g(S,k,B){if(!k)return"none";let H=new ut.Event(B,{drag:S,related:null,type:"lm-dragover"});return k.dispatchEvent(H)?"none":H.dropAction}n.dispatchDragOver=g;function m(S,k,B){if(!k)return"none";let H=new ut.Event(B,{drag:S,related:null,type:"lm-drop"});return k.dispatchEvent(H)?"none":H.dropAction}n.dispatchDrop=m;let p={none:0,copy:1,link:2,move:4},v={none:p.none,copy:p.copy,link:p.link,move:p.move,"copy-link":p.copy|p.link,"copy-move":p.copy|p.move,"link-move":p.link|p.move,all:p.copy|p.link|p.move};function b(S,k=document){let B=++M,H=k instanceof Document?k.body:k.firstElementChild;return n.cursorBackdrop.isConnected||(n.cursorBackdrop.style.transform="scale(0)",H.appendChild(n.cursorBackdrop),C(),document.addEventListener("pointermove",_,{capture:!0,passive:!0}),n.cursorBackdrop.addEventListener("scroll",y,{capture:!0,passive:!0})),n.cursorBackdrop.style.cursor=S,new Ei(()=>{B===M&&n.cursorBackdrop.isConnected&&(document.removeEventListener("pointermove",_,!0),n.cursorBackdrop.removeEventListener("scroll",y,!0),H.removeChild(n.cursorBackdrop))})}n.overrideCursor=b;function _(S){n.cursorBackdrop&&(n.cursorBackdrop.style.transform=`translate(${S.clientX}px, ${S.clientY}px)`)}function y(S){if(!n.cursorBackdrop)return;let k=r();if(!k)return;let B=k.closest("[data-lm-dragscroll]");B&&(B.scrollTop+=n.cursorBackdrop.scrollTop-E,B.scrollLeft+=n.cursorBackdrop.scrollLeft-E,C())}function C(){n.cursorBackdrop.scrollTop=E,n.cursorBackdrop.scrollLeft=E}let E=500;function I(){let S=document.createElement("div");return S.classList.add("lm-cursor-backdrop"),S}let M=0;n.cursorBackdrop=I()})(it||(it={}));var bd=Bt(ui()),Je=Bt(ss());function mn(){return Za.keyboardLayout}var Yn=class n{constructor(e,r,s=[]){this.name=e,this._codes=r,this._keys=n.extractKeys(r),this._modifierKeys=n.convertToKeySet(s)}keys(){return Object.keys(this._keys)}isValidKey(e){return e in this._keys}isModifierKey(e){return e in this._modifierKeys}keyForKeydownEvent(e){return this._codes[e.keyCode]||""}};(function(n){function e(s){let o=Object.create(null);for(let l in s)o[s[l]]=!0;return o}n.extractKeys=e;function r(s){let o=Object(null);for(let l=0,c=s.length;l<c;++l)o[s[l]]=!0;return o}n.convertToKeySet=r})(Yn||(Yn={}));var ex=new Yn("en-us",{8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",27:"Escape",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Meta",93:"ContextMenu",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Meta"},["Shift","Ctrl","Alt","Meta"]),Za;(function(n){n.keyboardLayout=ex})(Za||(Za={}));var Mt=class n{constructor(){this._timerID=0,this._timerModifierID=0,this._replaying=!1,this._keystrokes=[],this._keydownEvents=[],this._keyBindings=[],this._exactKeyMatch=null,this._commands=new Map,this._commandChanged=new Ie(this),this._commandExecuted=new Ie(this),this._keyBindingChanged=new Ie(this),this._holdKeyBindingPromises=new Map}get commandChanged(){return this._commandChanged}get commandExecuted(){return this._commandExecuted}get keyBindingChanged(){return this._keyBindingChanged}get keyBindings(){return this._keyBindings}listCommands(){return Array.from(this._commands.keys())}hasCommand(e){return this._commands.has(e)}addCommand(e,r){if(this._commands.has(e))throw new Error(`Command '${e}' already registered.`);return this._commands.set(e,Ft.createCommand(r)),this._commandChanged.emit({id:e,type:"added"}),new Ei(()=>{this._commands.delete(e),this._commandChanged.emit({id:e,type:"removed"})})}notifyCommandChanged(e){if(e!==void 0&&!this._commands.has(e))throw new Error(`Command '${e}' is not registered.`);this._commandChanged.emit({id:e,type:e?"changed":"many-changed"})}describedBy(e,r=Je.JSONExt.emptyObject){var s;let o=this._commands.get(e);return Promise.resolve((s=o?.describedBy.call(void 0,r))!==null&&s!==void 0?s:{args:null})}label(e,r=Je.JSONExt.emptyObject){var s;let o=this._commands.get(e);return(s=o?.label.call(void 0,r))!==null&&s!==void 0?s:""}mnemonic(e,r=Je.JSONExt.emptyObject){let s=this._commands.get(e);return s?s.mnemonic.call(void 0,r):-1}icon(e,r=Je.JSONExt.emptyObject){var s;return(s=this._commands.get(e))===null||s===void 0?void 0:s.icon.call(void 0,r)}iconClass(e,r=Je.JSONExt.emptyObject){let s=this._commands.get(e);return s?s.iconClass.call(void 0,r):""}iconLabel(e,r=Je.JSONExt.emptyObject){let s=this._commands.get(e);return s?s.iconLabel.call(void 0,r):""}caption(e,r=Je.JSONExt.emptyObject){let s=this._commands.get(e);return s?s.caption.call(void 0,r):""}usage(e,r=Je.JSONExt.emptyObject){let s=this._commands.get(e);return s?s.usage.call(void 0,r):""}className(e,r=Je.JSONExt.emptyObject){let s=this._commands.get(e);return s?s.className.call(void 0,r):""}dataset(e,r=Je.JSONExt.emptyObject){let s=this._commands.get(e);return s?s.dataset.call(void 0,r):{}}isEnabled(e,r=Je.JSONExt.emptyObject){let s=this._commands.get(e);return s?s.isEnabled.call(void 0,r):!1}isToggled(e,r=Je.JSONExt.emptyObject){let s=this._commands.get(e);return s?s.isToggled.call(void 0,r):!1}isToggleable(e,r=Je.JSONExt.emptyObject){let s=this._commands.get(e);return s?s.isToggleable:!1}isVisible(e,r=Je.JSONExt.emptyObject){let s=this._commands.get(e);return s?s.isVisible.call(void 0,r):!1}execute(e,r=Je.JSONExt.emptyObject){let s=this._commands.get(e);if(!s)return Promise.reject(new Error(`Command '${e}' not registered.`));let o;try{o=s.execute.call(void 0,r)}catch(c){o=Promise.reject(c)}let l=Promise.resolve(o);return this._commandExecuted.emit({id:e,args:r,result:l}),l}addKeyBinding(e){let r=Ft.createKeyBinding(e);return this._keyBindings.push(r),this._keyBindingChanged.emit({binding:r,type:"added"}),new Ei(()=>{bd.ArrayExt.removeFirstOf(this._keyBindings,r),this._keyBindingChanged.emit({binding:r,type:"removed"})})}processKeydownEvent(e){if(e.defaultPrevented||this._replaying)return;let r=n.keystrokeForKeydownEvent(e);if(!r){this._replayKeydownEvents(),this._clearPendingState();return}if(n.isModifierKeyPressed(e)){let{exact:c}=Ft.matchKeyBinding(this._keyBindings,[r],e);c?(e.preventDefault(),e.stopPropagation(),this._startModifierTimer(c)):this._clearModifierTimer();return}this._keystrokes.push(r);let{exact:s,partial:o}=Ft.matchKeyBinding(this._keyBindings,this._keystrokes,e),l=o.length!==0;if(!s&&!l){this._replayKeydownEvents(),this._clearPendingState();return}if((s?.preventDefault||o.some(c=>c.preventDefault))&&(e.preventDefault(),e.stopPropagation()),this._keydownEvents.push(e),s&&!l){this._executeKeyBinding(s),this._clearPendingState();return}s&&(this._exactKeyMatch=s),this._startTimer()}holdKeyBindingExecution(e,r){this._holdKeyBindingPromises.set(e,r)}processKeyupEvent(e){this._clearModifierTimer()}_startModifierTimer(e){this._clearModifierTimer(),this._timerModifierID=window.setTimeout(()=>{this._executeKeyBinding(e)},Ft.modifierkeyTimeOut)}_clearModifierTimer(){this._timerModifierID!==0&&(clearTimeout(this._timerModifierID),this._timerModifierID=0)}_startTimer(){this._clearTimer(),this._timerID=window.setTimeout(()=>{this._onPendingTimeout()},Ft.CHORD_TIMEOUT)}_clearTimer(){this._timerID!==0&&(clearTimeout(this._timerID),this._timerID=0)}_replayKeydownEvents(){this._keydownEvents.length!==0&&(this._replaying=!0,this._keydownEvents.forEach(Ft.replayKeyEvent),this._replaying=!1)}async _executeKeyBinding(e){if(this._holdKeyBindingPromises.size!==0){let l=[...this._keydownEvents],c=(await Promise.race([Promise.all(l.map(async d=>{var h;return(h=this._holdKeyBindingPromises.get(d))!==null&&h!==void 0?h:Promise.resolve(!0)})),new Promise(d=>{setTimeout(()=>d([!1]),Ft.KEYBINDING_HOLD_TIMEOUT)})])).every(Boolean);if(this._holdKeyBindingPromises.clear(),!c)return}let{command:r,args:s}=e,o={_luminoEvent:{type:"keybinding",keys:e.keys},...s};if(!this.hasCommand(r)||!this.isEnabled(r,o)){let l=this.hasCommand(r)?"enabled":"registered",d=`Cannot execute key binding '${e.keys.join(", ")}':`,h=`command '${r}' is not ${l}.`;console.warn(`${d} ${h}`);return}await this.execute(r,o)}_clearPendingState(){this._clearTimer(),this._clearModifierTimer(),this._exactKeyMatch=null,this._keystrokes.length=0,this._keydownEvents.length=0}_onPendingTimeout(){this._timerID=0,this._exactKeyMatch?this._executeKeyBinding(this._exactKeyMatch):this._replayKeydownEvents(),this._clearPendingState()}};(function(n){function e(d){let h="",g=!1,m=!1,p=!1,v=!1;for(let b of d.split(/\s+/))b==="Accel"?tt.IS_MAC?m=!0:p=!0:b==="Alt"?g=!0:b==="Cmd"?m=!0:b==="Ctrl"?p=!0:b==="Shift"?v=!0:b.length>0&&(h=b);return{cmd:m,ctrl:p,alt:g,shift:v,key:h}}n.parseKeystroke=e;function r(d){let h="",g=e(d);return g.ctrl&&(h+="Ctrl "),g.alt&&(h+="Alt "),g.shift&&(h+="Shift "),g.cmd&&tt.IS_MAC&&(h+="Cmd "),g.key?h+g.key:h.trim()}n.normalizeKeystroke=r;function s(d){let h;return tt.IS_WIN?h=d.winKeys||d.keys:tt.IS_MAC?h=d.macKeys||d.keys:h=d.linuxKeys||d.keys,h.map(r)}n.normalizeKeys=s;function o(d){return typeof d=="string"?h(d):d.map(h).join(", ");function h(g){let m=[],p=tt.IS_MAC?" ":"+",v=e(g);return v.ctrl&&m.push("Ctrl"),v.alt&&m.push("Alt"),v.shift&&m.push("Shift"),tt.IS_MAC&&v.cmd&&m.push("Cmd"),m.push(v.key),m.map(Ft.formatKey).join(p)}}n.formatKeystroke=o;function l(d){let h=mn(),g=h.keyForKeydownEvent(d);return h.isModifierKey(g)}n.isModifierKeyPressed=l;function c(d){let h=mn(),g=h.keyForKeydownEvent(d),m=[];return d.ctrlKey&&m.push("Ctrl"),d.altKey&&m.push("Alt"),d.shiftKey&&m.push("Shift"),d.metaKey&&tt.IS_MAC&&m.push("Cmd"),h.isModifierKey(g)||m.push(g),m.join(" ")}n.keystrokeForKeydownEvent=c})(Mt||(Mt={}));var Ft;(function(n){n.CHORD_TIMEOUT=1e3,n.KEYBINDING_HOLD_TIMEOUT=1e3,n.modifierkeyTimeOut=500;function e(M){return{execute:M.execute,describedBy:_(typeof M.describedBy=="function"?M.describedBy:{args:null,...M.describedBy},()=>({args:null})),label:_(M.label,h),mnemonic:_(M.mnemonic,g),icon:_(M.icon,b),iconClass:_(M.iconClass,h),iconLabel:_(M.iconLabel,h),caption:_(M.caption,h),usage:_(M.usage,h),className:_(M.className,h),dataset:_(M.dataset,v),isEnabled:M.isEnabled||m,isToggled:M.isToggled||p,isToggleable:M.isToggleable||!!M.isToggled,isVisible:M.isVisible||m}}n.createCommand=e;function r(M){var S;return{keys:Mt.normalizeKeys(M),selector:y(M),command:M.command,args:M.args||Je.JSONExt.emptyObject,preventDefault:(S=M.preventDefault)!==null&&S!==void 0?S:!0}}n.createKeyBinding=r;function s(M,S,k){let B=null,H=[],F=1/0,J=0;for(let D=0,$=M.length;D<$;++D){let G=M[D],Q=C(G.keys,S);if(Q===0)continue;if(Q===2){E(G.selector,k)!==-1&&H.push(G);continue}let ue=E(G.selector,k);if(ue===-1||ue>F)continue;let _e=Ht.calculateSpecificity(G.selector);(!B||ue<F||_e>=J)&&(B=G,F=ue,J=_e)}return{exact:B,partial:H}}n.matchKeyBinding=s;function o(M){M.target.dispatchEvent(I(M))}n.replayKeyEvent=o;function l(M){return tt.IS_MAC?c.hasOwnProperty(M)?c[M]:M:d.hasOwnProperty(M)?d[M]:M}n.formatKey=l;let c={Backspace:"\u232B",Tab:"\u21E5",Enter:"\u23CE",Shift:"\u21E7",Ctrl:"\u2303",Alt:"\u2325",Escape:"\u238B",PageUp:"\u21DE",PageDown:"\u21DF",End:"\u2198",Home:"\u2196",ArrowLeft:"\u2190",ArrowUp:"\u2191",ArrowRight:"\u2192",ArrowDown:"\u2193",Delete:"\u2326",Cmd:"\u2318"},d={Escape:"Esc",PageUp:"Page Up",PageDown:"Page Down",ArrowLeft:"Left",ArrowUp:"Up",ArrowRight:"Right",ArrowDown:"Down",Delete:"Del"},h=()=>"",g=()=>-1,m=()=>!0,p=()=>!1,v=()=>({}),b=()=>{};function _(M,S){return M===void 0?S:typeof M=="function"?M:()=>M}function y(M){if(M.selector.indexOf(",")!==-1)throw new Error(`Selector cannot contain commas: ${M.selector}`);if(!Ht.isValid(M.selector))throw new Error(`Invalid selector: ${M.selector}`);return M.selector}function C(M,S){if(M.length<S.length)return 0;for(let k=0,B=S.length;k<B;++k)if(M[k]!==S[k])return 0;return M.length>S.length?2:1}function E(M,S){let k=S.target,B=S.currentTarget;for(let H=0;k!==null;k=k.parentElement,++H){if(k.hasAttribute("data-lm-suppress-shortcuts"))return-1;if(Ht.matches(k,M))return H;if(k===B)return-1}return-1}function I(M){let S=document.createEvent("Event"),k=M.bubbles||!0,B=M.cancelable||!0;return S.initEvent(M.type||"keydown",k,B),S.key=M.key||"",S.keyCode=M.keyCode||0,S.which=M.keyCode||0,S.ctrlKey=M.ctrlKey||!1,S.altKey=M.altKey||!1,S.shiftKey=M.shiftKey||!1,S.metaKey=M.metaKey||!1,S.view=M.view||window,S}})(Ft||(Ft={}));var pn=Bt(ui()),gn=class{constructor(e){this.type="text",this.content=e}},Xn=class{constructor(e,r,s,o){this.type="element",this.tag=e,this.attrs=r,this.children=s,this.renderer=o}};function fe(n){let e={},r,s=[];for(let l=1,c=arguments.length;l<c;++l){let d=arguments[l];typeof d=="string"?s.push(new gn(d)):d instanceof gn||d instanceof Xn?s.push(d):d instanceof Array?o(s,d):(l===1||l===2)&&d&&typeof d=="object"&&("render"in d?r=d:e=d)}return new Xn(n,e,s,r);function o(l,c){for(let d of c)typeof d=="string"?l.push(new gn(d)):(d instanceof gn||d instanceof Xn)&&l.push(d)}}(function(n){n.a=n.bind(void 0,"a"),n.abbr=n.bind(void 0,"abbr"),n.address=n.bind(void 0,"address"),n.area=n.bind(void 0,"area"),n.article=n.bind(void 0,"article"),n.aside=n.bind(void 0,"aside"),n.audio=n.bind(void 0,"audio"),n.b=n.bind(void 0,"b"),n.bdi=n.bind(void 0,"bdi"),n.bdo=n.bind(void 0,"bdo"),n.blockquote=n.bind(void 0,"blockquote"),n.br=n.bind(void 0,"br"),n.button=n.bind(void 0,"button"),n.canvas=n.bind(void 0,"canvas"),n.caption=n.bind(void 0,"caption"),n.cite=n.bind(void 0,"cite"),n.code=n.bind(void 0,"code"),n.col=n.bind(void 0,"col"),n.colgroup=n.bind(void 0,"colgroup"),n.data=n.bind(void 0,"data"),n.datalist=n.bind(void 0,"datalist"),n.dd=n.bind(void 0,"dd"),n.del=n.bind(void 0,"del"),n.dfn=n.bind(void 0,"dfn"),n.div=n.bind(void 0,"div"),n.dl=n.bind(void 0,"dl"),n.dt=n.bind(void 0,"dt"),n.em=n.bind(void 0,"em"),n.embed=n.bind(void 0,"embed"),n.fieldset=n.bind(void 0,"fieldset"),n.figcaption=n.bind(void 0,"figcaption"),n.figure=n.bind(void 0,"figure"),n.footer=n.bind(void 0,"footer"),n.form=n.bind(void 0,"form"),n.h1=n.bind(void 0,"h1"),n.h2=n.bind(void 0,"h2"),n.h3=n.bind(void 0,"h3"),n.h4=n.bind(void 0,"h4"),n.h5=n.bind(void 0,"h5"),n.h6=n.bind(void 0,"h6"),n.header=n.bind(void 0,"header"),n.hr=n.bind(void 0,"hr"),n.i=n.bind(void 0,"i"),n.iframe=n.bind(void 0,"iframe"),n.img=n.bind(void 0,"img"),n.input=n.bind(void 0,"input"),n.ins=n.bind(void 0,"ins"),n.kbd=n.bind(void 0,"kbd"),n.label=n.bind(void 0,"label"),n.legend=n.bind(void 0,"legend"),n.li=n.bind(void 0,"li"),n.main=n.bind(void 0,"main"),n.map=n.bind(void 0,"map"),n.mark=n.bind(void 0,"mark"),n.meter=n.bind(void 0,"meter"),n.nav=n.bind(void 0,"nav"),n.noscript=n.bind(void 0,"noscript"),n.object=n.bind(void 0,"object"),n.ol=n.bind(void 0,"ol"),n.optgroup=n.bind(void 0,"optgroup"),n.option=n.bind(void 0,"option"),n.output=n.bind(void 0,"output"),n.p=n.bind(void 0,"p"),n.param=n.bind(void 0,"param"),n.pre=n.bind(void 0,"pre"),n.progress=n.bind(void 0,"progress"),n.q=n.bind(void 0,"q"),n.rp=n.bind(void 0,"rp"),n.rt=n.bind(void 0,"rt"),n.ruby=n.bind(void 0,"ruby"),n.s=n.bind(void 0,"s"),n.samp=n.bind(void 0,"samp"),n.section=n.bind(void 0,"section"),n.select=n.bind(void 0,"select"),n.small=n.bind(void 0,"small"),n.source=n.bind(void 0,"source"),n.span=n.bind(void 0,"span"),n.strong=n.bind(void 0,"strong"),n.sub=n.bind(void 0,"sub"),n.summary=n.bind(void 0,"summary"),n.sup=n.bind(void 0,"sup"),n.table=n.bind(void 0,"table"),n.tbody=n.bind(void 0,"tbody"),n.td=n.bind(void 0,"td"),n.textarea=n.bind(void 0,"textarea"),n.tfoot=n.bind(void 0,"tfoot"),n.th=n.bind(void 0,"th"),n.thead=n.bind(void 0,"thead"),n.time=n.bind(void 0,"time"),n.title=n.bind(void 0,"title"),n.tr=n.bind(void 0,"tr"),n.track=n.bind(void 0,"track"),n.u=n.bind(void 0,"u"),n.ul=n.bind(void 0,"ul"),n.var_=n.bind(void 0,"var"),n.video=n.bind(void 0,"video"),n.wbr=n.bind(void 0,"wbr")})(fe||(fe={}));var Ut;(function(n){function e(s){return Fi.createDOMNode(s)}n.realize=e;function r(s,o){let l=Fi.hostMap.get(o)||[],c=Fi.asContentArray(s);Fi.hostMap.set(o,c),Fi.updateContent(o,l,c)}n.render=r})(Ut||(Ut={}));var Fi;(function(n){n.hostMap=new WeakMap;function e(b){return b?b instanceof Array?b:[b]:[]}n.asContentArray=e;function r(b){let _=arguments[1]||null,y=arguments[2]||null;if(_)_.insertBefore(r(b),y);else{if(b.type==="text")return document.createTextNode(b.content);if(_=document.createElement(b.tag),c(_,b.attrs),b.renderer)return b.renderer.render(_,{attrs:b.attrs,children:b.children}),_;for(let C=0,E=b.children.length;C<E;++C)r(b.children[C],_)}return _}n.createDOMNode=r;function s(b,_,y){if(_===y)return;let C=v(b,_),E=_.slice(),I=b.firstChild,M=y.length;for(let S=0;S<M;++S){if(S>=E.length){r(y[S],b);continue}let k=E[S],B=y[S];if(k===B){I=I.nextSibling;continue}if(k.type==="text"&&B.type==="text"){I.textContent!==B.content&&(I.textContent=B.content),I=I.nextSibling;continue}if(k.type==="text"||B.type==="text"){pn.ArrayExt.insert(E,S,B),r(B,b,I);continue}if(!k.renderer!=!B.renderer){pn.ArrayExt.insert(E,S,B),r(B,b,I);continue}let H=B.attrs.key;if(H&&H in C){let J=C[H];J.vNode!==k&&(pn.ArrayExt.move(E,E.indexOf(J.vNode,S+1),S),b.insertBefore(J.element,I),k=J.vNode,I=J.element)}if(k===B){I=I.nextSibling;continue}let F=k.attrs.key;if(F&&F!==H){pn.ArrayExt.insert(E,S,B),r(B,b,I);continue}if(k.tag!==B.tag){pn.ArrayExt.insert(E,S,B),r(B,b,I);continue}d(I,k.attrs,B.attrs),B.renderer?B.renderer.render(I,{attrs:B.attrs,children:B.children}):s(I,k.children,B.children),I=I.nextSibling}o(b,E,M,!0)}n.updateContent=s;function o(b,_,y,C){for(let E=_.length-1;E>=y;--E){let I=_[E],M=C?b.lastChild:b.childNodes[E];I.type==="text"||(I.renderer&&I.renderer.unrender?I.renderer.unrender(M,{attrs:I.attrs,children:I.children}):o(M,I.children,0,!1)),C&&b.removeChild(M)}}let l={key:!0,className:!0,htmlFor:!0,dataset:!0,style:!0};function c(b,_){for(let y in _)y in l||(y.substr(0,2)==="on"?b[y]=_[y]:b.setAttribute(y,_[y]));_.className!==void 0&&b.setAttribute("class",_.className),_.htmlFor!==void 0&&b.setAttribute("for",_.htmlFor),_.dataset&&h(b,_.dataset),_.style&&m(b,_.style)}function d(b,_,y){if(_===y)return;let C;for(C in _)C in l||C in y||(C.substr(0,2)==="on"?b[C]=null:b.removeAttribute(C));for(C in y)C in l||_[C]===y[C]||(C.substr(0,2)==="on"?b[C]=y[C]:b.setAttribute(C,y[C]));_.className!==y.className&&(y.className!==void 0?b.setAttribute("class",y.className):b.removeAttribute("class")),_.htmlFor!==y.htmlFor&&(y.htmlFor!==void 0?b.setAttribute("for",y.htmlFor):b.removeAttribute("for")),_.dataset!==y.dataset&&g(b,_.dataset||{},y.dataset||{}),_.style!==y.style&&p(b,_.style||{},y.style||{})}function h(b,_){for(let y in _)b.setAttribute(`data-${y}`,_[y])}function g(b,_,y){for(let C in _)C in y||b.removeAttribute(`data-${C}`);for(let C in y)_[C]!==y[C]&&b.setAttribute(`data-${C}`,y[C])}function m(b,_){let y=b.style,C;for(C in _)y[C]=_[C]}function p(b,_,y){let C=b.style,E;for(E in _)E in y||(C[E]="");for(E in y)_[E]!==y[E]&&(C[E]=y[E])}function v(b,_){let y=b.firstChild,C=Object.create(null);for(let E of _)E.type==="element"&&E.attrs.key&&(C[E.attrs.key]={vNode:E,element:y}),y=y.nextSibling;return C}})(Fi||(Fi={}));var Xt=class{constructor(){this.sizeHint=0,this.minSize=0,this.maxSize=1/0,this.stretch=1,this.size=0,this.done=!1}},Ct;(function(n){function e(l,c){let d=l.length;if(d===0)return c;let h=0,g=0,m=0,p=0,v=0;for(let y=0;y<d;++y){let C=l[y],E=C.minSize,I=C.maxSize,M=C.sizeHint;C.done=!1,C.size=Math.max(E,Math.min(M,I)),m+=C.size,h+=E,g+=I,C.stretch>0&&(p+=C.stretch,v++)}if(c===m)return 0;if(c<=h){for(let y=0;y<d;++y){let C=l[y];C.size=C.minSize}return c-h}if(c>=g){for(let y=0;y<d;++y){let C=l[y];C.size=C.maxSize}return c-g}let b=.01,_=d;if(c<m){let y=m-c;for(;v>0&&y>b;){let C=y,E=p;for(let I=0;I<d;++I){let M=l[I];if(M.done||M.stretch===0)continue;let S=M.stretch*C/E;M.size-S<=M.minSize?(y-=M.size-M.minSize,p-=M.stretch,M.size=M.minSize,M.done=!0,_--,v--):(y-=S,M.size-=S)}}for(;_>0&&y>b;){let C=y/_;for(let E=0;E<d;++E){let I=l[E];I.done||(I.size-C<=I.minSize?(y-=I.size-I.minSize,I.size=I.minSize,I.done=!0,_--):(y-=C,I.size-=C))}}}else{let y=c-m;for(;v>0&&y>b;){let C=y,E=p;for(let I=0;I<d;++I){let M=l[I];if(M.done||M.stretch===0)continue;let S=M.stretch*C/E;M.size+S>=M.maxSize?(y-=M.maxSize-M.size,p-=M.stretch,M.size=M.maxSize,M.done=!0,_--,v--):(y-=S,M.size+=S)}}for(;_>0&&y>b;){let C=y/_;for(let E=0;E<d;++E){let I=l[E];I.done||(I.size+C>=I.maxSize?(y-=I.maxSize-I.size,I.size=I.maxSize,I.done=!0,_--):(y-=C,I.size+=C))}}}return 0}n.calc=e;function r(l,c,d){l.length===0||d===0||(d>0?s(l,c,d):o(l,c,-d))}n.adjust=r;function s(l,c,d){let h=0;for(let v=0;v<=c;++v){let b=l[v];h+=b.maxSize-b.size}let g=0;for(let v=c+1,b=l.length;v<b;++v){let _=l[v];g+=_.size-_.minSize}d=Math.min(d,h,g);let m=d;for(let v=c;v>=0&&m>0;--v){let b=l[v],_=b.maxSize-b.size;_>=m?(b.sizeHint=b.size+m,m=0):(b.sizeHint=b.size+_,m-=_)}let p=d;for(let v=c+1,b=l.length;v<b&&p>0;++v){let _=l[v],y=_.size-_.minSize;y>=p?(_.sizeHint=_.size-p,p=0):(_.sizeHint=_.size-y,p-=y)}}function o(l,c,d){let h=0;for(let v=c+1,b=l.length;v<b;++v){let _=l[v];h+=_.maxSize-_.size}let g=0;for(let v=0;v<=c;++v){let b=l[v];g+=b.size-b.minSize}d=Math.min(d,h,g);let m=d;for(let v=c+1,b=l.length;v<b&&m>0;++v){let _=l[v],y=_.maxSize-_.size;y>=m?(_.sizeHint=_.size+m,m=0):(_.sizeHint=_.size+y,m-=y)}let p=d;for(let v=c;v>=0&&p>0;--v){let b=l[v],_=b.size-b.minSize;_>=p?(b.sizeHint=b.size-p,p=0):(b.sizeHint=b.size-_,p-=_)}}})(Ct||(Ct={}));var Zn=class{constructor(e){this._label="",this._caption="",this._mnemonic=-1,this._icon=void 0,this._iconClass="",this._iconLabel="",this._className="",this._closable=!1,this._changed=new Ie(this),this._isDisposed=!1,this.owner=e.owner,e.label!==void 0&&(this._label=e.label),e.mnemonic!==void 0&&(this._mnemonic=e.mnemonic),e.icon!==void 0&&(this._icon=e.icon),e.iconClass!==void 0&&(this._iconClass=e.iconClass),e.iconLabel!==void 0&&(this._iconLabel=e.iconLabel),e.caption!==void 0&&(this._caption=e.caption),e.className!==void 0&&(this._className=e.className),e.closable!==void 0&&(this._closable=e.closable),this._dataset=e.dataset||{}}get changed(){return this._changed}get label(){return this._label}set label(e){this._label!==e&&(this._label=e,this._changed.emit(void 0))}get mnemonic(){return this._mnemonic}set mnemonic(e){this._mnemonic!==e&&(this._mnemonic=e,this._changed.emit(void 0))}get icon(){return this._icon}set icon(e){this._icon!==e&&(this._icon=e,this._changed.emit(void 0))}get iconClass(){return this._iconClass}set iconClass(e){this._iconClass!==e&&(this._iconClass=e,this._changed.emit(void 0))}get iconLabel(){return this._iconLabel}set iconLabel(e){this._iconLabel!==e&&(this._iconLabel=e,this._changed.emit(void 0))}get caption(){return this._caption}set caption(e){this._caption!==e&&(this._caption=e,this._changed.emit(void 0))}get className(){return this._className}set className(e){this._className!==e&&(this._className=e,this._changed.emit(void 0))}get closable(){return this._closable}set closable(e){this._closable!==e&&(this._closable=e,this._changed.emit(void 0))}get dataset(){return this._dataset}set dataset(e){this._dataset!==e&&(this._dataset=e,this._changed.emit(void 0))}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,Ie.clearData(this))}},j=class n{constructor(e={}){this._flags=0,this._layout=null,this._parent=null,this._disposed=new Ie(this),this._hiddenMode=n.HiddenMode.Display,this.node=ls.createNode(e),this.addClass("lm-Widget")}dispose(){this.isDisposed||(this.setFlag(n.Flag.IsDisposed),this._disposed.emit(void 0),this.parent?this.parent=null:this.isAttached&&n.detach(this),this._layout&&(this._layout.dispose(),this._layout=null),this.title.dispose(),Ie.clearData(this),Z.clearData(this),lt.clearData(this))}get disposed(){return this._disposed}get isDisposed(){return this.testFlag(n.Flag.IsDisposed)}get isAttached(){return this.testFlag(n.Flag.IsAttached)}get isHidden(){return this.testFlag(n.Flag.IsHidden)}get isVisible(){return this.testFlag(n.Flag.IsVisible)}get title(){return ls.titleProperty.get(this)}get id(){return this.node.id}set id(e){this.node.id=e}get dataset(){return this.node.dataset}get hiddenMode(){return this._hiddenMode}set hiddenMode(e){this._hiddenMode!==e&&(this.isHidden&&this._toggleHidden(!1),e==n.HiddenMode.Scale?this.node.style.willChange="transform":this.node.style.willChange="auto",this._hiddenMode=e,this.isHidden&&this._toggleHidden(!0))}get parent(){return this._parent}set parent(e){if(this._parent!==e){if(e&&this.contains(e))throw new Error("Invalid parent widget.");if(this._parent&&!this._parent.isDisposed){let r=new n.ChildMessage("child-removed",this);Z.sendMessage(this._parent,r)}if(this._parent=e,this._parent&&!this._parent.isDisposed){let r=new n.ChildMessage("child-added",this);Z.sendMessage(this._parent,r)}this.isDisposed||Z.sendMessage(this,n.Msg.ParentChanged)}}get layout(){return this._layout}set layout(e){if(this._layout!==e){if(this.testFlag(n.Flag.DisallowLayout))throw new Error("Cannot set widget layout.");if(this._layout)throw new Error("Cannot change widget layout.");if(e.parent)throw new Error("Cannot change layout parent.");this._layout=e,e.parent=this}}*children(){this._layout&&(yield*this._layout)}contains(e){for(let r=e;r;r=r._parent)if(r===this)return!0;return!1}hasClass(e){return this.node.classList.contains(e)}addClass(e){this.node.classList.add(e)}removeClass(e){this.node.classList.remove(e)}toggleClass(e,r){return r===!0?(this.node.classList.add(e),!0):r===!1?(this.node.classList.remove(e),!1):this.node.classList.toggle(e)}update(){Z.postMessage(this,n.Msg.UpdateRequest)}fit(){Z.postMessage(this,n.Msg.FitRequest)}activate(){Z.postMessage(this,n.Msg.ActivateRequest)}close(){Z.sendMessage(this,n.Msg.CloseRequest)}show(){if(this.testFlag(n.Flag.IsHidden)&&(this.isAttached&&(!this.parent||this.parent.isVisible)&&Z.sendMessage(this,n.Msg.BeforeShow),this.clearFlag(n.Flag.IsHidden),this._toggleHidden(!1),this.isAttached&&(!this.parent||this.parent.isVisible)&&Z.sendMessage(this,n.Msg.AfterShow),this.parent)){let e=new n.ChildMessage("child-shown",this);Z.sendMessage(this.parent,e)}}hide(){if(!this.testFlag(n.Flag.IsHidden)&&(this.isAttached&&(!this.parent||this.parent.isVisible)&&Z.sendMessage(this,n.Msg.BeforeHide),this.setFlag(n.Flag.IsHidden),this._toggleHidden(!0),this.isAttached&&(!this.parent||this.parent.isVisible)&&Z.sendMessage(this,n.Msg.AfterHide),this.parent)){let e=new n.ChildMessage("child-hidden",this);Z.sendMessage(this.parent,e)}}setHidden(e){e?this.hide():this.show()}testFlag(e){return(this._flags&e)!==0}setFlag(e){this._flags|=e}clearFlag(e){this._flags&=~e}processMessage(e){switch(e.type){case"resize":this.notifyLayout(e),this.onResize(e);break;case"update-request":this.notifyLayout(e),this.onUpdateRequest(e);break;case"fit-request":this.notifyLayout(e),this.onFitRequest(e);break;case"before-show":this.notifyLayout(e),this.onBeforeShow(e);break;case"after-show":this.setFlag(n.Flag.IsVisible),this.notifyLayout(e),this.onAfterShow(e);break;case"before-hide":this.notifyLayout(e),this.onBeforeHide(e);break;case"after-hide":this.clearFlag(n.Flag.IsVisible),this.notifyLayout(e),this.onAfterHide(e);break;case"before-attach":this.notifyLayout(e),this.onBeforeAttach(e);break;case"after-attach":!this.isHidden&&(!this.parent||this.parent.isVisible)&&this.setFlag(n.Flag.IsVisible),this.setFlag(n.Flag.IsAttached),this.notifyLayout(e),this.onAfterAttach(e);break;case"before-detach":this.notifyLayout(e),this.onBeforeDetach(e);break;case"after-detach":this.clearFlag(n.Flag.IsVisible),this.clearFlag(n.Flag.IsAttached),this.notifyLayout(e),this.onAfterDetach(e);break;case"activate-request":this.notifyLayout(e),this.onActivateRequest(e);break;case"close-request":this.notifyLayout(e),this.onCloseRequest(e);break;case"child-added":this.notifyLayout(e),this.onChildAdded(e);break;case"child-removed":this.notifyLayout(e),this.onChildRemoved(e);break;default:this.notifyLayout(e);break}}notifyLayout(e){this._layout&&this._layout.processParentMessage(e)}onCloseRequest(e){this.parent?this.parent=null:this.isAttached&&n.detach(this)}onResize(e){}onUpdateRequest(e){}onFitRequest(e){}onActivateRequest(e){}onBeforeShow(e){}onAfterShow(e){}onBeforeHide(e){}onAfterHide(e){}onBeforeAttach(e){}onAfterAttach(e){}onBeforeDetach(e){}onAfterDetach(e){}onChildAdded(e){}onChildRemoved(e){}_toggleHidden(e){if(e)switch(this._hiddenMode){case n.HiddenMode.Display:this.addClass("lm-mod-hidden");break;case n.HiddenMode.Scale:this.node.style.transform="scale(0)",this.node.setAttribute("aria-hidden","true");break;case n.HiddenMode.ContentVisibility:this.node.style.contentVisibility="hidden",this.node.style.zIndex="-1";break}else switch(this._hiddenMode){case n.HiddenMode.Display:this.removeClass("lm-mod-hidden");break;case n.HiddenMode.Scale:this.node.style.transform="",this.node.removeAttribute("aria-hidden");break;case n.HiddenMode.ContentVisibility:this.node.style.contentVisibility="",this.node.style.zIndex="";break}}};(function(n){(function(l){l[l.Display=0]="Display",l[l.Scale=1]="Scale",l[l.ContentVisibility=2]="ContentVisibility"})(n.HiddenMode||(n.HiddenMode={})),function(l){l[l.IsDisposed=1]="IsDisposed",l[l.IsAttached=2]="IsAttached",l[l.IsHidden=4]="IsHidden",l[l.IsVisible=8]="IsVisible",l[l.DisallowLayout=16]="DisallowLayout"}(n.Flag||(n.Flag={})),function(l){l.BeforeShow=new ot("before-show"),l.AfterShow=new ot("after-show"),l.BeforeHide=new ot("before-hide"),l.AfterHide=new ot("after-hide"),l.BeforeAttach=new ot("before-attach"),l.AfterAttach=new ot("after-attach"),l.BeforeDetach=new ot("before-detach"),l.AfterDetach=new ot("after-detach"),l.ParentChanged=new ot("parent-changed"),l.UpdateRequest=new Ii("update-request"),l.FitRequest=new Ii("fit-request"),l.ActivateRequest=new Ii("activate-request"),l.CloseRequest=new Ii("close-request")}(n.Msg||(n.Msg={}));class e extends ot{constructor(c,d){super(c),this.child=d}}n.ChildMessage=e;class r extends ot{constructor(c,d){super("resize"),this.width=c,this.height=d}}n.ResizeMessage=r,function(l){l.UnknownSize=new l(-1,-1)}(r=n.ResizeMessage||(n.ResizeMessage={}));function s(l,c,d=null){if(l.parent)throw new Error("Cannot attach a child widget.");if(l.isAttached||l.node.isConnected)throw new Error("Widget is already attached.");if(!c.isConnected)throw new Error("Host is not attached.");Z.sendMessage(l,n.Msg.BeforeAttach),c.insertBefore(l.node,d),Z.sendMessage(l,n.Msg.AfterAttach)}n.attach=s;function o(l){if(l.parent)throw new Error("Cannot detach a child widget.");if(!l.isAttached||!l.node.isConnected)throw new Error("Widget is not attached.");Z.sendMessage(l,n.Msg.BeforeDetach),l.node.parentNode.removeChild(l.node),Z.sendMessage(l,n.Msg.AfterDetach)}n.detach=o})(j||(j={}));var ls;(function(n){n.titleProperty=new lt({name:"title",create:r=>new Zn({owner:r})});function e(r){return r.node||document.createElement(r.tag||"div")}n.createNode=e})(ls||(ls={}));var pi=class{constructor(e={}){this._disposed=!1,this._parent=null,this._fitPolicy=e.fitPolicy||"set-min-size"}dispose(){this._parent=null,this._disposed=!0,Ie.clearData(this),lt.clearData(this)}get isDisposed(){return this._disposed}get parent(){return this._parent}set parent(e){if(this._parent!==e){if(this._parent)throw new Error("Cannot change parent widget.");if(e.layout!==this)throw new Error("Invalid parent widget.");this._parent=e,this.init()}}get fitPolicy(){return this._fitPolicy}set fitPolicy(e){if(this._fitPolicy!==e&&(this._fitPolicy=e,this._parent)){let r=this._parent.node.style;r.minWidth="",r.minHeight="",r.maxWidth="",r.maxHeight="",this._parent.fit()}}processParentMessage(e){switch(e.type){case"resize":this.onResize(e);break;case"update-request":this.onUpdateRequest(e);break;case"fit-request":this.onFitRequest(e);break;case"before-show":this.onBeforeShow(e);break;case"after-show":this.onAfterShow(e);break;case"before-hide":this.onBeforeHide(e);break;case"after-hide":this.onAfterHide(e);break;case"before-attach":this.onBeforeAttach(e);break;case"after-attach":this.onAfterAttach(e);break;case"before-detach":this.onBeforeDetach(e);break;case"after-detach":this.onAfterDetach(e);break;case"child-removed":this.onChildRemoved(e);break;case"child-shown":this.onChildShown(e);break;case"child-hidden":this.onChildHidden(e);break}}init(){for(let e of this)e.parent=this.parent}onResize(e){for(let r of this)Z.sendMessage(r,j.ResizeMessage.UnknownSize)}onUpdateRequest(e){for(let r of this)Z.sendMessage(r,j.ResizeMessage.UnknownSize)}onBeforeAttach(e){for(let r of this)Z.sendMessage(r,e)}onAfterAttach(e){for(let r of this)Z.sendMessage(r,e)}onBeforeDetach(e){for(let r of this)Z.sendMessage(r,e)}onAfterDetach(e){for(let r of this)Z.sendMessage(r,e)}onBeforeShow(e){for(let r of this)r.isHidden||Z.sendMessage(r,e)}onAfterShow(e){for(let r of this)r.isHidden||Z.sendMessage(r,e)}onBeforeHide(e){for(let r of this)r.isHidden||Z.sendMessage(r,e)}onAfterHide(e){for(let r of this)r.isHidden||Z.sendMessage(r,e)}onChildRemoved(e){this.removeWidget(e.child)}onFitRequest(e){}onChildShown(e){}onChildHidden(e){}};(function(n){function e(l){return _n.horizontalAlignmentProperty.get(l)}n.getHorizontalAlignment=e;function r(l,c){_n.horizontalAlignmentProperty.set(l,c)}n.setHorizontalAlignment=r;function s(l){return _n.verticalAlignmentProperty.get(l)}n.getVerticalAlignment=s;function o(l,c){_n.verticalAlignmentProperty.set(l,c)}n.setVerticalAlignment=o})(pi||(pi={}));var Ki=class{constructor(e){this._top=NaN,this._left=NaN,this._width=NaN,this._height=NaN,this._minWidth=0,this._minHeight=0,this._maxWidth=1/0,this._maxHeight=1/0,this._disposed=!1,this.widget=e,this.widget.node.style.position="absolute",this.widget.node.style.contain="strict"}dispose(){if(this._disposed)return;this._disposed=!0;let e=this.widget.node.style;e.position="",e.top="",e.left="",e.width="",e.height="",e.contain=""}get minWidth(){return this._minWidth}get minHeight(){return this._minHeight}get maxWidth(){return this._maxWidth}get maxHeight(){return this._maxHeight}get isDisposed(){return this._disposed}get isHidden(){return this.widget.isHidden}get isVisible(){return this.widget.isVisible}get isAttached(){return this.widget.isAttached}fit(){let e=Ce.sizeLimits(this.widget.node);this._minWidth=e.minWidth,this._minHeight=e.minHeight,this._maxWidth=e.maxWidth,this._maxHeight=e.maxHeight}update(e,r,s,o){let l=Math.max(this._minWidth,Math.min(s,this._maxWidth)),c=Math.max(this._minHeight,Math.min(o,this._maxHeight));if(l<s)switch(pi.getHorizontalAlignment(this.widget)){case"left":break;case"center":e+=(s-l)/2;break;case"right":e+=s-l;break;default:throw"unreachable"}if(c<o)switch(pi.getVerticalAlignment(this.widget)){case"top":break;case"center":r+=(o-c)/2;break;case"bottom":r+=o-c;break;default:throw"unreachable"}let d=!1,h=this.widget.node.style;if(this._top!==r&&(this._top=r,h.top=`${r}px`),this._left!==e&&(this._left=e,h.left=`${e}px`),this._width!==l&&(d=!0,this._width=l,h.width=`${l}px`),this._height!==c&&(d=!0,this._height=c,h.height=`${c}px`),d){let g=new j.ResizeMessage(l,c);Z.sendMessage(this.widget,g)}}},_n;(function(n){n.horizontalAlignmentProperty=new lt({name:"horizontalAlignment",create:()=>"center",changed:e}),n.verticalAlignmentProperty=new lt({name:"verticalAlignment",create:()=>"top",changed:e});function e(r){r.parent&&r.parent.layout&&r.parent.update()}})(_n||(_n={}));var bn=class extends pi{constructor(){super(...arguments),this._widgets=[]}dispose(){for(;this._widgets.length>0;)this._widgets.pop().dispose();super.dispose()}get widgets(){return this._widgets}*[Symbol.iterator](){yield*this._widgets}addWidget(e){this.insertWidget(this._widgets.length,e)}insertWidget(e,r){r.parent=this.parent;let s=this._widgets.indexOf(r),o=Math.max(0,Math.min(e,this._widgets.length));if(s===-1){X.ArrayExt.insert(this._widgets,o,r),this.parent&&this.attachWidget(o,r);return}o===this._widgets.length&&o--,s!==o&&(X.ArrayExt.move(this._widgets,s,o),this.parent&&this.moveWidget(s,o,r))}removeWidget(e){this.removeWidgetAt(this._widgets.indexOf(e))}removeWidgetAt(e){let r=X.ArrayExt.removeAt(this._widgets,e);r&&this.parent&&this.detachWidget(e,r)}init(){super.init();let e=0;for(let r of this)this.attachWidget(e++,r)}attachWidget(e,r){let s=this.parent.node.children[e];this.parent.isAttached&&Z.sendMessage(r,j.Msg.BeforeAttach),this.parent.node.insertBefore(r.node,s),this.parent.isAttached&&Z.sendMessage(r,j.Msg.AfterAttach)}moveWidget(e,r,s){this.parent.isAttached&&Z.sendMessage(s,j.Msg.BeforeDetach),this.parent.node.removeChild(s.node),this.parent.isAttached&&Z.sendMessage(s,j.Msg.AfterDetach);let o=this.parent.node.children[r];this.parent.isAttached&&Z.sendMessage(s,j.Msg.BeforeAttach),this.parent.node.insertBefore(s.node,o),this.parent.isAttached&&Z.sendMessage(s,j.Msg.AfterAttach)}detachWidget(e,r){this.parent.isAttached&&Z.sendMessage(r,j.Msg.BeforeDetach),this.parent.node.removeChild(r.node),this.parent.isAttached&&Z.sendMessage(r,j.Msg.AfterDetach)}},jn;(function(n){function e(r){return Math.max(0,Math.floor(r))}n.clampDimension=e})(jn||(jn={}));var Jn=jn,gi=class n extends bn{constructor(e){super(),this.widgetOffset=0,this._fixed=0,this._spacing=4,this._dirty=!1,this._hasNormedSizes=!1,this._sizers=[],this._items=[],this._handles=[],this._box=null,this._alignment="start",this._orientation="horizontal",this.renderer=e.renderer,e.orientation!==void 0&&(this._orientation=e.orientation),e.alignment!==void 0&&(this._alignment=e.alignment),e.spacing!==void 0&&(this._spacing=jn.clampDimension(e.spacing))}dispose(){for(let e of this._items)e.dispose();this._box=null,this._items.length=0,this._sizers.length=0,this._handles.length=0,super.dispose()}get orientation(){return this._orientation}set orientation(e){this._orientation!==e&&(this._orientation=e,this.parent&&(this.parent.dataset.orientation=e,this.parent.fit()))}get alignment(){return this._alignment}set alignment(e){this._alignment!==e&&(this._alignment=e,this.parent&&(this.parent.dataset.alignment=e,this.parent.update()))}get spacing(){return this._spacing}set spacing(e){e=jn.clampDimension(e),this._spacing!==e&&(this._spacing=e,this.parent&&this.parent.fit())}get handles(){return this._handles}absoluteSizes(){return this._sizers.map(e=>e.size)}relativeSizes(){return fi.normalize(this._sizers.map(e=>e.size))}setRelativeSizes(e,r=!0){let s=this._sizers.length,o=e.slice(0,s);for(;o.length<s;)o.push(0);let l=fi.normalize(o);for(let c=0;c<s;++c){let d=this._sizers[c];d.sizeHint=l[c],d.size=l[c]}this._hasNormedSizes=!0,r&&this.parent&&this.parent.update()}moveHandle(e,r){let s=this._handles[e];if(!s||s.classList.contains("lm-mod-hidden"))return;let o;if(this._orientation==="horizontal"?o=r-s.offsetLeft:o=r-s.offsetTop,o!==0){for(let l of this._sizers)l.size>0&&(l.sizeHint=l.size);Ct.adjust(this._sizers,e,o),this.parent&&this.parent.update()}}init(){this.parent.dataset.orientation=this.orientation,this.parent.dataset.alignment=this.alignment,super.init()}attachWidget(e,r){let s=new Ki(r),o=fi.createHandle(this.renderer),l=fi.averageSize(this._sizers),c=fi.createSizer(l);X.ArrayExt.insert(this._items,e,s),X.ArrayExt.insert(this._sizers,e,c),X.ArrayExt.insert(this._handles,e,o),this.parent.isAttached&&Z.sendMessage(r,j.Msg.BeforeAttach),this.parent.node.appendChild(r.node),this.parent.node.appendChild(o),this.parent.isAttached&&Z.sendMessage(r,j.Msg.AfterAttach),this.parent.fit()}moveWidget(e,r,s){X.ArrayExt.move(this._items,e,r),X.ArrayExt.move(this._sizers,e,r),X.ArrayExt.move(this._handles,e,r),this.parent.fit()}detachWidget(e,r){let s=X.ArrayExt.removeAt(this._items,e),o=X.ArrayExt.removeAt(this._handles,e);X.ArrayExt.removeAt(this._sizers,e),this.parent.isAttached&&Z.sendMessage(r,j.Msg.BeforeDetach),this.parent.node.removeChild(r.node),this.parent.node.removeChild(o),this.parent.isAttached&&Z.sendMessage(r,j.Msg.AfterDetach),s.dispose(),this.parent.fit()}onBeforeShow(e){super.onBeforeShow(e),this.parent.update()}onBeforeAttach(e){super.onBeforeAttach(e),this.parent.fit()}onChildShown(e){this.parent.fit()}onChildHidden(e){this.parent.fit()}onResize(e){this.parent.isVisible&&this._update(e.width,e.height)}onUpdateRequest(e){this.parent.isVisible&&this._update(-1,-1)}onFitRequest(e){this.parent.isAttached&&this._fit()}updateItemPosition(e,r,s,o,l,c,d){let h=this._items[e];if(h.isHidden)return;let g=this._handles[e].style;r?(s+=this.widgetOffset,h.update(s,o,d,l),s+=d,g.top=`${o}px`,g.left=`${s}px`,g.width=`${this._spacing}px`,g.height=`${l}px`):(o+=this.widgetOffset,h.update(s,o,c,d),o+=d,g.top=`${o}px`,g.left=`${s}px`,g.width=`${c}px`,g.height=`${this._spacing}px`)}_fit(){let e=0,r=-1;for(let h=0,g=this._items.length;h<g;++h)this._items[h].isHidden?this._handles[h].classList.add("lm-mod-hidden"):(this._handles[h].classList.remove("lm-mod-hidden"),r=h,e++);r!==-1&&this._handles[r].classList.add("lm-mod-hidden"),this._fixed=this._spacing*Math.max(0,e-1)+this.widgetOffset*this._items.length;let s=this._orientation==="horizontal",o=s?this._fixed:0,l=s?0:this._fixed;for(let h=0,g=this._items.length;h<g;++h){let m=this._items[h],p=this._sizers[h];if(p.size>0&&(p.sizeHint=p.size),m.isHidden){p.minSize=0,p.maxSize=0;continue}m.fit(),p.stretch=n.getStretch(m.widget),s?(p.minSize=m.minWidth,p.maxSize=m.maxWidth,o+=m.minWidth,l=Math.max(l,m.minHeight)):(p.minSize=m.minHeight,p.maxSize=m.maxHeight,l+=m.minHeight,o=Math.max(o,m.minWidth))}let c=this._box=Ce.boxSizing(this.parent.node);o+=c.horizontalSum,l+=c.verticalSum;let d=this.parent.node.style;d.minWidth=`${o}px`,d.minHeight=`${l}px`,this._dirty=!0,this.parent.parent&&Z.sendMessage(this.parent.parent,j.Msg.FitRequest),this._dirty&&Z.sendMessage(this.parent,j.Msg.UpdateRequest)}_update(e,r){this._dirty=!1;let s=0;for(let p=0,v=this._items.length;p<v;++p)s+=+!this._items[p].isHidden;if(s===0&&this.widgetOffset===0)return;e<0&&(e=this.parent.node.offsetWidth),r<0&&(r=this.parent.node.offsetHeight),this._box||(this._box=Ce.boxSizing(this.parent.node));let o=this._box.paddingTop,l=this._box.paddingLeft,c=e-this._box.horizontalSum,d=r-this._box.verticalSum,h=0,g=0,m=this._orientation==="horizontal";if(s>0){let p;if(m?p=Math.max(0,c-this._fixed):p=Math.max(0,d-this._fixed),this._hasNormedSizes){for(let b of this._sizers)b.sizeHint*=p;this._hasNormedSizes=!1}let v=Ct.calc(this._sizers,p);if(v>0)switch(this._alignment){case"start":break;case"center":h=0,g=v/2;break;case"end":h=0,g=v;break;case"justify":h=v/s,g=0;break;default:throw"unreachable"}}for(let p=0,v=this._items.length;p<v;++p){let _=this._items[p].isHidden?0:this._sizers[p].size+h;this.updateItemPosition(p,m,m?l+g:l,m?o:o+g,d,c,_);let y=this.widgetOffset+(this._handles[p].classList.contains("lm-mod-hidden")?0:this._spacing);m?l+=_+y:o+=_+y}}};(function(n){function e(s){return fi.stretchProperty.get(s)}n.getStretch=e;function r(s,o){fi.stretchProperty.set(s,o)}n.setStretch=r})(gi||(gi={}));var fi;(function(n){n.stretchProperty=new lt({name:"stretch",create:()=>0,coerce:(c,d)=>Math.max(0,Math.floor(d)),changed:l});function e(c){let d=new Xt;return d.sizeHint=Math.floor(c),d}n.createSizer=e;function r(c){let d=c.createHandle();return d.style.position="absolute",d.style.contain="style",d}n.createHandle=r;function s(c){return c.reduce((d,h)=>d+h.size,0)/c.length||0}n.averageSize=s;function o(c){let d=c.length;if(d===0)return[];let h=c.reduce((g,m)=>g+Math.abs(m),0);return h===0?c.map(g=>1/d):c.map(g=>g/h)}n.normalize=o;function l(c){c.parent&&c.parent.layout instanceof gi&&c.parent.fit()}})(fi||(fi={}));var ja=class extends gi{constructor(e){super({...e,orientation:e.orientation||"vertical"}),this._titles=[],this.titleSpace=e.titleSpace||22}get titleSpace(){return this.widgetOffset}set titleSpace(e){e=Jn.clampDimension(e),this.widgetOffset!==e&&(this.widgetOffset=e,this.parent&&this.parent.fit())}get titles(){return this._titles}dispose(){this.isDisposed||(this._titles.length=0,super.dispose())}updateTitle(e,r){let s=this._titles[e],o=s.classList.contains("lm-mod-expanded"),l=us.createTitle(this.renderer,r.title,o);this._titles[e]=l,this.parent.node.replaceChild(l,s)}insertWidget(e,r){r.id||(r.id=`id-${mi.UUID.uuid4()}`),super.insertWidget(e,r)}attachWidget(e,r){let s=us.createTitle(this.renderer,r.title);X.ArrayExt.insert(this._titles,e,s),this.parent.node.appendChild(s),r.node.setAttribute("role","region"),r.node.setAttribute("aria-labelledby",s.id),super.attachWidget(e,r)}moveWidget(e,r,s){X.ArrayExt.move(this._titles,e,r),super.moveWidget(e,r,s)}detachWidget(e,r){let s=X.ArrayExt.removeAt(this._titles,e);this.parent.node.removeChild(s),super.detachWidget(e,r)}updateItemPosition(e,r,s,o,l,c,d){let h=this._titles[e].style;h.top=`${o}px`,h.left=`${s}px`,h.height=`${this.widgetOffset}px`,r?h.width=`${l}px`:h.width=`${c}px`,super.updateItemPosition(e,r,s,o,l,c,d)}},us;(function(n){function e(r,s,o=!0){let l=r.createSectionTitle(s);return l.style.position="absolute",l.style.contain="strict",l.setAttribute("aria-label",`${s.label} Section`),l.setAttribute("aria-expanded",o?"true":"false"),l.setAttribute("aria-controls",s.owner.id),o&&l.classList.add("lm-mod-expanded"),l}n.createTitle=e})(us||(us={}));var vn=class extends j{constructor(e={}){super(),this.addClass("lm-Panel"),this.layout=Ja.createLayout(e)}get widgets(){return this.layout.widgets}addWidget(e){this.layout.addWidget(e)}insertWidget(e,r){this.layout.insertWidget(e,r)}},Ja;(function(n){function e(r){return r.layout||new bn}n.createLayout=e})(Ja||(Ja={}));var Zt=class extends vn{constructor(e={}){super({layout:Qa.createLayout(e)}),this._handleMoved=new Ie(this),this._pressData=null,this.addClass("lm-SplitPanel")}dispose(){this._releaseMouse(),super.dispose()}get orientation(){return this.layout.orientation}set orientation(e){this.layout.orientation=e}get alignment(){return this.layout.alignment}set alignment(e){this.layout.alignment=e}get spacing(){return this.layout.spacing}set spacing(e){this.layout.spacing=e}get renderer(){return this.layout.renderer}get handleMoved(){return this._handleMoved}get handles(){return this.layout.handles}relativeSizes(){return this.layout.relativeSizes()}setRelativeSizes(e,r=!0){this.layout.setRelativeSizes(e,r)}handleEvent(e){switch(e.type){case"pointerdown":this._evtPointerDown(e);break;case"pointermove":this._evtPointerMove(e);break;case"pointerup":this._evtPointerUp(e);break;case"keydown":this._evtKeyDown(e);break;case"contextmenu":e.preventDefault(),e.stopPropagation();break}}onBeforeAttach(e){this.node.addEventListener("pointerdown",this)}onAfterDetach(e){this.node.removeEventListener("pointerdown",this),this._releaseMouse()}onChildAdded(e){e.child.addClass("lm-SplitPanel-child"),this._releaseMouse()}onChildRemoved(e){e.child.removeClass("lm-SplitPanel-child"),this._releaseMouse()}_evtKeyDown(e){this._pressData&&(e.preventDefault(),e.stopPropagation()),e.keyCode===27&&this._releaseMouse()}_evtPointerDown(e){if(e.button!==0)return;let r=this.layout,s=X.ArrayExt.findFirstIndex(r.handles,g=>g.contains(e.target));if(s===-1)return;e.preventDefault(),e.stopPropagation(),document.addEventListener("pointerup",this,!0),document.addEventListener("pointermove",this,!0),document.addEventListener("keydown",this,!0),document.addEventListener("contextmenu",this,!0);let o,l=r.handles[s],c=l.getBoundingClientRect();r.orientation==="horizontal"?o=e.clientX-c.left:o=e.clientY-c.top;let d=window.getComputedStyle(l),h=ut.overrideCursor(d.cursor);this._pressData={index:s,delta:o,override:h}}_evtPointerMove(e){e.preventDefault(),e.stopPropagation();let r,s=this.layout,o=this.node.getBoundingClientRect();s.orientation==="horizontal"?r=e.clientX-o.left-this._pressData.delta:r=e.clientY-o.top-this._pressData.delta,s.moveHandle(this._pressData.index,r)}_evtPointerUp(e){e.button===0&&(e.preventDefault(),e.stopPropagation(),this._releaseMouse())}_releaseMouse(){this._pressData&&(this._pressData.override.dispose(),this._pressData=null,this._handleMoved.emit(),document.removeEventListener("keydown",this,!0),document.removeEventListener("pointerup",this,!0),document.removeEventListener("pointermove",this,!0),document.removeEventListener("contextmenu",this,!0))}};(function(n){class e{createHandle(){let l=document.createElement("div");return l.className="lm-SplitPanel-handle",l}}n.Renderer=e,n.defaultRenderer=new e;function r(o){return gi.getStretch(o)}n.getStretch=r;function s(o,l){gi.setStretch(o,l)}n.setStretch=s})(Zt||(Zt={}));var Qa;(function(n){function e(r){return r.layout||new gi({renderer:r.renderer||Zt.defaultRenderer,orientation:r.orientation,alignment:r.alignment,spacing:r.spacing})}n.createLayout=e})(Qa||(Qa={}));var Qn=class extends Zt{constructor(e={}){super({...e,layout:eo.createLayout(e)}),this._widgetSizesCache=new WeakMap,this._expansionToggled=new Ie(this),this.addClass("lm-AccordionPanel")}get renderer(){return this.layout.renderer}get titleSpace(){return this.layout.titleSpace}set titleSpace(e){this.layout.titleSpace=e}get titles(){return this.layout.titles}get expansionToggled(){return this._expansionToggled}addWidget(e){super.addWidget(e),e.title.changed.connect(this._onTitleChanged,this)}collapse(e){let r=this.layout.widgets[e];r&&!r.isHidden&&this._toggleExpansion(e)}expand(e){let r=this.layout.widgets[e];r&&r.isHidden&&this._toggleExpansion(e)}insertWidget(e,r){super.insertWidget(e,r),r.title.changed.connect(this._onTitleChanged,this)}handleEvent(e){switch(super.handleEvent(e),e.type){case"click":this._evtClick(e);break;case"keydown":this._eventKeyDown(e);break}}onBeforeAttach(e){this.node.addEventListener("click",this),this.node.addEventListener("keydown",this),super.onBeforeAttach(e)}onAfterDetach(e){super.onAfterDetach(e),this.node.removeEventListener("click",this),this.node.removeEventListener("keydown",this)}_onTitleChanged(e){let r=X.ArrayExt.findFirstIndex(this.widgets,s=>s.contains(e.owner));r>=0&&(this.layout.updateTitle(r,e.owner),this.update())}_computeWidgetSize(e){let r=this.layout,s=r.widgets[e];if(!s)return;let o=s.isHidden,l=r.absoluteSizes(),c=(o?-1:1)*this.spacing,d=l.reduce((g,m)=>g+m),h=[...l];if(o){let g=this._widgetSizesCache.get(s);if(!g)return;h[e]+=g;let m=h.map(p=>p-g>0).lastIndexOf(!0);m===-1?h.forEach((p,v)=>{v!==e&&(h[v]-=l[v]/d*(g-c))}):h[m]-=g-c}else{let g=l[e];this._widgetSizesCache.set(s,g),h[e]=0;let m=h.map(p=>p>0).lastIndexOf(!0);if(m===-1)return;h[m]=l[m]+g+c}return h.map(g=>g/(d+c))}_evtClick(e){let r=e.target;if(r){let s=X.ArrayExt.findFirstIndex(this.titles,o=>o.contains(r));s>=0&&(e.preventDefault(),e.stopPropagation(),this._toggleExpansion(s))}}_eventKeyDown(e){if(e.defaultPrevented)return;let r=e.target,s=!1;if(r){let o=X.ArrayExt.findFirstIndex(this.titles,l=>l.contains(r));if(o>=0){let l=e.keyCode.toString();if(e.key.match(/Space|Enter/)||l.match(/13|32/))r.click(),s=!0;else if(this.orientation==="horizontal"?e.key.match(/ArrowLeft|ArrowRight/)||l.match(/37|39/):e.key.match(/ArrowUp|ArrowDown/)||l.match(/38|40/)){let c=e.key.match(/ArrowLeft|ArrowUp/)||l.match(/37|38/)?-1:1,d=this.titles.length,h=(o+d+c)%d;this.titles[h].focus(),s=!0}else e.key==="End"||l==="35"?(this.titles[this.titles.length-1].focus(),s=!0):(e.key==="Home"||l==="36")&&(this.titles[0].focus(),s=!0)}s&&e.preventDefault()}}_toggleExpansion(e){let r=this.titles[e],s=this.layout.widgets[e],o=this._computeWidgetSize(e);o&&this.setRelativeSizes(o,!1),s.isHidden?(r.classList.add("lm-mod-expanded"),r.setAttribute("aria-expanded","true"),s.show()):(r.classList.remove("lm-mod-expanded"),r.setAttribute("aria-expanded","false"),s.hide()),this._expansionToggled.emit(e)}};(function(n){class e extends Zt.Renderer{constructor(){super(),this.titleClassName="lm-AccordionPanel-title",this._titleID=0,this._titleKeys=new WeakMap,this._uuid=++e._nInstance}createCollapseIcon(s){return document.createElement("span")}createSectionTitle(s){let o=document.createElement("h3");o.setAttribute("tabindex","0"),o.id=this.createTitleKey(s),o.className=this.titleClassName;for(let d in s.dataset)o.dataset[d]=s.dataset[d];let l=o.appendChild(this.createCollapseIcon(s));l.className="lm-AccordionPanel-titleCollapser";let c=o.appendChild(document.createElement("span"));return c.className="lm-AccordionPanel-titleLabel",c.textContent=s.label,c.title=s.caption||s.label,o}createTitleKey(s){let o=this._titleKeys.get(s);return o===void 0&&(o=`title-key-${this._uuid}-${this._titleID++}`,this._titleKeys.set(s,o)),o}}e._nInstance=0,n.Renderer=e,n.defaultRenderer=new e})(Qn||(Qn={}));var eo;(function(n){function e(r){return r.layout||new ja({renderer:r.renderer||Qn.defaultRenderer,orientation:r.orientation,alignment:r.alignment,spacing:r.spacing,titleSpace:r.titleSpace})}n.createLayout=e})(eo||(eo={}));var Yt=class n extends bn{constructor(e={}){super(),this._fixed=0,this._spacing=4,this._dirty=!1,this._sizers=[],this._items=[],this._box=null,this._alignment="start",this._direction="top-to-bottom",e.direction!==void 0&&(this._direction=e.direction),e.alignment!==void 0&&(this._alignment=e.alignment),e.spacing!==void 0&&(this._spacing=Jn.clampDimension(e.spacing))}dispose(){for(let e of this._items)e.dispose();this._box=null,this._items.length=0,this._sizers.length=0,super.dispose()}get direction(){return this._direction}set direction(e){this._direction!==e&&(this._direction=e,this.parent&&(this.parent.dataset.direction=e,this.parent.fit()))}get alignment(){return this._alignment}set alignment(e){this._alignment!==e&&(this._alignment=e,this.parent&&(this.parent.dataset.alignment=e,this.parent.update()))}get spacing(){return this._spacing}set spacing(e){e=Jn.clampDimension(e),this._spacing!==e&&(this._spacing=e,this.parent&&this.parent.fit())}init(){this.parent.dataset.direction=this.direction,this.parent.dataset.alignment=this.alignment,super.init()}attachWidget(e,r){X.ArrayExt.insert(this._items,e,new Ki(r)),X.ArrayExt.insert(this._sizers,e,new Xt),this.parent.isAttached&&Z.sendMessage(r,j.Msg.BeforeAttach),this.parent.node.appendChild(r.node),this.parent.isAttached&&Z.sendMessage(r,j.Msg.AfterAttach),this.parent.fit()}moveWidget(e,r,s){X.ArrayExt.move(this._items,e,r),X.ArrayExt.move(this._sizers,e,r),this.parent.update()}detachWidget(e,r){let s=X.ArrayExt.removeAt(this._items,e);X.ArrayExt.removeAt(this._sizers,e),this.parent.isAttached&&Z.sendMessage(r,j.Msg.BeforeDetach),this.parent.node.removeChild(r.node),this.parent.isAttached&&Z.sendMessage(r,j.Msg.AfterDetach),s.dispose(),this.parent.fit()}onBeforeShow(e){super.onBeforeShow(e),this.parent.update()}onBeforeAttach(e){super.onBeforeAttach(e),this.parent.fit()}onChildShown(e){this.parent.fit()}onChildHidden(e){this.parent.fit()}onResize(e){this.parent.isVisible&&this._update(e.width,e.height)}onUpdateRequest(e){this.parent.isVisible&&this._update(-1,-1)}onFitRequest(e){this.parent.isAttached&&this._fit()}_fit(){let e=0;for(let d=0,h=this._items.length;d<h;++d)e+=+!this._items[d].isHidden;this._fixed=this._spacing*Math.max(0,e-1);let r=Ui.isHorizontal(this._direction),s=r?this._fixed:0,o=r?0:this._fixed;for(let d=0,h=this._items.length;d<h;++d){let g=this._items[d],m=this._sizers[d];if(g.isHidden){m.minSize=0,m.maxSize=0;continue}g.fit(),m.sizeHint=n.getSizeBasis(g.widget),m.stretch=n.getStretch(g.widget),r?(m.minSize=g.minWidth,m.maxSize=g.maxWidth,s+=g.minWidth,o=Math.max(o,g.minHeight)):(m.minSize=g.minHeight,m.maxSize=g.maxHeight,o+=g.minHeight,s=Math.max(s,g.minWidth))}let l=this._box=Ce.boxSizing(this.parent.node);s+=l.horizontalSum,o+=l.verticalSum;let c=this.parent.node.style;c.minWidth=`${s}px`,c.minHeight=`${o}px`,this._dirty=!0,this.parent.parent&&Z.sendMessage(this.parent.parent,j.Msg.FitRequest),this._dirty&&Z.sendMessage(this.parent,j.Msg.UpdateRequest)}_update(e,r){this._dirty=!1;let s=0;for(let p=0,v=this._items.length;p<v;++p)s+=+!this._items[p].isHidden;if(s===0)return;e<0&&(e=this.parent.node.offsetWidth),r<0&&(r=this.parent.node.offsetHeight),this._box||(this._box=Ce.boxSizing(this.parent.node));let o=this._box.paddingTop,l=this._box.paddingLeft,c=e-this._box.horizontalSum,d=r-this._box.verticalSum,h;switch(this._direction){case"left-to-right":h=Ct.calc(this._sizers,Math.max(0,c-this._fixed));break;case"top-to-bottom":h=Ct.calc(this._sizers,Math.max(0,d-this._fixed));break;case"right-to-left":h=Ct.calc(this._sizers,Math.max(0,c-this._fixed)),l+=c;break;case"bottom-to-top":h=Ct.calc(this._sizers,Math.max(0,d-this._fixed)),o+=d;break;default:throw"unreachable"}let g=0,m=0;if(h>0)switch(this._alignment){case"start":break;case"center":g=0,m=h/2;break;case"end":g=0,m=h;break;case"justify":g=h/s,m=0;break;default:throw"unreachable"}for(let p=0,v=this._items.length;p<v;++p){let b=this._items[p];if(b.isHidden)continue;let _=this._sizers[p].size;switch(this._direction){case"left-to-right":b.update(l+m,o,_+g,d),l+=_+g+this._spacing;break;case"top-to-bottom":b.update(l,o+m,c,_+g),o+=_+g+this._spacing;break;case"right-to-left":b.update(l-m-_-g,o,_+g,d),l-=_+g+this._spacing;break;case"bottom-to-top":b.update(l,o-m-_-g,c,_+g),o-=_+g+this._spacing;break;default:throw"unreachable"}}}};(function(n){function e(l){return Ui.stretchProperty.get(l)}n.getStretch=e;function r(l,c){Ui.stretchProperty.set(l,c)}n.setStretch=r;function s(l){return Ui.sizeBasisProperty.get(l)}n.getSizeBasis=s;function o(l,c){Ui.sizeBasisProperty.set(l,c)}n.setSizeBasis=o})(Yt||(Yt={}));var Ui;(function(n){n.stretchProperty=new lt({name:"stretch",create:()=>0,coerce:(o,l)=>Math.max(0,Math.floor(l)),changed:s}),n.sizeBasisProperty=new lt({name:"sizeBasis",create:()=>0,coerce:(o,l)=>Math.max(0,Math.floor(l)),changed:s});function e(o){return o==="left-to-right"||o==="right-to-left"}n.isHorizontal=e;function r(o){return Math.max(0,Math.floor(o))}n.clampSpacing=r;function s(o){o.parent&&o.parent.layout instanceof Yt&&o.parent.fit()}})(Ui||(Ui={}));var ds=class extends vn{constructor(e={}){super({layout:to.createLayout(e)}),this.addClass("lm-BoxPanel")}get direction(){return this.layout.direction}set direction(e){this.layout.direction=e}get alignment(){return this.layout.alignment}set alignment(e){this.layout.alignment=e}get spacing(){return this.layout.spacing}set spacing(e){this.layout.spacing=e}onChildAdded(e){e.child.addClass("lm-BoxPanel-child")}onChildRemoved(e){e.child.removeClass("lm-BoxPanel-child")}};(function(n){function e(l){return Yt.getStretch(l)}n.getStretch=e;function r(l,c){Yt.setStretch(l,c)}n.setStretch=r;function s(l){return Yt.getSizeBasis(l)}n.getSizeBasis=s;function o(l,c){Yt.setSizeBasis(l,c)}n.setSizeBasis=o})(ds||(ds={}));var to;(function(n){function e(r){return r.layout||new Yt(r)}n.createLayout=e})(to||(to={}));var cs=class n extends j{constructor(e){super({node:hi.createNode()}),this._activeIndex=-1,this._items=[],this._results=null,this.addClass("lm-CommandPalette"),this.setFlag(j.Flag.DisallowLayout),this.commands=e.commands,this.renderer=e.renderer||n.defaultRenderer,this.commands.commandChanged.connect(this._onGenericChange,this),this.commands.keyBindingChanged.connect(this._onGenericChange,this)}dispose(){this._items.length=0,this._results=null,super.dispose()}get searchNode(){return this.node.getElementsByClassName("lm-CommandPalette-search")[0]}get inputNode(){return this.node.getElementsByClassName("lm-CommandPalette-input")[0]}get contentNode(){return this.node.getElementsByClassName("lm-CommandPalette-content")[0]}get items(){return this._items}addItem(e){let r=hi.createItem(this.commands,e);return this._items.push(r),this.refresh(),r}addItems(e){let r=e.map(s=>hi.createItem(this.commands,s));return r.forEach(s=>this._items.push(s)),this.refresh(),r}removeItem(e){this.removeItemAt(this._items.indexOf(e))}removeItemAt(e){X.ArrayExt.removeAt(this._items,e)&&this.refresh()}clearItems(){this._items.length!==0&&(this._items.length=0,this.refresh())}refresh(){if(this._results=null,this.inputNode.value!==""){let e=this.node.getElementsByClassName("lm-close-icon")[0];e.style.display="inherit"}else{let e=this.node.getElementsByClassName("lm-close-icon")[0];e.style.display="none"}this.update()}handleEvent(e){switch(e.type){case"click":this._evtClick(e);break;case"keydown":this._evtKeyDown(e);break;case"input":this.refresh();break;case"focus":case"blur":this._toggleFocused();break}}onBeforeAttach(e){this.node.addEventListener("click",this),this.node.addEventListener("keydown",this),this.node.addEventListener("input",this),this.node.addEventListener("focus",this,!0),this.node.addEventListener("blur",this,!0)}onAfterDetach(e){this.node.removeEventListener("click",this),this.node.removeEventListener("keydown",this),this.node.removeEventListener("input",this),this.node.removeEventListener("focus",this,!0),this.node.removeEventListener("blur",this,!0)}onAfterShow(e){this.update(),super.onAfterShow(e)}onActivateRequest(e){if(this.isAttached){let r=this.inputNode;r.focus(),r.select()}}onUpdateRequest(e){if(this.isHidden)return;let r=this.inputNode.value,s=this.contentNode,o=this._results;if(o||(o=this._results=hi.search(this._items,r),this._activeIndex=r?X.ArrayExt.findFirstIndex(o,hi.canActivate):-1),!r&&o.length===0){Ut.render(null,s);return}if(r&&o.length===0){let h=this.renderer.renderEmptyMessage({query:r});Ut.render(h,s);return}let l=this.renderer,c=this._activeIndex,d=new Array(o.length);for(let h=0,g=o.length;h<g;++h){let m=o[h];if(m.type==="header"){let p=m.indices,v=m.category;d[h]=l.renderHeader({category:v,indices:p})}else{let p=m.item,v=m.indices,b=h===c;d[h]=l.renderItem({item:p,indices:v,active:b})}}if(Ut.render(d,s),c<0||c>=o.length)s.scrollTop=0;else{let h=s.children[c];Ce.scrollIntoViewIfNeeded(s,h)}}_evtClick(e){if(e.button!==0)return;if(e.target.classList.contains("lm-close-icon")){this.inputNode.value="",this.refresh();return}let r=X.ArrayExt.findFirstIndex(this.contentNode.children,s=>s.contains(e.target));r!==-1&&(e.preventDefault(),e.stopPropagation(),this._execute(r))}_evtKeyDown(e){if(!(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey))switch(e.keyCode){case 13:e.preventDefault(),e.stopPropagation(),this._execute(this._activeIndex);break;case 38:e.preventDefault(),e.stopPropagation(),this._activatePreviousItem();break;case 40:e.preventDefault(),e.stopPropagation(),this._activateNextItem();break}}_activateNextItem(){if(!this._results||this._results.length===0)return;let e=this._activeIndex,r=this._results.length,s=e<r-1?e+1:0,o=s===0?r-1:s-1;this._activeIndex=X.ArrayExt.findFirstIndex(this._results,hi.canActivate,s,o),this.update()}_activatePreviousItem(){if(!this._results||this._results.length===0)return;let e=this._activeIndex,r=this._results.length,s=e<=0?r-1:e-1,o=s===r-1?0:s+1;this._activeIndex=X.ArrayExt.findLastIndex(this._results,hi.canActivate,s,o),this.update()}_execute(e){if(!this._results)return;let r=this._results[e];if(r){if(r.type==="header"){let s=this.inputNode;s.value=`${r.category.toLowerCase()} `,s.focus(),this.refresh();return}r.item.isEnabled&&(this.commands.execute(r.item.command,r.item.args),this.inputNode.value="",this.refresh())}}_toggleFocused(){let e=document.activeElement===this.inputNode;this.toggleClass("lm-mod-focused",e)}_onGenericChange(){this.refresh()}};(function(n){class e{renderHeader(s){let o=this.formatHeader(s);return fe.li({className:"lm-CommandPalette-header"},o)}renderItem(s){let o=this.createItemClass(s),l=this.createItemDataset(s);return s.item.isToggleable?fe.li({className:o,dataset:l,role:"menuitemcheckbox","aria-checked":`${s.item.isToggled}`},this.renderItemIcon(s),this.renderItemContent(s),this.renderItemShortcut(s)):fe.li({className:o,dataset:l,role:"menuitem"},this.renderItemIcon(s),this.renderItemContent(s),this.renderItemShortcut(s))}renderEmptyMessage(s){let o=this.formatEmptyMessage(s);return fe.li({className:"lm-CommandPalette-emptyMessage"},o)}renderItemIcon(s){let o=this.createIconClass(s);return fe.div({className:o},s.item.icon,s.item.iconLabel)}renderItemContent(s){return fe.div({className:"lm-CommandPalette-itemContent"},this.renderItemLabel(s),this.renderItemCaption(s))}renderItemLabel(s){let o=this.formatItemLabel(s);return fe.div({className:"lm-CommandPalette-itemLabel"},o)}renderItemCaption(s){let o=this.formatItemCaption(s);return fe.div({className:"lm-CommandPalette-itemCaption"},o)}renderItemShortcut(s){let o=this.formatItemShortcut(s);return fe.div({className:"lm-CommandPalette-itemShortcut"},o)}createItemClass(s){let o="lm-CommandPalette-item";s.item.isEnabled||(o+=" lm-mod-disabled"),s.item.isToggled&&(o+=" lm-mod-toggled"),s.active&&(o+=" lm-mod-active");let l=s.item.className;return l&&(o+=` ${l}`),o}createItemDataset(s){return{...s.item.dataset,command:s.item.command}}createIconClass(s){let o="lm-CommandPalette-itemIcon",l=s.item.iconClass;return l?`${o} ${l}`:o}formatHeader(s){return!s.indices||s.indices.length===0?s.category:X.StringExt.highlight(s.category,s.indices,fe.mark)}formatEmptyMessage(s){return`No commands found that match '${s.query}'`}formatItemShortcut(s){let o=s.item.keyBinding;return o?Mt.formatKeystroke(o.keys):null}formatItemLabel(s){return!s.indices||s.indices.length===0?s.item.label:X.StringExt.highlight(s.item.label,s.indices,fe.mark)}formatItemCaption(s){return s.item.caption}}n.Renderer=e,n.defaultRenderer=new e})(cs||(cs={}));var hi;(function(n){function e(){let v=document.createElement("div"),b=document.createElement("div"),_=document.createElement("div"),y=document.createElement("input"),C=document.createElement("ul"),E=document.createElement("button");return b.className="lm-CommandPalette-search",_.className="lm-CommandPalette-wrapper",y.className="lm-CommandPalette-input",E.className="lm-close-icon",C.className="lm-CommandPalette-content",C.setAttribute("role","menu"),y.spellcheck=!1,_.appendChild(y),_.appendChild(E),b.appendChild(_),v.appendChild(b),v.appendChild(C),v}n.createNode=e;function r(v,b){return new p(v,b)}n.createItem=r;function s(v,b){let _=d(v,b);return _.sort(g),m(_)}n.search=s;function o(v){return v.type==="item"&&v.item.isEnabled}n.canActivate=o;function l(v){return v.trim().replace(/\s+/g," ")}function c(v){return v.replace(/\s+/g,"").toLowerCase()}function d(v,b){b=c(b);let _=[];for(let y=0,C=v.length;y<C;++y){let E=v[y];if(!E.isVisible)continue;if(!b){_.push({matchType:3,categoryIndices:null,labelIndices:null,score:0,item:E});continue}let I=h(E,b);I&&(E.isEnabled||(I.score+=1e3),_.push(I))}return _}function h(v,b){let _=v.category.toLowerCase(),y=v.label.toLowerCase(),C=`${_} ${y}`,E=1/0,I=null,M=/\b\w/g;for(;;){let F=M.exec(C);if(!F)break;let J=X.StringExt.matchSumOfDeltas(C,b,F.index);if(!J)break;J.score<=E&&(E=J.score,I=J.indices)}if(!I||E===1/0)return null;let S=_.length+1,k=X.ArrayExt.lowerBound(I,S,(F,J)=>F-J),B=I.slice(0,k),H=I.slice(k);for(let F=0,J=H.length;F<J;++F)H[F]-=S;return B.length===0?{matchType:0,categoryIndices:null,labelIndices:H,score:E,item:v}:H.length===0?{matchType:1,categoryIndices:B,labelIndices:null,score:E,item:v}:{matchType:2,categoryIndices:B,labelIndices:H,score:E,item:v}}function g(v,b){let _=v.matchType-b.matchType;if(_!==0)return _;let y=v.score-b.score;if(y!==0)return y;let C=0,E=0;switch(v.matchType){case 0:C=v.labelIndices[0],E=b.labelIndices[0];break;case 1:case 2:C=v.categoryIndices[0],E=b.categoryIndices[0];break}if(C!==E)return C-E;let I=v.item.category.localeCompare(b.item.category);if(I!==0)return I;let M=v.item.rank,S=b.item.rank;return M!==S?M<S?-1:1:v.item.label.localeCompare(b.item.label)}function m(v){let b=[];for(let _=0,y=v.length;_<y;++_){let{item:C,categoryIndices:E,labelIndices:I}=v[_],M=C.category;(_===0||M!==v[_-1].item.category)&&b.push({type:"header",category:M,indices:E}),b.push({type:"item",item:C,indices:I})}return b}class p{constructor(b,_){this._commands=b,this.category=l(_.category),this.command=_.command,this.args=_.args||mi.JSONExt.emptyObject,this.rank=_.rank!==void 0?_.rank:1/0}get label(){return this._commands.label(this.command,this.args)}get icon(){return this._commands.icon(this.command,this.args)}get iconClass(){return this._commands.iconClass(this.command,this.args)}get iconLabel(){return this._commands.iconLabel(this.command,this.args)}get caption(){return this._commands.caption(this.command,this.args)}get className(){return this._commands.className(this.command,this.args)}get dataset(){return this._commands.dataset(this.command,this.args)}get isEnabled(){return this._commands.isEnabled(this.command,this.args)}get isToggled(){return this._commands.isToggled(this.command,this.args)}get isToggleable(){return this._commands.isToggleable(this.command,this.args)}get isVisible(){return this._commands.isVisible(this.command,this.args)}get keyBinding(){let{command:b,args:_}=this;return X.ArrayExt.findLastValue(this._commands.keyBindings,y=>y.command===b&&mi.JSONExt.deepEqual(y.args,_))||null}}})(hi||(hi={}));var Kt=class n extends j{constructor(e){super({node:dt.createNode()}),this._childIndex=-1,this._activeIndex=-1,this._openTimerID=0,this._closeTimerID=0,this._items=[],this._childMenu=null,this._parentMenu=null,this._aboutToClose=new Ie(this),this._menuRequested=new Ie(this),this.addClass("lm-Menu"),this.setFlag(j.Flag.DisallowLayout),this.commands=e.commands,this.renderer=e.renderer||n.defaultRenderer}dispose(){this.close(),this._items.length=0,super.dispose()}get aboutToClose(){return this._aboutToClose}get menuRequested(){return this._menuRequested}get parentMenu(){return this._parentMenu}get childMenu(){return this._childMenu}get rootMenu(){let e=this;for(;e._parentMenu;)e=e._parentMenu;return e}get leafMenu(){let e=this;for(;e._childMenu;)e=e._childMenu;return e}get contentNode(){return this.node.getElementsByClassName("lm-Menu-content")[0]}get activeItem(){return this._items[this._activeIndex]||null}set activeItem(e){this.activeIndex=e?this._items.indexOf(e):-1}get activeIndex(){return this._activeIndex}set activeIndex(e){(e<0||e>=this._items.length)&&(e=-1),e!==-1&&!dt.canActivate(this._items[e])&&(e=-1),this._activeIndex!==e&&(this._activeIndex=e,this._activeIndex>=0&&this.contentNode.childNodes[this._activeIndex]&&this.contentNode.childNodes[this._activeIndex].focus(),this.update())}get items(){return this._items}activateNextItem(){let e=this._items.length,r=this._activeIndex,s=r<e-1?r+1:0,o=s===0?e-1:s-1;this.activeIndex=X.ArrayExt.findFirstIndex(this._items,dt.canActivate,s,o)}activatePreviousItem(){let e=this._items.length,r=this._activeIndex,s=r<=0?e-1:r-1,o=s===e-1?0:s+1;this.activeIndex=X.ArrayExt.findLastIndex(this._items,dt.canActivate,s,o)}triggerActiveItem(){if(!this.isAttached)return;let e=this.activeItem;if(!e)return;if(this._cancelOpenTimer(),this._cancelCloseTimer(),e.type==="submenu"){this._openChildMenu(!0);return}this.rootMenu.close();let{command:r,args:s}=e;this.commands.isEnabled(r,s)?this.commands.execute(r,s):console.log(`Command '${r}' is disabled.`)}addItem(e){return this.insertItem(this._items.length,e)}insertItem(e,r){this.isAttached&&this.close(),this.activeIndex=-1;let s=Math.max(0,Math.min(e,this._items.length)),o=dt.createItem(this,r);return X.ArrayExt.insert(this._items,s,o),this.update(),o}removeItem(e){this.removeItemAt(this._items.indexOf(e))}removeItemAt(e){this.isAttached&&this.close(),this.activeIndex=-1,X.ArrayExt.removeAt(this._items,e)&&this.update()}clearItems(){this.isAttached&&this.close(),this.activeIndex=-1,this._items.length!==0&&(this._items.length=0,this.update())}open(e,r,s={}){var o,l;if(this.isAttached)return;let c=s.forceX||!1,d=s.forceY||!1,h=(o=s.host)!==null&&o!==void 0?o:null,g=(l=s.ref)!==null&&l!==void 0?l:null;dt.openRootMenu(this,e,r,c,d,h,g),this.activate()}handleEvent(e){switch(e.type){case"keydown":this._evtKeyDown(e);break;case"mouseup":this._evtMouseUp(e);break;case"mousemove":this._evtMouseMove(e);break;case"mouseenter":this._evtMouseEnter(e);break;case"mouseleave":this._evtMouseLeave(e);break;case"mousedown":this._evtMouseDown(e);break;case"contextmenu":e.preventDefault(),e.stopPropagation();break}}onBeforeAttach(e){this.node.addEventListener("keydown",this),this.node.addEventListener("mouseup",this),this.node.addEventListener("mousemove",this),this.node.addEventListener("mouseenter",this),this.node.addEventListener("mouseleave",this),this.node.addEventListener("contextmenu",this),document.addEventListener("mousedown",this,!0)}onAfterDetach(e){this.node.removeEventListener("keydown",this),this.node.removeEventListener("mouseup",this),this.node.removeEventListener("mousemove",this),this.node.removeEventListener("mouseenter",this),this.node.removeEventListener("mouseleave",this),this.node.removeEventListener("contextmenu",this),document.removeEventListener("mousedown",this,!0)}onActivateRequest(e){this.isAttached&&this.node.focus()}onUpdateRequest(e){let r=this._items,s=this.renderer,o=this._activeIndex,l=dt.computeCollapsed(r),c=new Array(r.length);for(let d=0,h=r.length;d<h;++d){let g=r[d],m=d===o,p=l[d];c[d]=s.renderItem({item:g,active:m,collapsed:p,onfocus:()=>{this.activeIndex=d}})}Ut.render(c,this.contentNode)}onCloseRequest(e){this._cancelOpenTimer(),this._cancelCloseTimer(),this.activeIndex=-1;let r=this._childMenu;r&&(this._childIndex=-1,this._childMenu=null,r._parentMenu=null,r.close());let s=this._parentMenu;s&&(this._parentMenu=null,s._childIndex=-1,s._childMenu=null,s.activate()),this.isAttached&&this._aboutToClose.emit(void 0),super.onCloseRequest(e)}_evtKeyDown(e){e.preventDefault(),e.stopPropagation();let r=e.keyCode;if(r===13){this.triggerActiveItem();return}if(r===27){this.close();return}if(r===37){this._parentMenu?this.close():this._menuRequested.emit("previous");return}if(r===38){this.activatePreviousItem();return}if(r===39){let c=this.activeItem;c&&c.type==="submenu"?this.triggerActiveItem():this.rootMenu._menuRequested.emit("next");return}if(r===40){this.activateNextItem();return}let s=mn().keyForKeydownEvent(e);if(!s)return;let o=this._activeIndex+1,l=dt.findMnemonic(this._items,s,o);l.index!==-1&&!l.multiple?(this.activeIndex=l.index,this.triggerActiveItem()):l.index!==-1?this.activeIndex=l.index:l.auto!==-1&&(this.activeIndex=l.auto)}_evtMouseUp(e){e.button===0&&(e.preventDefault(),e.stopPropagation(),this.triggerActiveItem())}_evtMouseMove(e){let r=X.ArrayExt.findFirstIndex(this.contentNode.children,o=>Ce.hitTest(o,e.clientX,e.clientY));if(r===this._activeIndex)return;if(this.activeIndex=r,r=this.activeIndex,r===this._childIndex){this._cancelOpenTimer(),this._cancelCloseTimer();return}this._childIndex!==-1&&this._startCloseTimer(),this._cancelOpenTimer();let s=this.activeItem;!s||s.type!=="submenu"||!s.submenu||this._startOpenTimer()}_evtMouseEnter(e){for(let r=this._parentMenu;r;r=r._parentMenu)r._cancelOpenTimer(),r._cancelCloseTimer(),r.activeIndex=r._childIndex}_evtMouseLeave(e){if(this._cancelOpenTimer(),!this._childMenu){this.activeIndex=-1;return}let{clientX:r,clientY:s}=e;if(Ce.hitTest(this._childMenu.node,r,s)){this._cancelCloseTimer();return}this.activeIndex=-1,this._startCloseTimer()}_evtMouseDown(e){this._parentMenu||(dt.hitTestMenus(this,e.clientX,e.clientY)?(e.preventDefault(),e.stopPropagation()):this.close())}_openChildMenu(e=!1){let r=this.activeItem;if(!r||r.type!=="submenu"||!r.submenu){this._closeChildMenu();return}let s=r.submenu;if(s===this._childMenu)return;n.saveWindowData(),this._closeChildMenu(),this._childMenu=s,this._childIndex=this._activeIndex,s._parentMenu=this,Z.sendMessage(this,j.Msg.UpdateRequest);let o=this.contentNode.children[this._activeIndex];dt.openSubmenu(s,o),e&&(s.activeIndex=-1,s.activateNextItem()),s.activate()}_closeChildMenu(){this._childMenu&&this._childMenu.close()}_startOpenTimer(){this._openTimerID===0&&(this._openTimerID=window.setTimeout(()=>{this._openTimerID=0,this._openChildMenu()},dt.TIMER_DELAY))}_startCloseTimer(){this._closeTimerID===0&&(this._closeTimerID=window.setTimeout(()=>{this._closeTimerID=0,this._closeChildMenu()},dt.TIMER_DELAY))}_cancelOpenTimer(){this._openTimerID!==0&&(clearTimeout(this._openTimerID),this._openTimerID=0)}_cancelCloseTimer(){this._closeTimerID!==0&&(clearTimeout(this._closeTimerID),this._closeTimerID=0)}static saveWindowData(){dt.saveWindowData()}};(function(n){class e{renderItem(s){let o=this.createItemClass(s),l=this.createItemDataset(s),c=this.createItemARIA(s);return fe.li({className:o,dataset:l,tabindex:"0",onfocus:s.onfocus,...c},this.renderIcon(s),this.renderLabel(s),this.renderShortcut(s),this.renderSubmenu(s))}renderIcon(s){let o=this.createIconClass(s);return fe.div({className:o},s.item.icon,s.item.iconLabel)}renderLabel(s){let o=this.formatLabel(s);return fe.div({className:"lm-Menu-itemLabel"},o)}renderShortcut(s){let o=this.formatShortcut(s);return fe.div({className:"lm-Menu-itemShortcut"},o)}renderSubmenu(s){return fe.div({className:"lm-Menu-itemSubmenuIcon"})}createItemClass(s){let o="lm-Menu-item";s.item.isEnabled||(o+=" lm-mod-disabled"),s.item.isToggled&&(o+=" lm-mod-toggled"),s.item.isVisible||(o+=" lm-mod-hidden"),s.active&&(o+=" lm-mod-active"),s.collapsed&&(o+=" lm-mod-collapsed");let l=s.item.className;return l&&(o+=` ${l}`),o}createItemDataset(s){let o,{type:l,command:c,dataset:d}=s.item;return l==="command"?o={...d,type:l,command:c}:o={...d,type:l},o}createIconClass(s){let o="lm-Menu-itemIcon",l=s.item.iconClass;return l?`${o} ${l}`:o}createItemARIA(s){let o={};switch(s.item.type){case"separator":o.role="presentation";break;case"submenu":o["aria-haspopup"]="true",s.item.isEnabled||(o["aria-disabled"]="true");break;default:s.item.isEnabled||(o["aria-disabled"]="true"),o.role="menuitem"}return o}formatLabel(s){let{label:o,mnemonic:l}=s.item;if(l<0||l>=o.length)return o;let c=o.slice(0,l),d=o.slice(l+1),h=o[l],g=fe.span({className:"lm-Menu-itemMnemonic"},h);return[c,g,d]}formatShortcut(s){let o=s.item.keyBinding;return o?Mt.formatKeystroke(o.keys):null}}n.Renderer=e,n.defaultRenderer=new e})(Kt||(Kt={}));var dt;(function(n){n.TIMER_DELAY=300,n.SUBMENU_OVERLAP=3;let e=null,r=0;function s(){return r>0?(r--,e):m()}function o(){e=m(),r++}n.saveWindowData=o;function l(){let y=document.createElement("div"),C=document.createElement("ul");return C.className="lm-Menu-content",y.appendChild(C),C.setAttribute("role","menu"),y.tabIndex=0,y}n.createNode=l;function c(y){return y.type!=="separator"&&y.isEnabled&&y.isVisible}n.canActivate=c;function d(y,C){return new _(y.commands,C)}n.createItem=d;function h(y,C,E){for(let I=y;I;I=I.childMenu)if(Ce.hitTest(I.node,C,E))return!0;return!1}n.hitTestMenus=h;function g(y){let C=new Array(y.length);X.ArrayExt.fill(C,!1);let E=0,I=y.length;for(;E<I;++E){let k=y[E];if(k.isVisible){if(k.type!=="separator")break;C[E]=!0}}let M=I-1;for(;M>=0;--M){let k=y[M];if(k.isVisible){if(k.type!=="separator")break;C[M]=!0}}let S=!1;for(;++E<M;){let k=y[E];k.isVisible&&(k.type!=="separator"?S=!1:S?C[E]=!0:S=!0)}return C}n.computeCollapsed=g;function m(){return{pageXOffset:window.pageXOffset,pageYOffset:window.pageYOffset,clientWidth:document.documentElement.clientWidth,clientHeight:document.documentElement.clientHeight}}function p(y,C,E,I,M,S,k){let B=s(),H=B.pageXOffset,F=B.pageYOffset,J=B.clientWidth,D=B.clientHeight;Z.sendMessage(y,j.Msg.UpdateRequest);let $=D-(M?E:0),G=y.node,Q=G.style;Q.opacity="0",Q.maxHeight=`${$}px`,j.attach(y,S||document.body,k);let{width:ue,height:_e}=G.getBoundingClientRect();!I&&C+ue>H+J&&(C=H+J-ue),!M&&E+_e>F+D&&(E>F+D?E=F+D-_e:E=E-_e),Q.transform=`translate(${Math.max(0,C)}px, ${Math.max(0,E)}px`,Q.opacity="1"}n.openRootMenu=p;function v(y,C){let E=s(),I=E.pageXOffset,M=E.pageYOffset,S=E.clientWidth,k=E.clientHeight;Z.sendMessage(y,j.Msg.UpdateRequest);let B=k,H=y.node,F=H.style;F.opacity="0",F.maxHeight=`${B}px`,j.attach(y,document.body);let{width:J,height:D}=H.getBoundingClientRect(),$=Ce.boxSizing(y.node),G=C.getBoundingClientRect(),Q=G.right-n.SUBMENU_OVERLAP;Q+J>I+S&&(Q=G.left+n.SUBMENU_OVERLAP-J);let ue=G.top-$.borderTop-$.paddingTop;ue+D>M+k&&(ue=G.bottom+$.borderBottom+$.paddingBottom-D),F.transform=`translate(${Math.max(0,Q)}px, ${Math.max(0,ue)}px`,F.opacity="1"}n.openSubmenu=v;function b(y,C,E){let I=-1,M=-1,S=!1,k=C.toUpperCase();for(let B=0,H=y.length;B<H;++B){let F=(B+E)%H,J=y[F];if(!c(J))continue;let D=J.label;if(D.length===0)continue;let $=J.mnemonic;if($>=0&&$<D.length){D[$].toUpperCase()===k&&(I===-1?I=F:S=!0);continue}M===-1&&D[0].toUpperCase()===k&&(M=F)}return{index:I,multiple:S,auto:M}}n.findMnemonic=b;class _{constructor(C,E){this._commands=C,this.type=E.type||"command",this.command=E.command||"",this.args=E.args||mi.JSONExt.emptyObject,this.submenu=E.submenu||null}get label(){return this.type==="command"?this._commands.label(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.label:""}get mnemonic(){return this.type==="command"?this._commands.mnemonic(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.mnemonic:-1}get icon(){if(this.type==="command")return this._commands.icon(this.command,this.args);if(this.type==="submenu"&&this.submenu)return this.submenu.title.icon}get iconClass(){return this.type==="command"?this._commands.iconClass(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.iconClass:""}get iconLabel(){return this.type==="command"?this._commands.iconLabel(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.iconLabel:""}get caption(){return this.type==="command"?this._commands.caption(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.caption:""}get className(){return this.type==="command"?this._commands.className(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.className:""}get dataset(){return this.type==="command"?this._commands.dataset(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.dataset:{}}get isEnabled(){return this.type==="command"?this._commands.isEnabled(this.command,this.args):this.type==="submenu"?this.submenu!==null:!0}get isToggled(){return this.type==="command"?this._commands.isToggled(this.command,this.args):!1}get isVisible(){return this.type==="command"?this._commands.isVisible(this.command,this.args):this.type==="submenu"?this.submenu!==null:!0}get keyBinding(){if(this.type==="command"){let{command:C,args:E}=this;return X.ArrayExt.findLastValue(this._commands.keyBindings,I=>I.command===C&&mi.JSONExt.deepEqual(I.args,E))||null}return null}}})(dt||(dt={}));var vd;(function(n){function e(c,d){let h=s(c.selector),g=c.rank!==void 0?c.rank:1/0;return{...c,selector:h,rank:g,id:d}}n.createItem=e;function r(c,d,h,g){let m=d.target;if(!m)return null;let p=d.currentTarget;if(!p||!p.contains(m)&&(m=document.elementFromPoint(d.clientX,d.clientY),!m||!p.contains(m)))return null;let v=[],b=c.slice();for(;m!==null;){let _=[];for(let y=0,C=b.length;y<C;++y){let E=b[y];E&&Ht.matches(m,E.selector)&&(_.push(E),b[y]=null)}if(_.length!==0&&(h&&_.sort(g?l:o),v.push(..._)),m===p)break;m=m.parentElement}return h||v.sort(g?l:o),v}n.matchItems=r;function s(c){if(c.indexOf(",")!==-1)throw new Error(`Selector cannot contain commas: ${c}`);if(!Ht.isValid(c))throw new Error(`Invalid selector: ${c}`);return c}function o(c,d){let h=c.rank,g=d.rank;return h!==g?h<g?-1:1:c.id-d.id}function l(c,d){let h=Ht.calculateSpecificity(c.selector),g=Ht.calculateSpecificity(d.selector);return h!==g?g-h:o(c,d)}})(vd||(vd={}));var tx=["ArrowLeft","ArrowUp","ArrowRight","ArrowDown","Home","End"],jt=class n extends j{constructor(e={}){super({node:Dt.createNode()}),this._currentIndex=-1,this._titles=[],this._titlesEditable=!1,this._previousTitle=null,this._dragData=null,this._addButtonEnabled=!1,this._tabMoved=new Ie(this),this._currentChanged=new Ie(this),this._addRequested=new Ie(this),this._tabCloseRequested=new Ie(this),this._tabDetachRequested=new Ie(this),this._tabActivateRequested=new Ie(this),this.addClass("lm-TabBar"),this.contentNode.setAttribute("role","tablist"),this.setFlag(j.Flag.DisallowLayout),this._document=e.document||document,this.tabsMovable=e.tabsMovable||!1,this.titlesEditable=e.titlesEditable||!1,this.allowDeselect=e.allowDeselect||!1,this.addButtonEnabled=e.addButtonEnabled||!1,this.insertBehavior=e.insertBehavior||"select-tab-if-needed",this.name=e.name||"",this.orientation=e.orientation||"horizontal",this.removeBehavior=e.removeBehavior||"select-tab-after",this.renderer=e.renderer||n.defaultRenderer}dispose(){this._releaseMouse(),this._titles.length=0,this._previousTitle=null,super.dispose()}get currentChanged(){return this._currentChanged}get tabMoved(){return this._tabMoved}get tabActivateRequested(){return this._tabActivateRequested}get addRequested(){return this._addRequested}get tabCloseRequested(){return this._tabCloseRequested}get tabDetachRequested(){return this._tabDetachRequested}get document(){return this._document}get titlesEditable(){return this._titlesEditable}set titlesEditable(e){this._titlesEditable=e}get currentTitle(){return this._titles[this._currentIndex]||null}set currentTitle(e){this.currentIndex=e?this._titles.indexOf(e):-1}get currentIndex(){return this._currentIndex}set currentIndex(e){if((e<0||e>=this._titles.length)&&(e=-1),this._currentIndex===e)return;let r=this._currentIndex,s=this._titles[r]||null,o=e,l=this._titles[o]||null;this._currentIndex=o,this._previousTitle=s,this.update(),this._currentChanged.emit({previousIndex:r,previousTitle:s,currentIndex:o,currentTitle:l})}get name(){return this._name}set name(e){this._name=e,e?this.contentNode.setAttribute("aria-label",e):this.contentNode.removeAttribute("aria-label")}get orientation(){return this._orientation}set orientation(e){this._orientation!==e&&(this._releaseMouse(),this._orientation=e,this.dataset.orientation=e,this.contentNode.setAttribute("aria-orientation",e))}get addButtonEnabled(){return this._addButtonEnabled}set addButtonEnabled(e){this._addButtonEnabled!==e&&(this._addButtonEnabled=e,e?this.addButtonNode.classList.remove("lm-mod-hidden"):this.addButtonNode.classList.add("lm-mod-hidden"))}get titles(){return this._titles}get contentNode(){return this.node.getElementsByClassName("lm-TabBar-content")[0]}get addButtonNode(){return this.node.getElementsByClassName("lm-TabBar-addButton")[0]}addTab(e){return this.insertTab(this._titles.length,e)}insertTab(e,r){this._releaseMouse();let s=Dt.asTitle(r),o=this._titles.indexOf(s),l=Math.max(0,Math.min(e,this._titles.length));return o===-1?(X.ArrayExt.insert(this._titles,l,s),s.changed.connect(this._onTitleChanged,this),this.update(),this._adjustCurrentForInsert(l,s),s):(l===this._titles.length&&l--,o===l||(X.ArrayExt.move(this._titles,o,l),this.update(),this._adjustCurrentForMove(o,l)),s)}removeTab(e){this.removeTabAt(this._titles.indexOf(e))}removeTabAt(e){this._releaseMouse();let r=X.ArrayExt.removeAt(this._titles,e);r&&(r.changed.disconnect(this._onTitleChanged,this),r===this._previousTitle&&(this._previousTitle=null),this.update(),this._adjustCurrentForRemove(e,r))}clearTabs(){if(this._titles.length===0)return;this._releaseMouse();for(let s of this._titles)s.changed.disconnect(this._onTitleChanged,this);let e=this.currentIndex,r=this.currentTitle;this._currentIndex=-1,this._previousTitle=null,this._titles.length=0,this.update(),e!==-1&&this._currentChanged.emit({previousIndex:e,previousTitle:r,currentIndex:-1,currentTitle:null})}releaseMouse(){this._releaseMouse()}handleEvent(e){switch(e.type){case"pointerdown":this._evtPointerDown(e);break;case"pointermove":this._evtPointerMove(e);break;case"pointerup":this._evtPointerUp(e);break;case"dblclick":this._evtDblClick(e);break;case"keydown":e.eventPhase===Event.CAPTURING_PHASE?this._evtKeyDownCapturing(e):this._evtKeyDown(e);break;case"contextmenu":e.preventDefault(),e.stopPropagation();break}}onBeforeAttach(e){this.node.addEventListener("pointerdown",this),this.node.addEventListener("dblclick",this),this.node.addEventListener("keydown",this)}onAfterDetach(e){this.node.removeEventListener("pointerdown",this),this.node.removeEventListener("dblclick",this),this.node.removeEventListener("keydown",this),this._releaseMouse()}onUpdateRequest(e){var r;let s=this._titles,o=this.renderer,l=this.currentTitle,c=new Array(s.length),d=(r=this._getCurrentTabindex())!==null&&r!==void 0?r:this._currentIndex>-1?this._currentIndex:0;for(let h=0,g=s.length;h<g;++h){let m=s[h],p=m===l,v=p?g:g-h-1,b=d===h?0:-1;c[h]=o.renderTab({title:m,current:p,zIndex:v,tabIndex:b})}Ut.render(c,this.contentNode)}_getCurrentTabindex(){let e=null,r=this.contentNode.querySelector('li[tabindex="0"]');return r?e=[...this.contentNode.children].indexOf(r):this._addButtonEnabled&&this.addButtonNode.getAttribute("tabindex")==="0"&&(e=-1),e}_evtDblClick(e){if(!this.titlesEditable)return;let r=this.contentNode.children,s=X.ArrayExt.findFirstIndex(r,c=>Ce.hitTest(c,e.clientX,e.clientY));if(s===-1)return;let o=this.titles[s],l=r[s].querySelector(".lm-TabBar-tabLabel");if(l&&l.contains(e.target)){let c=o.label||"",d=l.innerHTML;l.innerHTML="";let h=document.createElement("input");h.classList.add("lm-TabBar-tabInput"),h.value=c,l.appendChild(h);let g=()=>{h.removeEventListener("blur",g),l.innerHTML=d,this.node.addEventListener("keydown",this)};h.addEventListener("dblclick",m=>m.stopPropagation()),h.addEventListener("blur",g),h.addEventListener("keydown",m=>{m.key==="Enter"?(h.value!==""&&(o.label=o.caption=h.value),g()):m.key==="Escape"&&g()}),this.node.removeEventListener("keydown",this),h.select(),h.focus(),l.children.length>0&&l.children[0].focus()}}_evtKeyDownCapturing(e){e.eventPhase===Event.CAPTURING_PHASE&&(e.preventDefault(),e.stopPropagation(),e.key==="Escape"&&this._releaseMouse())}_evtKeyDown(e){var r,s,o;if(!(e.key==="Tab"||e.eventPhase===Event.CAPTURING_PHASE)){if(e.key==="Enter"||e.key==="Spacebar"||e.key===" "){let l=document.activeElement;if(this.addButtonEnabled&&this.addButtonNode.contains(l))e.preventDefault(),e.stopPropagation(),this._addRequested.emit();else{let c=X.ArrayExt.findFirstIndex(this.contentNode.children,d=>d.contains(l));c>=0&&(e.preventDefault(),e.stopPropagation(),this.currentIndex=c)}}else if(tx.includes(e.key)){let l=[...this.contentNode.children];if(this.addButtonEnabled&&l.push(this.addButtonNode),l.length<=1)return;e.preventDefault(),e.stopPropagation();let c=l.indexOf(document.activeElement);c===-1&&(c=this._currentIndex);let d;e.key==="ArrowRight"&&this._orientation==="horizontal"||e.key==="ArrowDown"&&this._orientation==="vertical"?d=(r=l[c+1])!==null&&r!==void 0?r:l[0]:e.key==="ArrowLeft"&&this._orientation==="horizontal"||e.key==="ArrowUp"&&this._orientation==="vertical"?d=(s=l[c-1])!==null&&s!==void 0?s:l[l.length-1]:e.key==="Home"?d=l[0]:e.key==="End"&&(d=l[l.length-1]),d&&((o=l[c])===null||o===void 0||o.setAttribute("tabindex","-1"),d?.setAttribute("tabindex","0"),d.focus())}}}_evtPointerDown(e){if(e.button!==0&&e.button!==1||this._dragData||e.target.classList.contains("lm-TabBar-tabInput"))return;let r=this.addButtonEnabled&&this.addButtonNode.contains(e.target),s=this.contentNode.children,o=X.ArrayExt.findFirstIndex(s,c=>Ce.hitTest(c,e.clientX,e.clientY));if(o===-1&&!r||(e.preventDefault(),e.stopPropagation(),this._dragData={tab:s[o],index:o,pressX:e.clientX,pressY:e.clientY,tabPos:-1,tabSize:-1,tabPressPos:-1,targetIndex:-1,tabLayout:null,contentRect:null,override:null,dragActive:!1,dragAborted:!1,detachRequested:!1},this.document.addEventListener("pointerup",this,!0),e.button===1||r))return;let l=s[o].querySelector(this.renderer.closeIconSelector);l&&l.contains(e.target)||(this.tabsMovable&&(this.document.addEventListener("pointermove",this,!0),this.document.addEventListener("keydown",this,!0),this.document.addEventListener("contextmenu",this,!0)),this.allowDeselect&&this.currentIndex===o?this.currentIndex=-1:this.currentIndex=o,this.currentIndex!==-1&&this._tabActivateRequested.emit({index:this.currentIndex,title:this.currentTitle}))}_evtPointerMove(e){let r=this._dragData;if(!r)return;e.preventDefault(),e.stopPropagation();let s=this.contentNode.children;if(!(!r.dragActive&&!Dt.dragExceeded(r,e))){if(!r.dragActive){let o=r.tab.getBoundingClientRect();this._orientation==="horizontal"?(r.tabPos=r.tab.offsetLeft,r.tabSize=o.width,r.tabPressPos=r.pressX-o.left):(r.tabPos=r.tab.offsetTop,r.tabSize=o.height,r.tabPressPos=r.pressY-o.top),r.tabPressOffset={x:r.pressX-o.left,y:r.pressY-o.top},r.tabLayout=Dt.snapTabLayout(s,this._orientation),r.contentRect=this.contentNode.getBoundingClientRect(),r.override=ut.overrideCursor("default"),r.tab.classList.add("lm-mod-dragging"),this.addClass("lm-mod-dragging"),r.dragActive=!0}if(!r.detachRequested&&Dt.detachExceeded(r,e)){r.detachRequested=!0;let o=r.index,l=e.clientX,c=e.clientY,d=s[o],h=this._titles[o];if(this._tabDetachRequested.emit({index:o,title:h,tab:d,clientX:l,clientY:c,offset:r.tabPressOffset}),r.dragAborted)return}Dt.layoutTabs(s,r,e,this._orientation)}}_evtPointerUp(e){if(e.button!==0&&e.button!==1)return;let r=this._dragData;if(!r)return;if(e.preventDefault(),e.stopPropagation(),this.document.removeEventListener("pointermove",this,!0),this.document.removeEventListener("pointerup",this,!0),this.document.removeEventListener("keydown",this,!0),this.document.removeEventListener("contextmenu",this,!0),!r.dragActive){if(this._dragData=null,this.addButtonEnabled&&this.addButtonNode.contains(e.target)){this._addRequested.emit(void 0);return}let l=this.contentNode.children,c=X.ArrayExt.findFirstIndex(l,g=>Ce.hitTest(g,e.clientX,e.clientY));if(c!==r.index)return;let d=this._titles[c];if(!d.closable)return;if(e.button===1){this._tabCloseRequested.emit({index:c,title:d});return}let h=l[c].querySelector(this.renderer.closeIconSelector);if(h&&h.contains(e.target)){this._tabCloseRequested.emit({index:c,title:d});return}return}if(e.button!==0)return;Dt.finalizeTabPosition(r,this._orientation),r.tab.classList.remove("lm-mod-dragging");let s=Dt.parseTransitionDuration(r.tab);setTimeout(()=>{if(r.dragAborted)return;this._dragData=null,Dt.resetTabPositions(this.contentNode.children,this._orientation),r.override.dispose(),this.removeClass("lm-mod-dragging");let o=r.index,l=r.targetIndex;l===-1||o===l||(X.ArrayExt.move(this._titles,o,l),this._adjustCurrentForMove(o,l),this._tabMoved.emit({fromIndex:o,toIndex:l,title:this._titles[l]}),Z.sendMessage(this,j.Msg.UpdateRequest))},s)}_releaseMouse(){let e=this._dragData;e&&(this._dragData=null,this.document.removeEventListener("pointermove",this,!0),this.document.removeEventListener("pointerup",this,!0),this.document.removeEventListener("keydown",this,!0),this.document.removeEventListener("contextmenu",this,!0),e.dragAborted=!0,e.dragActive&&(Dt.resetTabPositions(this.contentNode.children,this._orientation),e.override.dispose(),e.tab.classList.remove("lm-mod-dragging"),this.removeClass("lm-mod-dragging")))}_adjustCurrentForInsert(e,r){let s=this.currentTitle,o=this._currentIndex,l=this.insertBehavior;if(l==="select-tab"||l==="select-tab-if-needed"&&o===-1){this._currentIndex=e,this._previousTitle=s,this._currentChanged.emit({previousIndex:o,previousTitle:s,currentIndex:e,currentTitle:r});return}o>=e&&this._currentIndex++}_adjustCurrentForMove(e,r){this._currentIndex===e?this._currentIndex=r:this._currentIndex<e&&this._currentIndex>=r?this._currentIndex++:this._currentIndex>e&&this._currentIndex<=r&&this._currentIndex--}_adjustCurrentForRemove(e,r){let s=this._currentIndex,o=this.removeBehavior;if(s!==e){s>e&&this._currentIndex--;return}if(this._titles.length===0){this._currentIndex=-1,this._currentChanged.emit({previousIndex:e,previousTitle:r,currentIndex:-1,currentTitle:null});return}if(o==="select-tab-after"){this._currentIndex=Math.min(e,this._titles.length-1),this._currentChanged.emit({previousIndex:e,previousTitle:r,currentIndex:this._currentIndex,currentTitle:this.currentTitle});return}if(o==="select-tab-before"){this._currentIndex=Math.max(0,e-1),this._currentChanged.emit({previousIndex:e,previousTitle:r,currentIndex:this._currentIndex,currentTitle:this.currentTitle});return}if(o==="select-previous-tab"){this._previousTitle?(this._currentIndex=this._titles.indexOf(this._previousTitle),this._previousTitle=null):this._currentIndex=Math.min(e,this._titles.length-1),this._currentChanged.emit({previousIndex:e,previousTitle:r,currentIndex:this._currentIndex,currentTitle:this.currentTitle});return}this._currentIndex=-1,this._currentChanged.emit({previousIndex:e,previousTitle:r,currentIndex:-1,currentTitle:null})}_onTitleChanged(e){this.update()}};(function(n){class e{constructor(){this.closeIconSelector=".lm-TabBar-tabCloseIcon",this._tabID=0,this._tabKeys=new WeakMap,this._uuid=++e._nInstance}renderTab(s){let o=s.title.caption,l=this.createTabKey(s),c=l,d=this.createTabStyle(s),h=this.createTabClass(s),g=this.createTabDataset(s),m=this.createTabARIA(s);return s.title.closable?fe.li({id:c,key:l,className:h,title:o,style:d,dataset:g,...m},this.renderIcon(s),this.renderLabel(s),this.renderCloseIcon(s)):fe.li({id:c,key:l,className:h,title:o,style:d,dataset:g,...m},this.renderIcon(s),this.renderLabel(s))}renderIcon(s){let{title:o}=s,l=this.createIconClass(s);return fe.div({className:l},o.icon,o.iconLabel)}renderLabel(s){return fe.div({className:"lm-TabBar-tabLabel"},s.title.label)}renderCloseIcon(s){return fe.div({className:"lm-TabBar-tabCloseIcon"})}createTabKey(s){let o=this._tabKeys.get(s.title);return o===void 0&&(o=`tab-key-${this._uuid}-${this._tabID++}`,this._tabKeys.set(s.title,o)),o}createTabStyle(s){return{zIndex:`${s.zIndex}`}}createTabClass(s){let o="lm-TabBar-tab";return s.title.className&&(o+=` ${s.title.className}`),s.title.closable&&(o+=" lm-mod-closable"),s.current&&(o+=" lm-mod-current"),o}createTabDataset(s){return s.title.dataset}createTabARIA(s){var o;return{role:"tab","aria-selected":s.current.toString(),tabindex:`${(o=s.tabIndex)!==null&&o!==void 0?o:"-1"}`}}createIconClass(s){let o="lm-TabBar-tabIcon",l=s.title.iconClass;return l?`${o} ${l}`:o}}e._nInstance=0,n.Renderer=e,n.defaultRenderer=new e,n.addButtonSelector=".lm-TabBar-addButton"})(jt||(jt={}));var Dt;(function(n){n.DRAG_THRESHOLD=5,n.DETACH_THRESHOLD=20;function e(){let m=document.createElement("div"),p=document.createElement("ul");p.setAttribute("role","tablist"),p.className="lm-TabBar-content",m.appendChild(p);let v=document.createElement("div");return v.className="lm-TabBar-addButton lm-mod-hidden",v.setAttribute("tabindex","-1"),v.setAttribute("role","button"),m.appendChild(v),m}n.createNode=e;function r(m){return m instanceof Zn?m:new Zn(m)}n.asTitle=r;function s(m){let p=window.getComputedStyle(m);return 1e3*(parseFloat(p.transitionDuration)||0)}n.parseTransitionDuration=s;function o(m,p){let v=new Array(m.length);for(let b=0,_=m.length;b<_;++b){let y=m[b],C=window.getComputedStyle(y);p==="horizontal"?v[b]={pos:y.offsetLeft,size:y.offsetWidth,margin:parseFloat(C.marginLeft)||0}:v[b]={pos:y.offsetTop,size:y.offsetHeight,margin:parseFloat(C.marginTop)||0}}return v}n.snapTabLayout=o;function l(m,p){let v=Math.abs(p.clientX-m.pressX),b=Math.abs(p.clientY-m.pressY);return v>=n.DRAG_THRESHOLD||b>=n.DRAG_THRESHOLD}n.dragExceeded=l;function c(m,p){let v=m.contentRect;return p.clientX<v.left-n.DETACH_THRESHOLD||p.clientX>=v.right+n.DETACH_THRESHOLD||p.clientY<v.top-n.DETACH_THRESHOLD||p.clientY>=v.bottom+n.DETACH_THRESHOLD}n.detachExceeded=c;function d(m,p,v,b){let _,y,C,E;b==="horizontal"?(_=p.pressX,y=v.clientX-p.contentRect.left,C=v.clientX,E=p.contentRect.width):(_=p.pressY,y=v.clientY-p.contentRect.top,C=v.clientY,E=p.contentRect.height);let I=p.index,M=y-p.tabPressPos,S=M+p.tabSize;for(let k=0,B=m.length;k<B;++k){let H,F=p.tabLayout[k],J=F.pos+(F.size>>1);if(k<p.index&&M<J)H=`${p.tabSize+p.tabLayout[k+1].margin}px`,I=Math.min(I,k);else if(k>p.index&&S>J)H=`${-p.tabSize-F.margin}px`,I=Math.max(I,k);else if(k===p.index){let D=C-_,$=E-(p.tabPos+p.tabSize);H=`${Math.max(-p.tabPos,Math.min(D,$))}px`}else H="";b==="horizontal"?m[k].style.left=H:m[k].style.top=H}p.targetIndex=I}n.layoutTabs=d;function h(m,p){let v;p==="horizontal"?v=m.contentRect.width:v=m.contentRect.height;let b;if(m.targetIndex===m.index)b=0;else if(m.targetIndex>m.index){let C=m.tabLayout[m.targetIndex];b=C.pos+C.size-m.tabSize-m.tabPos}else b=m.tabLayout[m.targetIndex].pos-m.tabPos;let _=v-(m.tabPos+m.tabSize),y=Math.max(-m.tabPos,Math.min(b,_));p==="horizontal"?m.tab.style.left=`${y}px`:m.tab.style.top=`${y}px`}n.finalizeTabPosition=h;function g(m,p){for(let v of m)p==="horizontal"?v.style.left="":v.style.top=""}n.resetTabPositions=g})(Dt||(Dt={}));var io=class extends pi{constructor(e){super(),this._spacing=4,this._dirty=!1,this._root=null,this._box=null,this._items=new Map,this.renderer=e.renderer,e.spacing!==void 0&&(this._spacing=Jn.clampDimension(e.spacing)),this._document=e.document||document,this._hiddenMode=e.hiddenMode!==void 0?e.hiddenMode:j.HiddenMode.Display}dispose(){let e=this[Symbol.iterator]();this._items.forEach(r=>{r.dispose()}),this._box=null,this._root=null,this._items.clear();for(let r of e)r.dispose();super.dispose()}get hiddenMode(){return this._hiddenMode}set hiddenMode(e){if(this._hiddenMode!==e){this._hiddenMode=e;for(let r of this.tabBars())if(r.titles.length>1)for(let s of r.titles)s.owner.hiddenMode=this._hiddenMode}}get spacing(){return this._spacing}set spacing(e){e=Jn.clampDimension(e),this._spacing!==e&&(this._spacing=e,this.parent&&this.parent.fit())}get isEmpty(){return this._root===null}[Symbol.iterator](){return this._root?this._root.iterAllWidgets():(0,X.empty)()}widgets(){return this._root?this._root.iterUserWidgets():(0,X.empty)()}selectedWidgets(){return this._root?this._root.iterSelectedWidgets():(0,X.empty)()}tabBars(){return this._root?this._root.iterTabBars():(0,X.empty)()}handles(){return this._root?this._root.iterHandles():(0,X.empty)()}moveHandle(e,r,s){let o=e.classList.contains("lm-mod-hidden");if(!this._root||o)return;let l=this._root.findSplitNode(e);if(!l)return;let c;l.node.orientation==="horizontal"?c=r-e.offsetLeft:c=s-e.offsetTop,c!==0&&(l.node.holdSizes(),Ct.adjust(l.node.sizers,l.index,c),this.parent&&this.parent.update())}saveLayout(){return this._root?(this._root.holdAllSizes(),{main:this._root.createConfig()}):{main:null}}restoreLayout(e){let r=new Set,s;e.main?s=Ke.normalizeAreaConfig(e.main,r):s=null;let o=this.widgets(),l=this.tabBars(),c=this.handles();this._root=null;for(let d of o)r.has(d)||(d.parent=null);for(let d of l)d.dispose();for(let d of c)d.parentNode&&d.parentNode.removeChild(d);for(let d of r)d.parent=this.parent;s?this._root=Ke.realizeAreaConfig(s,{createTabBar:d=>this._createTabBar(),createHandle:()=>this._createHandle()},this._document):this._root=null,this.parent&&(r.forEach(d=>{this.attachWidget(d)}),this.parent.fit())}addWidget(e,r={}){let s=r.ref||null,o=r.mode||"tab-after",l=null;if(this._root&&s&&(l=this._root.findTabNode(s)),s&&!l)throw new Error("Reference widget is not in the layout.");switch(e.parent=this.parent,o){case"tab-after":this._insertTab(e,s,l,!0);break;case"tab-before":this._insertTab(e,s,l,!1);break;case"split-top":this._insertSplit(e,s,l,"vertical",!1);break;case"split-left":this._insertSplit(e,s,l,"horizontal",!1);break;case"split-right":this._insertSplit(e,s,l,"horizontal",!0);break;case"split-bottom":this._insertSplit(e,s,l,"vertical",!0);break;case"merge-top":this._insertSplit(e,s,l,"vertical",!1,!0);break;case"merge-left":this._insertSplit(e,s,l,"horizontal",!1,!0);break;case"merge-right":this._insertSplit(e,s,l,"horizontal",!0,!0);break;case"merge-bottom":this._insertSplit(e,s,l,"vertical",!0,!0);break}this.parent&&(this.attachWidget(e),this.parent.fit())}removeWidget(e){this._removeWidget(e),this.parent&&(this.detachWidget(e),this.parent.fit())}hitTestTabAreas(e,r){if(!this._root||!this.parent||!this.parent.isVisible)return null;this._box||(this._box=Ce.boxSizing(this.parent.node));let s=this.parent.node.getBoundingClientRect(),o=e-s.left-this._box.borderLeft,l=r-s.top-this._box.borderTop,c=this._root.hitTestTabNodes(o,l);if(!c)return null;let{tabBar:d,top:h,left:g,width:m,height:p}=c,v=this._box.borderLeft+this._box.borderRight,b=this._box.borderTop+this._box.borderBottom,_=s.width-v-(g+m),y=s.height-b-(h+p);return{tabBar:d,x:o,y:l,top:h,left:g,right:_,bottom:y,width:m,height:p}}init(){super.init();for(let e of this)this.attachWidget(e);for(let e of this.handles())this.parent.node.appendChild(e);this.parent.fit()}attachWidget(e){this.parent.node!==e.node.parentNode&&(this._items.set(e,new Ki(e)),this.parent.isAttached&&Z.sendMessage(e,j.Msg.BeforeAttach),this.parent.node.appendChild(e.node),this.parent.isAttached&&Z.sendMessage(e,j.Msg.AfterAttach))}detachWidget(e){if(this.parent.node!==e.node.parentNode)return;this.parent.isAttached&&Z.sendMessage(e,j.Msg.BeforeDetach),this.parent.node.removeChild(e.node),this.parent.isAttached&&Z.sendMessage(e,j.Msg.AfterDetach);let r=this._items.get(e);r&&(this._items.delete(e),r.dispose())}onBeforeShow(e){super.onBeforeShow(e),this.parent.update()}onBeforeAttach(e){super.onBeforeAttach(e),this.parent.fit()}onChildShown(e){this.parent.fit()}onChildHidden(e){this.parent.fit()}onResize(e){this.parent.isVisible&&this._update(e.width,e.height)}onUpdateRequest(e){this.parent.isVisible&&this._update(-1,-1)}onFitRequest(e){this.parent.isAttached&&this._fit()}_removeWidget(e){if(!this._root)return;let r=this._root.findTabNode(e);if(!r)return;if(Ke.removeAria(e),r.tabBar.titles.length>1){if(r.tabBar.removeTab(e.title),this._hiddenMode===j.HiddenMode.Scale&&r.tabBar.titles.length==1){let v=r.tabBar.titles[0].owner;v.hiddenMode=j.HiddenMode.Display}return}if(r.tabBar.dispose(),this._root===r){this._root=null;return}this._root.holdAllSizes();let s=r.parent;r.parent=null;let o=X.ArrayExt.removeFirstOf(s.children,r),l=X.ArrayExt.removeAt(s.handles,o);if(X.ArrayExt.removeAt(s.sizers,o),l.parentNode&&l.parentNode.removeChild(l),s.children.length>1){s.syncHandles();return}let c=s.parent;s.parent=null;let d=s.children[0],h=s.handles[0];if(s.children.length=0,s.handles.length=0,s.sizers.length=0,h.parentNode&&h.parentNode.removeChild(h),this._root===s){d.parent=null,this._root=d;return}let g=c,m=g.children.indexOf(s);if(d instanceof Ke.TabLayoutNode){d.parent=g,g.children[m]=d;return}let p=X.ArrayExt.removeAt(g.handles,m);X.ArrayExt.removeAt(g.children,m),X.ArrayExt.removeAt(g.sizers,m),p.parentNode&&p.parentNode.removeChild(p);for(let v=0,b=d.children.length;v<b;++v){let _=d.children[v],y=d.handles[v],C=d.sizers[v];X.ArrayExt.insert(g.children,m+v,_),X.ArrayExt.insert(g.handles,m+v,y),X.ArrayExt.insert(g.sizers,m+v,C),_.parent=g}d.children.length=0,d.handles.length=0,d.sizers.length=0,d.parent=null,g.syncHandles()}_createTabNode(e){let r=new Ke.TabLayoutNode(this._createTabBar());return r.tabBar.addTab(e.title),Ke.addAria(e,r.tabBar),r}_insertTab(e,r,s,o){if(e===r)return;if(!this._root){let c=new Ke.TabLayoutNode(this._createTabBar());c.tabBar.addTab(e.title),this._root=c,Ke.addAria(e,c.tabBar);return}s||(s=this._root.findFirstTabNode()),s.tabBar.titles.indexOf(e.title)===-1&&(this._removeWidget(e),e.hide());let l;if(r?l=s.tabBar.titles.indexOf(r.title):l=s.tabBar.currentIndex,this._hiddenMode===j.HiddenMode.Scale)if(s.tabBar.titles.length===0)e.hiddenMode=j.HiddenMode.Display;else if(s.tabBar.titles.length==1){let c=s.tabBar.titles[0].owner;c.hiddenMode=j.HiddenMode.Scale}else e.hiddenMode=j.HiddenMode.Scale;else e.hiddenMode=this._hiddenMode;s.tabBar.insertTab(l+(o?1:0),e.title),Ke.addAria(e,s.tabBar)}_insertSplit(e,r,s,o,l,c=!1){if(e===r&&s&&s.tabBar.titles.length===1)return;if(this._removeWidget(e),!this._root){this._root=this._createTabNode(e);return}if(!s||!s.parent){let v=this._splitRoot(o),b=l?v.children.length:0;v.normalizeSizes();let _=Ke.createSizer(s?1:Ke.GOLDEN_RATIO),y=this._createTabNode(e);X.ArrayExt.insert(v.children,b,y),X.ArrayExt.insert(v.sizers,b,_),X.ArrayExt.insert(v.handles,b,this._createHandle()),y.parent=v,v.normalizeSizes(),v.syncHandles();return}let d=s.parent;if(d.orientation===o){let v=d.children.indexOf(s);if(c){let C=v+(l?1:-1),E=d.children[C];if(E instanceof Ke.TabLayoutNode){this._insertTab(e,null,E,!0),++E.tabBar.currentIndex;return}}d.normalizeSizes();let b=d.sizers[v].sizeHint/=2,_=v+(l?1:0),y=this._createTabNode(e);X.ArrayExt.insert(d.children,_,y),X.ArrayExt.insert(d.sizers,_,Ke.createSizer(b)),X.ArrayExt.insert(d.handles,_,this._createHandle()),y.parent=d,d.syncHandles();return}let h=X.ArrayExt.removeFirstOf(d.children,s),g=new Ke.SplitLayoutNode(o);g.normalized=!0,g.children.push(s),g.sizers.push(Ke.createSizer(.5)),g.handles.push(this._createHandle()),s.parent=g;let m=l?1:0,p=this._createTabNode(e);X.ArrayExt.insert(g.children,m,p),X.ArrayExt.insert(g.sizers,m,Ke.createSizer(.5)),X.ArrayExt.insert(g.handles,m,this._createHandle()),p.parent=g,g.syncHandles(),X.ArrayExt.insert(d.children,h,g),g.parent=d}_splitRoot(e){let r=this._root;if(r instanceof Ke.SplitLayoutNode&&r.orientation===e)return r;let s=this._root=new Ke.SplitLayoutNode(e);return r&&(s.children.push(r),s.sizers.push(Ke.createSizer(0)),s.handles.push(this._createHandle()),r.parent=s),s}_fit(){let e=0,r=0;if(this._root){let l=this._root.fit(this._spacing,this._items);e=l.minWidth,r=l.minHeight}let s=this._box=Ce.boxSizing(this.parent.node);e+=s.horizontalSum,r+=s.verticalSum;let o=this.parent.node.style;o.minWidth=`${e}px`,o.minHeight=`${r}px`,this._dirty=!0,this.parent.parent&&Z.sendMessage(this.parent.parent,j.Msg.FitRequest),this._dirty&&Z.sendMessage(this.parent,j.Msg.UpdateRequest)}_update(e,r){if(this._dirty=!1,!this._root)return;e<0&&(e=this.parent.node.offsetWidth),r<0&&(r=this.parent.node.offsetHeight),this._box||(this._box=Ce.boxSizing(this.parent.node));let s=this._box.paddingTop,o=this._box.paddingLeft,l=e-this._box.horizontalSum,c=r-this._box.verticalSum;this._root.update(s,o,l,c,this._spacing,this._items)}_createTabBar(){let e=this.renderer.createTabBar(this._document);return e.orientation="horizontal",this.parent&&this.attachWidget(e),e}_createHandle(){let e=this.renderer.createHandle(),r=e.style;return r.position="absolute",r.contain="strict",r.top="0",r.left="0",r.width="0",r.height="0",this.parent&&this.parent.node.appendChild(e),e}},Ke;(function(n){n.GOLDEN_RATIO=.618;function e(v){let b=new Xt;return b.sizeHint=v,b.size=v,b}n.createSizer=e;function r(v,b){let _;return v.type==="tab-area"?_=h(v,b):_=g(v,b),_}n.normalizeAreaConfig=r;function s(v,b,_){let y;return v.type==="tab-area"?y=m(v,b,_):y=p(v,b,_),y}n.realizeAreaConfig=s;class o{constructor(b){this.parent=null,this._top=0,this._left=0,this._width=0,this._height=0;let _=new Xt,y=new Xt;_.stretch=0,y.stretch=1,this.tabBar=b,this.sizers=[_,y]}get top(){return this._top}get left(){return this._left}get width(){return this._width}get height(){return this._height}*iterAllWidgets(){yield this.tabBar,yield*this.iterUserWidgets()}*iterUserWidgets(){for(let b of this.tabBar.titles)yield b.owner}*iterSelectedWidgets(){let b=this.tabBar.currentTitle;b&&(yield b.owner)}*iterTabBars(){yield this.tabBar}*iterHandles(){}findTabNode(b){return this.tabBar.titles.indexOf(b.title)!==-1?this:null}findSplitNode(b){return null}findFirstTabNode(){return this}hitTestTabNodes(b,_){return b<this._left||b>=this._left+this._width||_<this._top||_>=this._top+this._height?null:this}createConfig(){let b=this.tabBar.titles.map(y=>y.owner),_=this.tabBar.currentIndex;return{type:"tab-area",widgets:b,currentIndex:_}}holdAllSizes(){}fit(b,_){let y=0,C=0,E=1/0,I=1/0,M=_.get(this.tabBar),S=this.tabBar.currentTitle,k=S?_.get(S.owner):void 0,[B,H]=this.sizers;return M&&M.fit(),k&&k.fit(),M&&!M.isHidden?(y=Math.max(y,M.minWidth),C+=M.minHeight,B.minSize=M.minHeight,B.maxSize=M.maxHeight):(B.minSize=0,B.maxSize=0),k&&!k.isHidden?(y=Math.max(y,k.minWidth),C+=k.minHeight,H.minSize=k.minHeight,H.maxSize=1/0):(H.minSize=0,H.maxSize=1/0),{minWidth:y,minHeight:C,maxWidth:E,maxHeight:I}}update(b,_,y,C,E,I){this._top=_,this._left=b,this._width=y,this._height=C;let M=I.get(this.tabBar),S=this.tabBar.currentTitle,k=S?I.get(S.owner):void 0;if(Ct.calc(this.sizers,C),M&&!M.isHidden){let B=this.sizers[0].size;M.update(b,_,y,B),_+=B}if(k&&!k.isHidden){let B=this.sizers[1].size;k.update(b,_,y,B)}}}n.TabLayoutNode=o;class l{constructor(b){this.parent=null,this.normalized=!1,this.children=[],this.sizers=[],this.handles=[],this.orientation=b}*iterAllWidgets(){for(let b of this.children)yield*b.iterAllWidgets()}*iterUserWidgets(){for(let b of this.children)yield*b.iterUserWidgets()}*iterSelectedWidgets(){for(let b of this.children)yield*b.iterSelectedWidgets()}*iterTabBars(){for(let b of this.children)yield*b.iterTabBars()}*iterHandles(){yield*this.handles;for(let b of this.children)yield*b.iterHandles()}findTabNode(b){for(let _=0,y=this.children.length;_<y;++_){let C=this.children[_].findTabNode(b);if(C)return C}return null}findSplitNode(b){let _=this.handles.indexOf(b);if(_!==-1)return{index:_,node:this};for(let y=0,C=this.children.length;y<C;++y){let E=this.children[y].findSplitNode(b);if(E)return E}return null}findFirstTabNode(){return this.children.length===0?null:this.children[0].findFirstTabNode()}hitTestTabNodes(b,_){for(let y=0,C=this.children.length;y<C;++y){let E=this.children[y].hitTestTabNodes(b,_);if(E)return E}return null}createConfig(){let b=this.orientation,_=this.createNormalizedSizes(),y=this.children.map(C=>C.createConfig());return{type:"split-area",orientation:b,children:y,sizes:_}}syncHandles(){this.handles.forEach((b,_)=>{b.setAttribute("data-orientation",this.orientation),_===this.handles.length-1?b.classList.add("lm-mod-hidden"):b.classList.remove("lm-mod-hidden")})}holdSizes(){for(let b of this.sizers)b.sizeHint=b.size}holdAllSizes(){for(let b of this.children)b.holdAllSizes();this.holdSizes()}normalizeSizes(){let b=this.sizers.length;if(b===0)return;this.holdSizes();let _=this.sizers.reduce((y,C)=>y+C.sizeHint,0);if(_===0)for(let y of this.sizers)y.size=y.sizeHint=1/b;else for(let y of this.sizers)y.size=y.sizeHint/=_;this.normalized=!0}createNormalizedSizes(){let b=this.sizers.length;if(b===0)return[];let _=this.sizers.map(C=>C.size),y=_.reduce((C,E)=>C+E,0);if(y===0)for(let C=_.length-1;C>-1;C--)_[C]=1/b;else for(let C=_.length-1;C>-1;C--)_[C]/=y;return _}fit(b,_){let y=this.orientation==="horizontal",C=Math.max(0,this.children.length-1)*b,E=y?C:0,I=y?0:C,M=1/0,S=1/0;for(let k=0,B=this.children.length;k<B;++k){let H=this.children[k].fit(b,_);y?(I=Math.max(I,H.minHeight),E+=H.minWidth,this.sizers[k].minSize=H.minWidth):(E=Math.max(E,H.minWidth),I+=H.minHeight,this.sizers[k].minSize=H.minHeight)}return{minWidth:E,minHeight:I,maxWidth:M,maxHeight:S}}update(b,_,y,C,E,I){let M=this.orientation==="horizontal",S=Math.max(0,this.children.length-1)*E,k=Math.max(0,(M?y:C)-S);if(this.normalized){for(let B of this.sizers)B.sizeHint*=k;this.normalized=!1}Ct.calc(this.sizers,k);for(let B=0,H=this.children.length;B<H;++B){let F=this.children[B],J=this.sizers[B].size,D=this.handles[B].style;M?(F.update(b,_,J,C,E,I),b+=J,D.top=`${_}px`,D.left=`${b}px`,D.width=`${E}px`,D.height=`${C}px`,b+=E):(F.update(b,_,y,J,E,I),_+=J,D.top=`${_}px`,D.left=`${b}px`,D.width=`${y}px`,D.height=`${E}px`,_+=E)}}}n.SplitLayoutNode=l;function c(v,b){v.node.setAttribute("role","tabpanel");let _=b.renderer;if(_ instanceof jt.Renderer){let y=_.createTabKey({title:v.title,current:!1,zIndex:0});v.node.setAttribute("aria-labelledby",y)}}n.addAria=c;function d(v){v.node.removeAttribute("role"),v.node.removeAttribute("aria-labelledby")}n.removeAria=d;function h(v,b){if(v.widgets.length===0)return null;let _=[];for(let C of v.widgets)b.has(C)||(b.add(C),_.push(C));if(_.length===0)return null;let y=v.currentIndex;return y!==-1&&(y<0||y>=_.length)&&(y=0),{type:"tab-area",widgets:_,currentIndex:y}}function g(v,b){let _=v.orientation,y=[],C=[];for(let E=0,I=v.children.length;E<I;++E){let M=r(v.children[E],b);M&&(M.type==="tab-area"||M.orientation!==_?(y.push(M),C.push(Math.abs(v.sizes[E]||0))):(y.push(...M.children),C.push(...M.sizes)))}return y.length===0?null:y.length===1?y[0]:{type:"split-area",orientation:_,children:y,sizes:C}}function m(v,b,_){let y=b.createTabBar(_);for(let C of v.widgets)C.hide(),y.addTab(C.title),n.addAria(C,y);return y.currentIndex=v.currentIndex,new o(y)}function p(v,b,_){let y=new l(v.orientation);return v.children.forEach((C,E)=>{let I=s(C,b,_),M=e(v.sizes[E]),S=b.createHandle();y.children.push(I),y.handles.push(S),y.sizers.push(M),I.parent=y}),y.syncHandles(),y.normalizeSizes(),y}})(Ke||(Ke={}));var $i=class n extends j{constructor(e={}){super(),this._drag=null,this._tabsMovable=!0,this._tabsConstrained=!1,this._addButtonEnabled=!1,this._pressData=null,this._layoutModified=new Ie(this),this._addRequested=new Ie(this),this.addClass("lm-DockPanel"),this._document=e.document||document,this._mode=e.mode||"multiple-document",this._renderer=e.renderer||n.defaultRenderer,this._edges=e.edges||qe.DEFAULT_EDGES,e.tabsMovable!==void 0&&(this._tabsMovable=e.tabsMovable),e.tabsConstrained!==void 0&&(this._tabsConstrained=e.tabsConstrained),e.addButtonEnabled!==void 0&&(this._addButtonEnabled=e.addButtonEnabled),this.dataset.mode=this._mode;let r={createTabBar:()=>this._createTabBar(),createHandle:()=>this._createHandle()};this.layout=new io({document:this._document,renderer:r,spacing:e.spacing,hiddenMode:e.hiddenMode}),this.overlay=e.overlay||new n.Overlay,this.node.appendChild(this.overlay.node)}dispose(){this._releaseMouse(),this.overlay.hide(0),this._drag&&this._drag.dispose(),super.dispose()}get hiddenMode(){return this.layout.hiddenMode}set hiddenMode(e){this.layout.hiddenMode=e}get layoutModified(){return this._layoutModified}get addRequested(){return this._addRequested}get renderer(){return this.layout.renderer}get spacing(){return this.layout.spacing}set spacing(e){this.layout.spacing=e}get mode(){return this._mode}set mode(e){if(this._mode===e)return;this._mode=e,this.dataset.mode=e;let r=this.layout;switch(e){case"multiple-document":for(let s of r.tabBars())s.show();break;case"single-document":r.restoreLayout(qe.createSingleDocumentConfig(this));break;default:throw"unreachable"}Z.postMessage(this,qe.LayoutModified)}get tabsMovable(){return this._tabsMovable}set tabsMovable(e){this._tabsMovable=e;for(let r of this.tabBars())r.tabsMovable=e}get tabsConstrained(){return this._tabsConstrained}set tabsConstrained(e){this._tabsConstrained=e}get addButtonEnabled(){return this._addButtonEnabled}set addButtonEnabled(e){this._addButtonEnabled=e;for(let r of this.tabBars())r.addButtonEnabled=e}get isEmpty(){return this.layout.isEmpty}*widgets(){yield*this.layout.widgets()}*selectedWidgets(){yield*this.layout.selectedWidgets()}*tabBars(){yield*this.layout.tabBars()}*handles(){yield*this.layout.handles()}selectWidget(e){let r=(0,X.find)(this.tabBars(),s=>s.titles.indexOf(e.title)!==-1);if(!r)throw new Error("Widget is not contained in the dock panel.");r.currentTitle=e.title}activateWidget(e){this.selectWidget(e),e.activate()}saveLayout(){return this.layout.saveLayout()}restoreLayout(e){this._mode="multiple-document",this.layout.restoreLayout(e),(tt.IS_EDGE||tt.IS_IE)&&Z.flush(),Z.postMessage(this,qe.LayoutModified)}addWidget(e,r={}){this._mode==="single-document"?this.layout.addWidget(e):this.layout.addWidget(e,r),Z.postMessage(this,qe.LayoutModified)}processMessage(e){e.type==="layout-modified"?this._layoutModified.emit(void 0):super.processMessage(e)}handleEvent(e){switch(e.type){case"lm-dragenter":this._evtDragEnter(e);break;case"lm-dragleave":this._evtDragLeave(e);break;case"lm-dragover":this._evtDragOver(e);break;case"lm-drop":this._evtDrop(e);break;case"pointerdown":this._evtPointerDown(e);break;case"pointermove":this._evtPointerMove(e);break;case"pointerup":this._evtPointerUp(e);break;case"keydown":this._evtKeyDown(e);break;case"contextmenu":e.preventDefault(),e.stopPropagation();break}}onBeforeAttach(e){this.node.addEventListener("lm-dragenter",this),this.node.addEventListener("lm-dragleave",this),this.node.addEventListener("lm-dragover",this),this.node.addEventListener("lm-drop",this),this.node.addEventListener("pointerdown",this)}onAfterDetach(e){this.node.removeEventListener("lm-dragenter",this),this.node.removeEventListener("lm-dragleave",this),this.node.removeEventListener("lm-dragover",this),this.node.removeEventListener("lm-drop",this),this.node.removeEventListener("pointerdown",this),this._releaseMouse()}onChildAdded(e){qe.isGeneratedTabBarProperty.get(e.child)||e.child.addClass("lm-DockPanel-widget")}onChildRemoved(e){qe.isGeneratedTabBarProperty.get(e.child)||(e.child.removeClass("lm-DockPanel-widget"),Z.postMessage(this,qe.LayoutModified))}_evtDragEnter(e){e.mimeData.hasData("application/vnd.lumino.widget-factory")&&(e.preventDefault(),e.stopPropagation())}_evtDragLeave(e){e.preventDefault(),!(this._tabsConstrained&&e.source!==this)&&(e.stopPropagation(),this.overlay.hide(1))}_evtDragOver(e){e.preventDefault(),this._tabsConstrained&&e.source!==this||this._showOverlay(e.clientX,e.clientY)==="invalid"?e.dropAction="none":(e.stopPropagation(),e.dropAction=e.proposedAction)}_evtDrop(e){if(e.preventDefault(),this.overlay.hide(0),e.proposedAction==="none"){e.dropAction="none";return}let{clientX:r,clientY:s}=e,{zone:o,target:l}=qe.findDropTarget(this,r,s,this._edges);if(this._tabsConstrained&&e.source!==this||o==="invalid"){e.dropAction="none";return}let d=e.mimeData.getData("application/vnd.lumino.widget-factory");if(typeof d!="function"){e.dropAction="none";return}let h=d();if(!(h instanceof j)){e.dropAction="none";return}if(h.contains(this)){e.dropAction="none";return}let g=l?qe.getDropRef(l.tabBar):null;switch(o){case"root-all":this.addWidget(h);break;case"root-top":this.addWidget(h,{mode:"split-top"});break;case"root-left":this.addWidget(h,{mode:"split-left"});break;case"root-right":this.addWidget(h,{mode:"split-right"});break;case"root-bottom":this.addWidget(h,{mode:"split-bottom"});break;case"widget-all":this.addWidget(h,{mode:"tab-after",ref:g});break;case"widget-top":this.addWidget(h,{mode:"split-top",ref:g});break;case"widget-left":this.addWidget(h,{mode:"split-left",ref:g});break;case"widget-right":this.addWidget(h,{mode:"split-right",ref:g});break;case"widget-bottom":this.addWidget(h,{mode:"split-bottom",ref:g});break;case"widget-tab":this.addWidget(h,{mode:"tab-after",ref:g});break;default:throw"unreachable"}e.dropAction=e.proposedAction,e.stopPropagation(),this.activateWidget(h)}_evtKeyDown(e){e.preventDefault(),e.stopPropagation(),e.keyCode===27&&(this._releaseMouse(),Z.postMessage(this,qe.LayoutModified))}_evtPointerDown(e){if(e.button!==0)return;let r=this.layout,s=e.target,o=(0,X.find)(r.handles(),m=>m.contains(s));if(!o)return;e.preventDefault(),e.stopPropagation(),this._document.addEventListener("keydown",this,!0),this._document.addEventListener("pointerup",this,!0),this._document.addEventListener("pointermove",this,!0),this._document.addEventListener("contextmenu",this,!0);let l=o.getBoundingClientRect(),c=e.clientX-l.left,d=e.clientY-l.top,h=window.getComputedStyle(o),g=ut.overrideCursor(h.cursor,this._document);this._pressData={handle:o,deltaX:c,deltaY:d,override:g}}_evtPointerMove(e){if(!this._pressData)return;e.preventDefault(),e.stopPropagation();let r=this.node.getBoundingClientRect(),s=e.clientX-r.left-this._pressData.deltaX,o=e.clientY-r.top-this._pressData.deltaY;this.layout.moveHandle(this._pressData.handle,s,o)}_evtPointerUp(e){e.button===0&&(e.preventDefault(),e.stopPropagation(),this._releaseMouse(),Z.postMessage(this,qe.LayoutModified))}_releaseMouse(){this._pressData&&(this._pressData.override.dispose(),this._pressData=null,this._document.removeEventListener("keydown",this,!0),this._document.removeEventListener("pointerup",this,!0),this._document.removeEventListener("pointermove",this,!0),this._document.removeEventListener("contextmenu",this,!0))}_showOverlay(e,r){let{zone:s,target:o}=qe.findDropTarget(this,e,r,this._edges);if(s==="invalid")return this.overlay.hide(100),s;let l,c,d,h,g=Ce.boxSizing(this.node),m=this.node.getBoundingClientRect();switch(s){case"root-all":l=g.paddingTop,c=g.paddingLeft,d=g.paddingRight,h=g.paddingBottom;break;case"root-top":l=g.paddingTop,c=g.paddingLeft,d=g.paddingRight,h=m.height*qe.GOLDEN_RATIO;break;case"root-left":l=g.paddingTop,c=g.paddingLeft,d=m.width*qe.GOLDEN_RATIO,h=g.paddingBottom;break;case"root-right":l=g.paddingTop,c=m.width*qe.GOLDEN_RATIO,d=g.paddingRight,h=g.paddingBottom;break;case"root-bottom":l=m.height*qe.GOLDEN_RATIO,c=g.paddingLeft,d=g.paddingRight,h=g.paddingBottom;break;case"widget-all":l=o.top,c=o.left,d=o.right,h=o.bottom;break;case"widget-top":l=o.top,c=o.left,d=o.right,h=o.bottom+o.height/2;break;case"widget-left":l=o.top,c=o.left,d=o.right+o.width/2,h=o.bottom;break;case"widget-right":l=o.top,c=o.left+o.width/2,d=o.right,h=o.bottom;break;case"widget-bottom":l=o.top+o.height/2,c=o.left,d=o.right,h=o.bottom;break;case"widget-tab":{let p=o.tabBar.node.getBoundingClientRect().height;l=o.top,c=o.left,d=o.right,h=o.bottom+o.height-p;break}default:throw"unreachable"}return this.overlay.show({top:l,left:c,right:d,bottom:h}),s}_createTabBar(){let e=this._renderer.createTabBar(this._document);return qe.isGeneratedTabBarProperty.set(e,!0),this._mode==="single-document"&&e.hide(),e.tabsMovable=this._tabsMovable,e.allowDeselect=!1,e.addButtonEnabled=this._addButtonEnabled,e.removeBehavior="select-previous-tab",e.insertBehavior="select-tab-if-needed",e.tabMoved.connect(this._onTabMoved,this),e.currentChanged.connect(this._onCurrentChanged,this),e.tabCloseRequested.connect(this._onTabCloseRequested,this),e.tabDetachRequested.connect(this._onTabDetachRequested,this),e.tabActivateRequested.connect(this._onTabActivateRequested,this),e.addRequested.connect(this._onTabAddRequested,this),e}_createHandle(){return this._renderer.createHandle()}_onTabMoved(){Z.postMessage(this,qe.LayoutModified)}_onCurrentChanged(e,r){let{previousTitle:s,currentTitle:o}=r;s&&s.owner.hide(),o&&o.owner.show(),(tt.IS_EDGE||tt.IS_IE)&&Z.flush(),Z.postMessage(this,qe.LayoutModified)}_onTabAddRequested(e){this._addRequested.emit(e)}_onTabActivateRequested(e,r){r.title.owner.activate()}_onTabCloseRequested(e,r){r.title.owner.close()}_onTabDetachRequested(e,r){if(this._drag)return;e.releaseMouse();let{title:s,tab:o,clientX:l,clientY:c,offset:d}=r,h=new mi.MimeData,g=()=>s.owner;h.setData("application/vnd.lumino.widget-factory",g);let m=o.cloneNode(!0);d&&(m.style.top=`-${d.y}px`,m.style.left=`-${d.x}px`),this._drag=new ut({document:this._document,mimeData:h,dragImage:m,proposedAction:"move",supportedActions:"move",source:this}),o.classList.add("lm-mod-hidden");let p=()=>{this._drag=null,o.classList.remove("lm-mod-hidden")};this._drag.start(l,c).then(p)}};(function(n){class e{constructor(){this._timer=-1,this._hidden=!0,this.node=document.createElement("div"),this.node.classList.add("lm-DockPanel-overlay"),this.node.classList.add("lm-mod-hidden"),this.node.style.position="absolute",this.node.style.contain="strict"}show(o){let l=this.node.style;l.top=`${o.top}px`,l.left=`${o.left}px`,l.right=`${o.right}px`,l.bottom=`${o.bottom}px`,clearTimeout(this._timer),this._timer=-1,this._hidden&&(this._hidden=!1,this.node.classList.remove("lm-mod-hidden"))}hide(o){if(!this._hidden){if(o<=0){clearTimeout(this._timer),this._timer=-1,this._hidden=!0,this.node.classList.add("lm-mod-hidden");return}this._timer===-1&&(this._timer=window.setTimeout(()=>{this._timer=-1,this._hidden=!0,this.node.classList.add("lm-mod-hidden")},o))}}}n.Overlay=e;class r{createTabBar(o){let l=new jt({document:o});return l.addClass("lm-DockPanel-tabBar"),l}createHandle(){let o=document.createElement("div");return o.className="lm-DockPanel-handle",o}}n.Renderer=r,n.defaultRenderer=new r})($i||($i={}));var qe;(function(n){n.GOLDEN_RATIO=.618,n.DEFAULT_EDGES={top:12,right:40,bottom:40,left:40},n.LayoutModified=new Ii("layout-modified"),n.isGeneratedTabBarProperty=new lt({name:"isGeneratedTabBar",create:()=>!1});function e(o){if(o.isEmpty)return{main:null};let l=Array.from(o.widgets()),c=o.selectedWidgets().next().value,d=c?l.indexOf(c):-1;return{main:{type:"tab-area",widgets:l,currentIndex:d}}}n.createSingleDocumentConfig=e;function r(o,l,c,d){if(!Ce.hitTest(o.node,l,c))return{zone:"invalid",target:null};let h=o.layout;if(h.isEmpty)return{zone:"root-all",target:null};if(o.mode==="multiple-document"){let M=o.node.getBoundingClientRect(),S=l-M.left+1,k=c-M.top+1,B=M.right-l,H=M.bottom-c;switch(Math.min(k,B,H,S)){case k:if(k<d.top)return{zone:"root-top",target:null};break;case B:if(B<d.right)return{zone:"root-right",target:null};break;case H:if(H<d.bottom)return{zone:"root-bottom",target:null};break;case S:if(S<d.left)return{zone:"root-left",target:null};break;default:throw"unreachable"}}let g=h.hitTestTabAreas(l,c);if(!g)return{zone:"invalid",target:null};if(o.mode==="single-document")return{zone:"widget-all",target:g};let m=g.x-g.left+1,p=g.y-g.top+1,v=g.left+g.width-g.x,b=g.top+g.height-g.y,_=g.tabBar.node.getBoundingClientRect().height;if(p<_)return{zone:"widget-tab",target:g};let y=Math.round(g.width/3),C=Math.round(g.height/3);if(m>y&&v>y&&p>C&&b>C)return{zone:"widget-all",target:g};m/=y,p/=C,v/=y,b/=C;let E=Math.min(m,p,v,b),I;switch(E){case m:I="widget-left";break;case p:I="widget-top";break;case v:I="widget-right";break;case b:I="widget-bottom";break;default:throw"unreachable"}return{zone:I,target:g}}n.findDropTarget=r;function s(o){return o.titles.length===0?null:o.currentTitle?o.currentTitle.owner:o.titles[o.titles.length-1].owner}n.getDropRef=s})(qe||(qe={}));var er=class n extends pi{constructor(e={}){super(e),this._dirty=!1,this._rowSpacing=4,this._columnSpacing=4,this._items=[],this._rowStarts=[],this._columnStarts=[],this._rowSizers=[new Xt],this._columnSizers=[new Xt],this._box=null,e.rowCount!==void 0&&Ge.reallocSizers(this._rowSizers,e.rowCount),e.columnCount!==void 0&&Ge.reallocSizers(this._columnSizers,e.columnCount),e.rowSpacing!==void 0&&(this._rowSpacing=Ge.clampValue(e.rowSpacing)),e.columnSpacing!==void 0&&(this._columnSpacing=Ge.clampValue(e.columnSpacing))}dispose(){for(let e of this._items){let r=e.widget;e.dispose(),r.dispose()}this._box=null,this._items.length=0,this._rowStarts.length=0,this._rowSizers.length=0,this._columnStarts.length=0,this._columnSizers.length=0,super.dispose()}get rowCount(){return this._rowSizers.length}set rowCount(e){e!==this.rowCount&&(Ge.reallocSizers(this._rowSizers,e),this.parent&&this.parent.fit())}get columnCount(){return this._columnSizers.length}set columnCount(e){e!==this.columnCount&&(Ge.reallocSizers(this._columnSizers,e),this.parent&&this.parent.fit())}get rowSpacing(){return this._rowSpacing}set rowSpacing(e){e=Ge.clampValue(e),this._rowSpacing!==e&&(this._rowSpacing=e,this.parent&&this.parent.fit())}get columnSpacing(){return this._columnSpacing}set columnSpacing(e){e=Ge.clampValue(e),this._columnSpacing!==e&&(this._columnSpacing=e,this.parent&&this.parent.fit())}rowStretch(e){let r=this._rowSizers[e];return r?r.stretch:-1}setRowStretch(e,r){let s=this._rowSizers[e];s&&(r=Ge.clampValue(r),s.stretch!==r&&(s.stretch=r,this.parent&&this.parent.update()))}columnStretch(e){let r=this._columnSizers[e];return r?r.stretch:-1}setColumnStretch(e,r){let s=this._columnSizers[e];s&&(r=Ge.clampValue(r),s.stretch!==r&&(s.stretch=r,this.parent&&this.parent.update()))}*[Symbol.iterator](){for(let e of this._items)yield e.widget}addWidget(e){X.ArrayExt.findFirstIndex(this._items,s=>s.widget===e)===-1&&(this._items.push(new Ki(e)),this.parent&&this.attachWidget(e))}removeWidget(e){let r=X.ArrayExt.findFirstIndex(this._items,o=>o.widget===e);if(r===-1)return;let s=X.ArrayExt.removeAt(this._items,r);this.parent&&this.detachWidget(e),s.dispose()}init(){super.init();for(let e of this)this.attachWidget(e)}attachWidget(e){this.parent.isAttached&&Z.sendMessage(e,j.Msg.BeforeAttach),this.parent.node.appendChild(e.node),this.parent.isAttached&&Z.sendMessage(e,j.Msg.AfterAttach),this.parent.fit()}detachWidget(e){this.parent.isAttached&&Z.sendMessage(e,j.Msg.BeforeDetach),this.parent.node.removeChild(e.node),this.parent.isAttached&&Z.sendMessage(e,j.Msg.AfterDetach),this.parent.fit()}onBeforeShow(e){super.onBeforeShow(e),this.parent.update()}onBeforeAttach(e){super.onBeforeAttach(e),this.parent.fit()}onChildShown(e){this.parent.fit()}onChildHidden(e){this.parent.fit()}onResize(e){this.parent.isVisible&&this._update(e.width,e.height)}onUpdateRequest(e){this.parent.isVisible&&this._update(-1,-1)}onFitRequest(e){this.parent.isAttached&&this._fit()}_fit(){for(let h=0,g=this.rowCount;h<g;++h)this._rowSizers[h].minSize=0;for(let h=0,g=this.columnCount;h<g;++h)this._columnSizers[h].minSize=0;let e=this._items.filter(h=>!h.isHidden);for(let h=0,g=e.length;h<g;++h)e[h].fit();let r=this.rowCount-1,s=this.columnCount-1;e.sort(Ge.rowSpanCmp);for(let h=0,g=e.length;h<g;++h){let m=e[h],p=n.getCellConfig(m.widget),v=Math.min(p.row,r),b=Math.min(p.row+p.rowSpan-1,r);Ge.distributeMin(this._rowSizers,v,b,m.minHeight)}e.sort(Ge.columnSpanCmp);for(let h=0,g=e.length;h<g;++h){let m=e[h],p=n.getCellConfig(m.widget),v=Math.min(p.column,s),b=Math.min(p.column+p.columnSpan-1,s);Ge.distributeMin(this._columnSizers,v,b,m.minWidth)}if(this.fitPolicy==="set-no-constraint"){Z.sendMessage(this.parent,j.Msg.UpdateRequest);return}let o=r*this._rowSpacing,l=s*this._columnSpacing;for(let h=0,g=this.rowCount;h<g;++h)o+=this._rowSizers[h].minSize;for(let h=0,g=this.columnCount;h<g;++h)l+=this._columnSizers[h].minSize;let c=this._box=Ce.boxSizing(this.parent.node);l+=c.horizontalSum,o+=c.verticalSum;let d=this.parent.node.style;d.minWidth=`${l}px`,d.minHeight=`${o}px`,this._dirty=!0,this.parent.parent&&Z.sendMessage(this.parent.parent,j.Msg.FitRequest),this._dirty&&Z.sendMessage(this.parent,j.Msg.UpdateRequest)}_update(e,r){this._dirty=!1,e<0&&(e=this.parent.node.offsetWidth),r<0&&(r=this.parent.node.offsetHeight),this._box||(this._box=Ce.boxSizing(this.parent.node));let s=this._box.paddingTop,o=this._box.paddingLeft,l=e-this._box.horizontalSum,c=r-this._box.verticalSum,d=this.rowCount-1,h=this.columnCount-1,g=d*this._rowSpacing,m=h*this._columnSpacing;Ct.calc(this._rowSizers,Math.max(0,c-g)),Ct.calc(this._columnSizers,Math.max(0,l-m));for(let p=0,v=s,b=this.rowCount;p<b;++p)this._rowStarts[p]=v,v+=this._rowSizers[p].size+this._rowSpacing;for(let p=0,v=o,b=this.columnCount;p<b;++p)this._columnStarts[p]=v,v+=this._columnSizers[p].size+this._columnSpacing;for(let p=0,v=this._items.length;p<v;++p){let b=this._items[p];if(b.isHidden)continue;let _=n.getCellConfig(b.widget),y=Math.min(_.row,d),C=Math.min(_.column,h),E=Math.min(_.row+_.rowSpan-1,d),I=Math.min(_.column+_.columnSpan-1,h),M=this._columnStarts[C],S=this._rowStarts[y],k=this._columnStarts[I]+this._columnSizers[I].size-M,B=this._rowStarts[E]+this._rowSizers[E].size-S;b.update(M,S,k,B)}}};(function(n){function e(s){return Ge.cellConfigProperty.get(s)}n.getCellConfig=e;function r(s,o){Ge.cellConfigProperty.set(s,Ge.normalizeConfig(o))}n.setCellConfig=r})(er||(er={}));var Ge;(function(n){n.cellConfigProperty=new lt({name:"cellConfig",create:()=>({row:0,column:0,rowSpan:1,columnSpan:1}),changed:d});function e(h){let g=Math.max(0,Math.floor(h.row||0)),m=Math.max(0,Math.floor(h.column||0)),p=Math.max(1,Math.floor(h.rowSpan||0)),v=Math.max(1,Math.floor(h.columnSpan||0));return{row:g,column:m,rowSpan:p,columnSpan:v}}n.normalizeConfig=e;function r(h){return Math.max(0,Math.floor(h))}n.clampValue=r;function s(h,g){let m=n.cellConfigProperty.get(h.widget),p=n.cellConfigProperty.get(g.widget);return m.rowSpan-p.rowSpan}n.rowSpanCmp=s;function o(h,g){let m=n.cellConfigProperty.get(h.widget),p=n.cellConfigProperty.get(g.widget);return m.columnSpan-p.columnSpan}n.columnSpanCmp=o;function l(h,g){for(g=Math.max(1,Math.floor(g));h.length<g;)h.push(new Xt);h.length>g&&(h.length=g)}n.reallocSizers=l;function c(h,g,m,p){if(m<g)return;if(g===m){let _=h[g];_.minSize=Math.max(_.minSize,p);return}let v=0;for(let _=g;_<=m;++_)v+=h[_].minSize;if(v>=p)return;let b=(p-v)/(m-g+1);for(let _=g;_<=m;++_)h[_].minSize+=b}n.distributeMin=c;function d(h){h.parent&&h.parent.layout instanceof er&&h.parent.fit()}})(Ge||(Ge={}));var hs=class n extends j{constructor(e={}){super({node:fs.createNode()}),this._activeIndex=-1,this._tabFocusIndex=0,this._menus=[],this._childMenu=null,this._overflowMenu=null,this._menuItemSizes=[],this._overflowIndex=-1,this.addClass("lm-MenuBar"),this.setFlag(j.Flag.DisallowLayout),this.renderer=e.renderer||n.defaultRenderer,this._forceItemsPosition=e.forceItemsPosition||{forceX:!0,forceY:!0},this._overflowMenuOptions=e.overflowMenuOptions||{isVisible:!0}}dispose(){this._closeChildMenu(),this._menus.length=0,super.dispose()}get childMenu(){return this._childMenu}get overflowIndex(){return this._overflowIndex}get overflowMenu(){return this._overflowMenu}get contentNode(){return this.node.getElementsByClassName("lm-MenuBar-content")[0]}get activeMenu(){return this._menus[this._activeIndex]||null}set activeMenu(e){this.activeIndex=e?this._menus.indexOf(e):-1}get activeIndex(){return this._activeIndex}set activeIndex(e){(e<0||e>=this._menus.length)&&(e=-1),e>-1&&this._menus[e].items.length===0&&(e=-1),this._activeIndex!==e&&(this._activeIndex=e,this.update())}get menus(){return this._menus}openActiveMenu(){this._activeIndex!==-1&&(this._openChildMenu(),this._childMenu&&(this._childMenu.activeIndex=-1,this._childMenu.activateNextItem()))}addMenu(e,r=!0){this.insertMenu(this._menus.length,e,r)}insertMenu(e,r,s=!0){this._closeChildMenu();let o=this._menus.indexOf(r),l=Math.max(0,Math.min(e,this._menus.length));if(o===-1){X.ArrayExt.insert(this._menus,l,r),r.addClass("lm-MenuBar-menu"),r.aboutToClose.connect(this._onMenuAboutToClose,this),r.menuRequested.connect(this._onMenuMenuRequested,this),r.title.changed.connect(this._onTitleChanged,this),s&&this.update();return}l===this._menus.length&&l--,o!==l&&(X.ArrayExt.move(this._menus,o,l),s&&this.update())}removeMenu(e,r=!0){this.removeMenuAt(this._menus.indexOf(e),r)}removeMenuAt(e,r=!0){this._closeChildMenu();let s=X.ArrayExt.removeAt(this._menus,e);s&&(s.aboutToClose.disconnect(this._onMenuAboutToClose,this),s.menuRequested.disconnect(this._onMenuMenuRequested,this),s.title.changed.disconnect(this._onTitleChanged,this),s.removeClass("lm-MenuBar-menu"),r&&this.update())}clearMenus(){if(this._menus.length!==0){this._closeChildMenu();for(let e of this._menus)e.aboutToClose.disconnect(this._onMenuAboutToClose,this),e.menuRequested.disconnect(this._onMenuMenuRequested,this),e.title.changed.disconnect(this._onTitleChanged,this),e.removeClass("lm-MenuBar-menu");this._menus.length=0,this.update()}}handleEvent(e){switch(e.type){case"keydown":this._evtKeyDown(e);break;case"mousedown":this._evtMouseDown(e);break;case"mousemove":this._evtMouseMove(e);break;case"focusout":this._evtFocusOut(e);break;case"contextmenu":e.preventDefault(),e.stopPropagation();break}}onBeforeAttach(e){this.node.addEventListener("keydown",this),this.node.addEventListener("mousedown",this),this.node.addEventListener("mousemove",this),this.node.addEventListener("focusout",this),this.node.addEventListener("contextmenu",this)}onAfterDetach(e){this.node.removeEventListener("keydown",this),this.node.removeEventListener("mousedown",this),this.node.removeEventListener("mousemove",this),this.node.removeEventListener("focusout",this),this.node.removeEventListener("contextmenu",this),this._closeChildMenu()}onActivateRequest(e){this.isAttached&&this._focusItemAt(0)}onResize(e){this.update(),super.onResize(e)}onUpdateRequest(e){var r;let s=this._menus,o=this.renderer,l=this._activeIndex,c=this._tabFocusIndex>=0&&this._tabFocusIndex<s.length?this._tabFocusIndex:0,d=this._overflowIndex>-1?this._overflowIndex:s.length,h=0,g=!1;d=this._overflowMenu!==null?d-1:d;let m=new Array(d);for(let p=0;p<d;++p)m[p]=o.renderItem({title:s[p].title,active:p===l,tabbable:p===c,disabled:s[p].items.length===0,onfocus:()=>{this._tabFocusIndex=p,this.activeIndex=p}}),h+=this._menuItemSizes[p],s[p].title.label===this._overflowMenuOptions.title&&(g=!0,d--);if(this._overflowMenuOptions.isVisible){if(this._overflowIndex>-1&&!g){if(this._overflowMenu===null){let p=(r=this._overflowMenuOptions.title)!==null&&r!==void 0?r:"...";this._overflowMenu=new Kt({commands:new Mt}),this._overflowMenu.title.label=p,this._overflowMenu.title.mnemonic=0,this.addMenu(this._overflowMenu,!1)}for(let p=s.length-2;p>=d;p--){let v=this.menus[p];v.title.mnemonic=0,this._overflowMenu.insertItem(0,{type:"submenu",submenu:v}),this.removeMenu(v,!1)}m[d]=o.renderItem({title:this._overflowMenu.title,active:d===l&&s[d].items.length!==0,tabbable:d===c,disabled:s[d].items.length===0,onfocus:()=>{this._tabFocusIndex=d,this.activeIndex=d}}),d++}else if(this._overflowMenu!==null){let p=this._overflowMenu.items,v=this.node.offsetWidth,b=this._overflowMenu.items.length;for(let _=0;_<b;++_){let y=s.length-1-_;if(v-h>this._menuItemSizes[y]){let C=p[0].submenu;this._overflowMenu.removeItemAt(0),this.insertMenu(d,C,!1),m[d]=o.renderItem({title:C.title,active:!1,tabbable:d===c,disabled:s[d].items.length===0,onfocus:()=>{this._tabFocusIndex=d,this.activeIndex=d}}),d++}}this._overflowMenu.items.length===0&&(this.removeMenu(this._overflowMenu,!1),m.pop(),this._overflowMenu=null,this._overflowIndex=-1)}}Ut.render(m,this.contentNode),this._updateOverflowIndex()}_updateOverflowIndex(){if(!this._overflowMenuOptions.isVisible)return;let e=this.contentNode.childNodes,r=this.node.offsetWidth,s=0,o=-1,l=e.length;if(this._menuItemSizes.length==0)for(let c=0;c<l;c++){let d=e[c];s+=d.offsetWidth,this._menuItemSizes.push(d.offsetWidth),s>r&&o===-1&&(o=c)}else for(let c=0;c<this._menuItemSizes.length;c++)if(s+=this._menuItemSizes[c],s>r){o=c;break}this._overflowIndex=o}_evtKeyDown(e){let r=e.keyCode;if(r===9){this.activeIndex=-1;return}if(e.preventDefault(),e.stopPropagation(),r===13||r===32||r===38||r===40){if(this.activeIndex=this._tabFocusIndex,this.activeIndex!==this._tabFocusIndex)return;this.openActiveMenu();return}if(r===27){this._closeChildMenu(),this._focusItemAt(this.activeIndex);return}if(r===37||r===39){let c=r===37?-1:1,d=this._tabFocusIndex+c,h=this._menus.length;for(let g=0;g<h;g++){let m=(h+d+c*g)%h;if(this._menus[m].items.length){this._focusItemAt(m);return}}return}let s=mn().keyForKeydownEvent(e);if(!s)return;let o=this._activeIndex+1,l=fs.findMnemonic(this._menus,s,o);l.index!==-1&&!l.multiple?(this.activeIndex=l.index,this.openActiveMenu()):l.index!==-1?(this.activeIndex=l.index,this._focusItemAt(this.activeIndex)):l.auto!==-1&&(this.activeIndex=l.auto,this._focusItemAt(this.activeIndex))}_evtMouseDown(e){if(!Ce.hitTest(this.node,e.clientX,e.clientY))return;e.stopPropagation(),e.stopImmediatePropagation();let r=X.ArrayExt.findFirstIndex(this.contentNode.children,s=>Ce.hitTest(s,e.clientX,e.clientY));if(r===-1){this._closeChildMenu();return}if(e.button===0)if(this._childMenu)this._closeChildMenu(),this.activeIndex=r;else{e.preventDefault();let s=this._positionForMenu(r);Kt.saveWindowData(),this.activeIndex=r,this._openChildMenu(s)}}_evtMouseMove(e){let r=X.ArrayExt.findFirstIndex(this.contentNode.children,o=>Ce.hitTest(o,e.clientX,e.clientY));if(r===this._activeIndex||r===-1&&this._childMenu)return;let s=r>=0&&this._childMenu?this._positionForMenu(r):null;Kt.saveWindowData(),this.activeIndex=r,s&&this._openChildMenu(s)}_positionForMenu(e){let r=this.contentNode.children[e],{left:s,bottom:o}=r.getBoundingClientRect();return{top:o,left:s}}_evtFocusOut(e){!this._childMenu&&!this.node.contains(e.relatedTarget)&&(this.activeIndex=-1)}_focusItemAt(e){let r=this.contentNode.childNodes[e];r&&r.focus()}_openChildMenu(e={}){let r=this.activeMenu;if(!r){this._closeChildMenu();return}let s=this._childMenu;if(s===r)return;this._childMenu=r,s?s.close():document.addEventListener("mousedown",this,!0),this._tabFocusIndex=this.activeIndex,Z.sendMessage(this,j.Msg.UpdateRequest);let{left:o,top:l}=e;(typeof o>"u"||typeof l>"u")&&({left:o,top:l}=this._positionForMenu(this._activeIndex)),s||this.addClass("lm-mod-active"),r.items.length>0&&r.open(o,l,this._forceItemsPosition)}_closeChildMenu(){if(!this._childMenu)return;this.removeClass("lm-mod-active"),document.removeEventListener("mousedown",this,!0);let e=this._childMenu;this._childMenu=null,e.close(),this.activeIndex=-1}_onMenuAboutToClose(e){e===this._childMenu&&(this.removeClass("lm-mod-active"),document.removeEventListener("mousedown",this,!0),this._childMenu=null,this.activeIndex=-1)}_onMenuMenuRequested(e,r){if(e!==this._childMenu)return;let s=this._activeIndex,o=this._menus.length;switch(r){case"next":this.activeIndex=s===o-1?0:s+1;break;case"previous":this.activeIndex=s===0?o-1:s-1;break}this.openActiveMenu()}_onTitleChanged(){this.update()}};(function(n){class e{renderItem(s){let o=this.createItemClass(s),l=this.createItemDataset(s),c=this.createItemARIA(s);return fe.li({className:o,dataset:l,...s.disabled?{}:{tabindex:s.tabbable?"0":"-1"},onfocus:s.onfocus,...c},this.renderIcon(s),this.renderLabel(s))}renderIcon(s){let o=this.createIconClass(s);return fe.div({className:o},s.title.icon,s.title.iconLabel)}renderLabel(s){let o=this.formatLabel(s);return fe.div({className:"lm-MenuBar-itemLabel"},o)}createItemClass(s){let o="lm-MenuBar-item";return s.title.className&&(o+=` ${s.title.className}`),s.active&&!s.disabled&&(o+=" lm-mod-active"),o}createItemDataset(s){return s.title.dataset}createItemARIA(s){return{role:"menuitem","aria-haspopup":"true","aria-disabled":s.disabled?"true":"false"}}createIconClass(s){let o="lm-MenuBar-itemIcon",l=s.title.iconClass;return l?`${o} ${l}`:o}formatLabel(s){let{label:o,mnemonic:l}=s.title;if(l<0||l>=o.length)return o;let c=o.slice(0,l),d=o.slice(l+1),h=o[l],g=fe.span({className:"lm-MenuBar-itemMnemonic"},h);return[c,g,d]}}n.Renderer=e,n.defaultRenderer=new e})(hs||(hs={}));var fs;(function(n){function e(){let s=document.createElement("div"),o=document.createElement("ul");return o.className="lm-MenuBar-content",s.appendChild(o),o.setAttribute("role","menubar"),s}n.createNode=e;function r(s,o,l){let c=-1,d=-1,h=!1,g=o.toUpperCase();for(let m=0,p=s.length;m<p;++m){let v=(m+l)%p,b=s[v].title;if(b.label.length===0)continue;let _=b.mnemonic;if(_>=0&&_<b.label.length){b.label[_].toUpperCase()===g&&(c===-1?c=v:h=!0);continue}d===-1&&b.label[0].toUpperCase()===g&&(d=v)}return{index:c,multiple:h,auto:d}}n.findMnemonic=r})(fs||(fs={}));var wd;(function(n){function e(){let s=document.createElement("div"),o=document.createElement("div"),l=document.createElement("div"),c=document.createElement("div"),d=document.createElement("div");return o.className="lm-ScrollBar-button",l.className="lm-ScrollBar-button",o.dataset.action="decrement",l.dataset.action="increment",c.className="lm-ScrollBar-track",d.className="lm-ScrollBar-thumb",c.appendChild(d),s.appendChild(o),s.appendChild(c),s.appendChild(l),s}n.createNode=e;function r(s,o){return s.thumbNode.contains(o)?"thumb":s.trackNode.contains(o)?"track":s.decrementNode.contains(o)?"decrement":s.incrementNode.contains(o)?"increment":null}n.findPart=r})(wd||(wd={}));var no=class extends bn{constructor(e={}){super(e),this._dirty=!1,this._items=[],this._box=null,this._hiddenMode=e.hiddenMode!==void 0?e.hiddenMode:j.HiddenMode.Display}get hiddenMode(){return this._hiddenMode}set hiddenMode(e){this._hiddenMode!==e&&(this._hiddenMode=e,this.widgets.length>1&&this.widgets.forEach(r=>{r.hiddenMode=this._hiddenMode}))}dispose(){for(let e of this._items)e.dispose();this._box=null,this._items.length=0,super.dispose()}attachWidget(e,r){this._hiddenMode===j.HiddenMode.Scale&&this._items.length>0?(this._items.length===1&&(this.widgets[0].hiddenMode=j.HiddenMode.Scale),r.hiddenMode=j.HiddenMode.Scale):r.hiddenMode=j.HiddenMode.Display,X.ArrayExt.insert(this._items,e,new Ki(r)),this.parent.isAttached&&Z.sendMessage(r,j.Msg.BeforeAttach),this.parent.node.appendChild(r.node),this.parent.isAttached&&Z.sendMessage(r,j.Msg.AfterAttach),this.parent.fit()}moveWidget(e,r,s){X.ArrayExt.move(this._items,e,r),this.parent.update()}detachWidget(e,r){let s=X.ArrayExt.removeAt(this._items,e);this.parent.isAttached&&Z.sendMessage(r,j.Msg.BeforeDetach),this.parent.node.removeChild(r.node),this.parent.isAttached&&Z.sendMessage(r,j.Msg.AfterDetach),s.widget.node.style.zIndex="",this._hiddenMode===j.HiddenMode.Scale&&(r.hiddenMode=j.HiddenMode.Display,this._items.length===1&&(this._items[0].widget.hiddenMode=j.HiddenMode.Display)),s.dispose(),this.parent.fit()}onBeforeShow(e){super.onBeforeShow(e),this.parent.update()}onBeforeAttach(e){super.onBeforeAttach(e),this.parent.fit()}onChildShown(e){this.parent.fit()}onChildHidden(e){this.parent.fit()}onResize(e){this.parent.isVisible&&this._update(e.width,e.height)}onUpdateRequest(e){this.parent.isVisible&&this._update(-1,-1)}onFitRequest(e){this.parent.isAttached&&this._fit()}_fit(){let e=0,r=0;for(let l=0,c=this._items.length;l<c;++l){let d=this._items[l];d.isHidden||(d.fit(),e=Math.max(e,d.minWidth),r=Math.max(r,d.minHeight))}let s=this._box=Ce.boxSizing(this.parent.node);e+=s.horizontalSum,r+=s.verticalSum;let o=this.parent.node.style;o.minWidth=`${e}px`,o.minHeight=`${r}px`,this._dirty=!0,this.parent.parent&&Z.sendMessage(this.parent.parent,j.Msg.FitRequest),this._dirty&&Z.sendMessage(this.parent,j.Msg.UpdateRequest)}_update(e,r){this._dirty=!1;let s=0;for(let h=0,g=this._items.length;h<g;++h)s+=+!this._items[h].isHidden;if(s===0)return;e<0&&(e=this.parent.node.offsetWidth),r<0&&(r=this.parent.node.offsetHeight),this._box||(this._box=Ce.boxSizing(this.parent.node));let o=this._box.paddingTop,l=this._box.paddingLeft,c=e-this._box.horizontalSum,d=r-this._box.verticalSum;for(let h=0,g=this._items.length;h<g;++h){let m=this._items[h];m.isHidden||(m.widget.node.style.zIndex=`${h}`,m.update(l,o,c,d))}}};var yd;(function(n){function e(r){return r.layout||new no}n.createLayout=e})(yd||(yd={}));var xd;(function(n){function e(l){return s[l]}n.orientationFromPlacement=e;function r(l){return o[l]}n.directionFromPlacement=r;let s={top:"horizontal",left:"vertical",right:"vertical",bottom:"horizontal"},o={top:"top-to-bottom",left:"left-to-right",right:"right-to-left",bottom:"bottom-to-top"}})(xd||(xd={}));var fr=Bt(ui(),1);var lp=Bt(tp(),1),up=Bt(ip(),1);var np='.workspace-master-widget{--config-button-icon--content:var(--open-settings-button--content,"\\1F527")!important;}.workspace-master-widget[settings]{--config-button-icon--content:var(--close-settings-button--content,"\\1F527")!important;}.widget-maximize:not(.workspace-master-widget){--config-button-icon--content:var(--open-settings-button--content,"\\1F527")!important;}.widget-maximize[settings]:not(.workspace-master-widget){--config-button-icon--content:var(--close-settings-button--content,"\\1F527")!important;}.lm-DockPanel-widget{border:1px solid#eaeaea;border-width:0px!important;min-width:300px;min-height:200px;}.workspace-master-widget:not{--config-button-icon--content:""!important;}.context-menu>perspective-viewer.context-focus{opacity:1;filter:none;}.context-menu>perspective-viewer{filter:saturate(0);}.context-menu>perspective-viewer>*{pointer-events:none;}::slotted(perspective-viewer){flex:1;position:relative;display:block;align-items:center;justify-content:center;flex-direction:column;width:100%;height:100%;overflow:visible!important;}:host-context(.lm-mod-override-cursor){cursor:grabbing!important;}:host-context(.lm-mod-override-cursor) ::slotted(perspective-viewer),.context-menu ::slotted(perspective-viewer){--override-content-pointer-events:none;}.lm-Menu{z-index:10000;position:absolute;white-space:nowrap;overflow-x:hidden;overflow-y:auto;outline:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.lm-Menu-content{margin:0;padding:0;display:table;list-style-type:none;}.lm-Menu-item{display:table-row;}.lm-Menu-item.lm-mod-hidden,.lm-Menu-item.lm-mod-collapsed{display:none!important;}.lm-Menu-itemIcon,.lm-Menu-itemSubmenuIcon{display:table-cell;text-align:center;}.lm-Menu-itemLabel{display:table-cell;text-align:left;}.lm-Menu-itemShortcut{display:table-cell;text-align:right;}.lm-Menu{font-size:12px;padding:8px;background-color:var(--plugin--background);color:var(--icon--color);border:1px solid var(--inactive--color);border-radius:3px;max-width:350px;top:0;left:0;}.lm-Menu.perspective-workspace-menu .lm-Menu-item{padding-left:37px!important;min-width:var(--min-width);}.lm-Menu-item.lm-mod-active{background-color:var(--icon--color);color:var(--plugin--background);}.lm-Menu-item.lm-mod-disabled{opacity:0.5;}.lm-Menu-itemIcon{width:24px;height:12px;margin-right:4px;}.lm-Menu-itemLabel{flex:1 1;padding:4px 2px 4px 2px;}.lm-Menu-itemMnemonic{text-decoration:underline;}.lm-Menu-itemShortcut{padding:4px 0px;}.lm-Menu-itemSubmenuIcon{width:24px;height:18px;}.lm-Menu-item{display:flex;align-items:center;outline:none;margin:0 -8px;padding:0 8px;}.lm-Menu-item[data-type="separator"]>div{padding:0;height:9px;}.lm-Menu-item[data-type="separator"]>div::after{content:"";display:block;position:relative;top:4px;border-top:1px solid#dddddd;}.lm-MenuBar-menu{transform:translateY(-1px);}.lm-MenuBar-item{padding:10px 32px;border-left:1px solid transparent;border-right:1px solid transparent;color:#737373!important;}.lm-MenuBar-item.lm-mod-active{background:rgba(0,0,0,0.2);}.lm-MenuBar.lm-mod-active .lm-MenuBar-item.lm-mod-active{z-index:10001;background:rgba(0,0,0,0.2);}.lm-Menu-itemIcon:before{content:attr(content);font-family:"ui-monospace","SFMono-Regular","SF Mono","Menlo","Consolas","Liberation Mono",monospace;}[data-type="submenu"] .lm-Menu-itemSubmenuIcon:before{content:">";font-family:"ui-monospace","SFMono-Regular","SF Mono","Menlo","Consolas","Liberation Mono",monospace;height:18px;}.lm-mod-drag-image.lm-TabBar-tab{display:none;}';var ap=Bt(ui(),1);var Cs={Config:"config",Label:"label"},II="untitled",Ms=class extends jt.Renderer{maximized;constructor(e){super(),this.maximized=e}renderLabel(e){return fe.span({className:"lm-TabBar-tabLabel",id:Cs.Label},e.title.label||II)}renderInert(){return fe.div()}renderTab(e,r){let s=e.title.caption,o=this.createTabKey(e),l=this.createTabStyle(e),c=this.createTabClass(e),d=this.createTabDataset(e),h=[];return r&&h.push(fe.div({onclick:r,className:"bookmarks-button"},fe.div({className:"bookmarks"}))),fe.li({key:o,className:c,title:s,style:l,dataset:d},this.renderDragHandle(),...h,this.renderLabel(e),this.renderCloseIcon())}renderDragHandle(){return fe.div({className:"drag-handle"})}renderCloseIcon(){return fe.div({className:"lm-TabBar-tabCloseIcon p-TabBar-tabCloseIcon"})}};var Yi=class extends Kt{_host;_workspace;init_overlay;constructor(e,r,s){s.renderer=new Po,super(s),this._host=e,this._workspace=r,this._openChildMenu=this._overrideOpenChildMenu.bind(this)}open(e,r,s){s||={},s.host=this._host;let o=this._workspace.getBoundingClientRect();super.open(e,r,s);let l=this.node.getBoundingClientRect();l.height+r>o.height&&l.height+r<document.documentElement.clientHeight&&(this.node.style.top=`-${l.height}`),l.width+e>o.width&&(l.width+e<document.documentElement.clientWidth?this.node.style.left=`-${l.width+e-o.width}px`:this.node.style.left=`-${document.documentElement.clientWidth-o.width}px`)}_overrideOpenChildMenu(e=!1){let r=this,s=this.activeItem;if(!s||s.type!=="submenu"||!s.submenu){r._closeChildMenu();return}let o=s.submenu;if(o===r._childMenu)return;Kt.saveWindowData(),r._closeChildMenu(),r._childMenu=o,r._childIndex=r._activeIndex,o._parentMenu=this,Z.sendMessage(this,j.Msg.UpdateRequest);let l=this.contentNode.children[r._activeIndex];EI(o,l,r._host),e&&(o.activeIndex=-1,o.activateNextItem()),o.activate()}},Po=class extends Kt.Renderer{formatLabel(e){let{label:r,mnemonic:s}=e.item;if(s<0||s>=r.length)return r;let o=r.slice(0,s),l=r.slice(s+1),c=r[s],d=fe.span({className:"lm-Menu-itemMnemonic p-Menu-itemMnemonic"},c);return[o,d,l]}renderLabel(e){let r=this.formatLabel(e);return fe.div({className:"lm-Menu-itemLabel p-Menu-itemLabel"},r)}renderSubmenu(e){return fe.div({className:"lm-Menu-itemSubmenuIcon p-Menu-itemSubmenuIcon"})}renderItem(e){let r=this.createItemClass(e),s=this.createItemDataset(e),o=this.createItemARIA(e);return fe.li({className:r,dataset:s,tabindex:"0",onfocus:e.onfocus,...o},this.renderLabel(e),this.renderShortcut(e),this.renderSubmenu(e))}};function EI(n,e,r){let s=LI(),o=s.pageXOffset,l=s.pageYOffset,c=s.clientWidth,d=s.clientHeight,h=r.host.getBoundingClientRect(),g=h.x,m=h.y;Z.sendMessage(n,j.Msg.UpdateRequest);let p=d,v=n.node,b=v.style;b.opacity="0",b.maxHeight=`${p}px`,j.attach(n,r);let{width:_,height:y}=v.getBoundingClientRect(),C=Ce.boxSizing(n.node),E=e.getBoundingClientRect(),I=E.right-rp-g;I+_>o+c+g&&(I=E.left+rp-_);let M=E.top-C.borderTop-C.paddingTop-m;M+y>l+d+m&&(M=E.bottom+C.borderBottom+C.paddingBottom-y),b.transform=`translate(${Math.max(0,I)}px, ${Math.max(0,M)}px`,b.opacity="1"}var rp=3,kI=null,sp=0;function LI(){return sp>0?(sp--,kI):zI()}function zI(){return{pageXOffset:window.pageXOffset,pageYOffset:window.pageYOffset,clientWidth:document.documentElement.clientWidth,clientHeight:document.documentElement.clientHeight}}var Ts=class extends jt{_workspace;__content_node__;_menu;__titles;constructor(e,r={}){super(r),this._addEventListeners(),this.__content_node__=void 0,this._workspace=e,this.__titles=[]}get private_titles(){return this._titles}onUpdateRequest(e){this.__content_node__=this.contentNode,this.node.style.contain="";let r=this._titles,s=this.renderer,o=this.currentTitle,l=new Array;for(let c=0,d=r.length;c<d;++c){let h=r[c],g=h===o,m=r.filter(v=>v!==o),p;m.length>0&&(p=this.onClick.bind(this,m,c)),g?l[c]=s.renderTab({title:h,zIndex:r.length+1,current:g},p):l[c]=s.renderInert()}Ut.render(l,this.contentNode),this._check_shade()}onClick(e,r,s){let o=new Mt;this._menu=new Yi(this._workspace.menu_elem.shadowRoot,this._workspace.element,{commands:o}),this._menu.addClass("perspective-workspace-menu"),this._menu.dataset.minwidth=this.__titles[r];for(let d of e)this._menu.addItem({command:"tabbar:switch",args:{title:d}});o.addCommand("tabbar:switch",{execute:async({title:d})=>{let h=d,g=this.__titles.findIndex(m=>m===d);this.currentTitle=h,this.tabActivateRequested.emit({index:g,title:h})},label:({title:d})=>d.label||"untitled",mnemonic:0});let l=s.target.getBoundingClientRect(),c=this._workspace.element.getBoundingClientRect();this._menu.open(l.x-c.x,l.y+l.height-c.y),this._menu.aboutToClose.connect(()=>{this._menu=void 0}),s.preventDefault(),s.stopPropagation()}_check_shade(){Array.from(this.contentNode.children).filter(e=>e.classList.contains("settings_open")&&e.classList.contains("lm-mod-current")).length>0?this.contentNode.classList.add("inactive-blur"):this.contentNode.classList.remove("inactive-blur")}handleEvent(e){switch(this._menu?.close(),this.retargetEvent(e),e.type){case"contextmenu":let r=this.currentTitle?.owner,s=r.parent;for(;s&&!(s instanceof Xi);)s=s.parent;s.showContextMenu(r,e),e.shiftKey||e.preventDefault();break;case"mousedown":if(e.target.id===Cs.Label)return;break;case"pointerdown":if(e.target.id===Cs.Label){let o=this.contentNode.children,l=ap.ArrayExt.findFirstIndex(o,d=>Ce.hitTest(d,e.clientX,e.clientY));if(l<0)break;let c=this.titles[l];this._workspace._maximize(c.owner),requestAnimationFrame(()=>c.owner.viewer.toggleConfig());return}break}super.handleEvent(e)}retargetEvent(e){return Object.defineProperty(e,"target",{value:e.composedPath()[0],enumerable:!0}),e}_addEventListeners(){this.node.addEventListener("dblclick",this),this.node.addEventListener("contextmenu",this)}};var Ro=class extends $i.Renderer{_workspace;constructor(e){super(),this._workspace=e}createTabBar(){let e=new Ts(this._workspace,{renderer:new Ms(!1)});return e.addClass("lm-DockPanel-tabBar"),e}},Qt=class n extends $i{constructor(e){super({renderer:new Ro(e)}),this._renderer.dock=this}_onTabDetachRequested(e,r){super._onTabDetachRequested(e,r);let s=e.titles[r.index].owner,o=this.layout,l=o.saveLayout();Array.from(o.widgets()).length>1&&o.removeWidget(s),s.addClass("widget-blur"),document.body.classList.add("lm-mod-override-cursor");let c=this._drag;c&&(c.dragImage?.parentElement.removeChild(c.dragImage),c.dragImage=null,c._promise.then(()=>{s.node.isConnected||o.restoreLayout(l),document.body.classList.remove("lm-mod-override-cursor"),s.removeClass("widget-blur")}))}static getWidgets(e){return e.main?n.getAreaWidgets(e.main):[]}static getAreaWidgets(e){return e?.hasOwnProperty("children")?e.children.flatMap(s=>n.getAreaWidgets(s)):e?.hasOwnProperty("widgets")?e.widgets:[]}widgets(){return super.widgets()}static mapWidgets(e,r){return r.main&&(r.main=n.mapAreaWidgets(e,r.main)),r}static mapAreaWidgets(e,r){if(r.hasOwnProperty("children")){let s=r;s.children=s.children.map(o=>n.mapAreaWidgets(e,o))}else if(r.hasOwnProperty("widgets")){let s=r;s.widgets=s.widgets.map(e)}return r}onAfterAttach(){this.spacing=parseInt(window.getComputedStyle(this.node).padding)||0}};var op=(n,e)=>{let r=new Mt;return r.addCommand("workspace:export",{execute:async s=>{let o=document.createElement("perspective-export-menu");n.apply_indicator_theme();let l=n.getWidgetByName(s.widget_name);o.set_model(l.viewer.get_model()),o.open(e),n.get_context_menu()?.init_overlay?.(),o.addEventListener("blur",()=>{n.get_context_menu().aboutToClose.emit({})})},isEnabled:s=>{if(n.get_context_menu()?.node.isConnected){let o=n.get_context_menu()?.node.getBoundingClientRect();o&&(e.style.top=o.top+"px",e.style.left=o.left+"px")}return!0},label:"Export",mnemonic:0}),r.addCommand("workspace:copy",{execute:async s=>{let o=document.createElement("perspective-copy-menu");n.apply_indicator_theme();let l=n.getWidgetByName(s.widget_name);o.set_model(l.viewer.get_model()),o.open(e),n.get_context_menu()?.init_overlay?.(),o.addEventListener("blur",()=>{n.get_context_menu()?.aboutToClose?.emit({})})},isEnabled:s=>{if(n.get_context_menu()?.node.isConnected){let o=n.get_context_menu()?.node.getBoundingClientRect();o&&(e.style.top=o.top+"px",e.style.left=o.left+"px")}return!0},label:"Copy",mnemonic:0}),r.addCommand("workspace:new",{execute:s=>{let o=n._createWidgetAndNode({config:{table:s.table},slot:void 0});n.get_dock_panel().addWidget(o,{mode:"split-right",ref:n.getWidgetByName(s.widget_name)})},label:s=>s.table}),r.addCommand("workspace:newview",{execute:async s=>{let o=n.getWidgetByName(s.widget_name),c=await n.getWidgetByName(s.target_widget_name).save(),d=n._createWidgetAndNode({config:c,slot:void 0});n.get_dock_panel().addWidget(d,{mode:"split-right",ref:o})},isVisible:s=>n.getWidgetByName(s.target_widget_name).title.label!=="",label:s=>n.getWidgetByName(s.target_widget_name).title.label||"untitled"}),r.addCommand("workspace:reset",{execute:s=>{n.getWidgetByName(s.widget_name).viewer.reset()},label:"Reset",mnemonic:0}),r.addCommand("workspace:settings",{execute:async({widget_name:s})=>{let o=n.getWidgetByName(s);if(!o)throw new Error(`No widget ${s}`);o.viewer.hasAttribute("settings")?o.viewer.toggleConfig():(n._maximize(o),requestAnimationFrame(()=>o.viewer.toggleConfig()))},isVisible:s=>n.getWidgetByName(s.widget_name).parent===n.get_dock_panel(),label:s=>n.getWidgetByName(s.widget_name).viewer.hasAttribute("settings")?"Close Settings":"Open Settings",mnemonic:0}),r.addCommand("workspace:duplicate",{execute:({widget_name:s})=>n.duplicate(n.getWidgetByName(s)),isVisible:s=>n.getWidgetByName(s.widget_name).parent===n.get_dock_panel(),label:"Duplicate",mnemonic:0}),r.addCommand("workspace:master",{execute:s=>n.toggleMasterDetail(n.getWidgetByName(s.widget_name)),isVisible:s=>!!n.getWidgetByName(s.widget_name)?._is_pivoted,label:s=>n.getWidgetByName(s.widget_name).parent===n.get_dock_panel()?"Create Global Filter":"Remove Global Filter",mnemonic:0}),r.addCommand("workspace:close",{execute:s=>{n.getWidgetByName(s.widget_name).close()},label:()=>"Close",mnemonic:0}),r.addCommand("workspace:help",{execute:()=>{},label:"Shift+Click for Browser Menu",isEnabled:()=>!1}),r};var hr=class extends j{viewer;_title;_is_table_loaded;_is_pivoted;_restore_config;task;constructor({viewer:e,node:r}){super({node:r}),this.viewer=e,this._title="",this._is_table_loaded=!1,this._is_pivoted=!1}get name(){return this._title}toggleConfig(){return this.viewer.toggleConfig()}async load(e){this._is_table_loaded=!0;let r=[this.viewer.load(e)];this._restore_config&&r.push(this._restore_config()),await Promise.all(r)}restore(e){let{table:r,...s}=e;this._title=e.title,this.title.label=e.title,r&&this.viewer.setAttribute("table",r);let o=()=>this.viewer.restore({...s});if(this._is_table_loaded)return o();this._restore_config=o}async save(){let e={...await this.viewer.save(),table:this.viewer.getAttribute("table")};return delete e.settings,e}removeClass(e){super.removeClass(e),this.viewer&&this.viewer.classList.remove(e)}async onCloseRequest(e){super.onCloseRequest(e),this.viewer.parentElement&&this.viewer.parentElement.removeChild(this.viewer),await this.viewer.delete()}};var Ss=class extends Map{_set_listener;_delete_listener;set(e,r){return this._set_listener?.(e,r),super.set(e,r),this}get(e){return super.get(e)}delete(e){return this._delete_listener?.(e),super.delete(e)}addSetListener(e){this._set_listener=e}addDeleteListener(e){this._delete_listener=e}};var Wo=[1,3],BI=0,Xi=class extends Zt{dockpanel;detailPanel;masterPanel;element;menu_elem;_tables;listeners;indicator;commands;_menu;_minimizedLayoutSlots;_minimizedLayout;_maximizedWidget;_last_updated_state;constructor(e){super({orientation:"horizontal"}),this.addClass("perspective-workspace"),this.dockpanel=new Qt(this),this.detailPanel=new vn,this.detailPanel.layout.fitPolicy="set-no-constraint",this.detailPanel.addClass("perspective-scroll-panel"),this.detailPanel.addWidget(this.dockpanel),this.masterPanel=new Zt({orientation:"vertical"}),this.masterPanel.addClass("master-panel"),this.dockpanel.layoutModified.connect(()=>{this.workspaceUpdated()}),this.addWidget(this.detailPanel),this.spacing=6,this.element=e,this.listeners=new WeakMap,this._tables=new Ss,this._tables.addSetListener(this._set_listener.bind(this)),this._tables.addDeleteListener(this._delete_listener.bind(this)),this.indicator=this.init_indicator(),this.commands=op(this,this.indicator),this.menu_elem=document.createElement("perspective-workspace-menu"),this.menu_elem.attachShadow({mode:"open"}),this.menu_elem.shadowRoot.innerHTML=`<style>:host{position:absolute;}${np}</style>`,this.element.shadowRoot.insertBefore(this.menu_elem,this.element.shadowRoot.lastElementChild),e.addEventListener("contextmenu",r=>this.showContextMenu(null,r))}get_context_menu(){return this._menu}get_dock_panel(){return this.dockpanel}init_indicator(){let e=document.createElement("perspective-indicator");return e.style.position="fixed",e.style.pointerEvents="none",document.body.appendChild(e),e}apply_indicator_theme(){let e=JSON.parse(window.getComputedStyle(this.element).getPropertyValue("--theme-name").trim());this.indicator.setAttribute("theme",e)}addTable(e,r){this.tables.set(e,r)}getTable(e){return this.tables.get(e)}removeTable(e){return this.tables.delete(e)}replaceTable(e,r){this.tables.set(e,r)}get tables(){return this._tables}async save(){let e=this.dockpanel.mode==="single-document",r=e?this._minimizedLayoutSlots:Qt.mapWidgets(c=>c.viewer.getAttribute("slot"),this.dockpanel.saveLayout()),s={sizes:[...this.relativeSizes()],detail:r,master:void 0};if(this.masterPanel.isAttached){let c={widgets:this.masterPanel.widgets.map(d=>d.viewer.getAttribute("slot")),sizes:[...this.masterPanel.relativeSizes()]};s.master=c}let o={};for(let c of this.masterPanel.widgets){let d=c;o[d.viewer.getAttribute("slot")]=await d.save()}let l=Qt.getWidgets(e?this._minimizedLayout:this.dockpanel.saveLayout());return await Promise.all(l.map(async c=>{let d=c,h=d.viewer.getAttribute("slot");o[h]=await d.save(),o[h].settings=!1})),{...s,viewers:o}}async restore(e){let{sizes:r,master:s,detail:o,viewers:l={}}=structuredClone(e);s&&s.widgets.length>0?this.setupMasterPanel(r||Wo):(this.masterPanel.isAttached&&(this.detailPanel.removeClass("has-master-panel"),this.masterPanel.close()),this.addWidget(this.detailPanel));let c=[];for(let d of this._capture_viewers())for(let h of this._capture_widgets()){for(let m of d)m.removeAttribute("class");let g=this._restore_callback.bind(this,l,d,h);if(o){let m=Qt.mapWidgets(p=>g.bind(this,!1)(p),o);this.dockpanel.mode="multiple-document",this.dockpanel.restoreLayout(m),c=c.concat(Qt.getWidgets(m).map(p=>p.task))}s&&(c=c.concat(s.widgets.map(m=>g.bind(this,!0)(m).task)),s.sizes&&this.masterPanel.setRelativeSizes(s.sizes))}await Promise.all(c)}*_capture_widgets(){let e=this.getAllWidgets();yield e;for(let r of e)r.node.isConnected||r.close()}*_capture_viewers(){let e=Array.from(this.element.children);yield e;let r=this.getAllWidgets();for(let s of e)!r.find(l=>l.viewer===s)&&Array.from(this.element.children).indexOf(s)>-1&&(this.element.removeChild(s),s.delete(),s.free())}_restore_callback(e,r,s,o,l){let c;c=e[l];let d=!!l&&r.find(g=>g.getAttribute("slot")===l),h;if(d)h=s.find(g=>g.viewer===d),h?(h.load(this.tables.get(c.table)),h.restore({...c})):h=this._createWidget({config:{...c},viewer:d});else if(c)h=this._createWidgetAndNode({config:{...c},slot:l});else throw new Error(`Could not find or create <perspective-viewer> for slot "${l}"`);return o&&(h.viewer.classList.add("workspace-master-widget"),h.viewer.toggleAttribute("selectable",!0),h.viewer.addEventListener("perspective-select",this.onPerspectiveSelect.bind(this)),h.viewer.addEventListener("perspective-click",this.onPerspectiveSelect.bind(this)),this.masterPanel.addWidget(h)),h}_validate(e){if(!e||!("view"in e)||typeof e?.view!="function")throw new Error("Only `perspective.Table()` instances can be added to `tables`");return e}_set_listener(e,r){r instanceof Promise?r=r.then(this._validate):this._validate(r),this.getAllWidgets().forEach(s=>{let o=s;o.viewer.getAttribute("table")===e&&o.load(r)})}_delete_listener(e){this.getAllWidgets().some(r=>{let s=r;s.viewer.getAttribute("table")===e&&s.viewer.eject()})}update_widget_for_viewer(e){let r=e.getAttribute("slot");if(r||(r=this._gen_id(),e.setAttribute("slot",r)),e.getAttribute("table")){if(!this.node.querySelector(`slot[name=${r}]`)){console.warn(`Undocked ${e.outerHTML}, creating default layout`);let l=this._createWidget({config:{table:e.getAttribute("table")},viewer:e});this.dockpanel.addWidget(l),this.dockpanel.activateWidget(l)}}else console.warn(`No table set for ${e.outerHTML}`)}remove_unslotted_widgets(e){let r=this.getAllWidgets();for(let s of r){let o=s;e.indexOf(o.viewer)===-1&&o.close()}}update_details_panel(e){this.masterPanel.widgets.length===0&&this.masterPanel.close()}async duplicate(e){if(this.dockpanel.mode==="single-document"){let o=await this._maximizedWidget.viewer.toggleConfig(!1);this._unmaximize()}let r=await e.save();r.settings=!1,r.title=r.title?`${r.title} (*)`:"";let s=this._createWidgetAndNode({config:r,slot:void 0});this.dockpanel.addWidget(s,{mode:"split-right",ref:e}),await s.task}toggleMasterDetail(e){let r=e.parent!==this.dockpanel;this.element.dispatchEvent(new CustomEvent("workspace-toggle-global-filter",{detail:{widget:e,isGlobalFilter:!r}})),r?this.makeDetail(e):(this.dockpanel.mode==="single-document"&&this.toggleSingleDocument(e),this.makeMaster(e))}_maximize(e){e.viewer.classList.add("widget-maximize"),this._minimizedLayout=this.dockpanel.saveLayout(),this._minimizedLayoutSlots=Qt.mapWidgets(r=>r.viewer.getAttribute("slot"),this.dockpanel.saveLayout()),this._maximizedWidget=e,this.dockpanel.mode="single-document",this.dockpanel.activateWidget(e)}_unmaximize(){this._maximizedWidget.viewer.classList.remove("widget-maximize"),this.dockpanel.mode="multiple-document",this.dockpanel.restoreLayout(this._minimizedLayout)}toggleSingleDocument(e){this.dockpanel.mode!=="single-document"?this._maximize(e):this._unmaximize()}async _filterViewer(e,r,s){let o=await e.save(),l=await e.getTable(),c=Object.keys(await l.schema()),d=o.filter||[],h=p=>p[0]&&c.includes(p[0]),g=r.filter(h);g.push(...d.filter(p=>!s.has(p[0])));let m=(0,lp.default)(g,p=>p[0]);await e.restore({filter:m})}async onPerspectiveSelect(e){let r=await e.target.save();if(e.type==="perspective-click"&&(r.plugin==="Datagrid"||r.plugin===null))return;let s=new Set([...r.group_by||[],...r.split_by||[],...(r.filter||[]).map(l=>l[0])]),o=[...e.detail.config.filter];(0,fr.toArray)(this.dockpanel.widgets()).forEach(l=>{this._filterViewer(l.viewer,o,s)})}async makeMaster(e){e.viewer.hasAttribute("settings")&&await e.toggleConfig(),e.viewer.classList.add("workspace-master-widget"),e.viewer.toggleAttribute("selectable",!0),this.masterPanel.isAttached||(this.detailPanel.close(),this.setupMasterPanel(Wo)),this.masterPanel.addWidget(e),e.isHidden&&e.show(),e.viewer.restyleElement(),e.viewer.addEventListener("perspective-click",this.onPerspectiveSelect.bind(this)),e.viewer.addEventListener("perspective-select",this.onPerspectiveSelect.bind(this))}makeDetail(e){e.viewer.classList.remove("workspace-master-widget"),e.viewer.toggleAttribute("selectable",!1),this.dockpanel.addWidget(e,{mode:"split-left"}),this.masterPanel.widgets.length===0&&(this.detailPanel.close(),this.masterPanel.close(),this.detailPanel.removeClass("has-master-panel"),this.addWidget(this.detailPanel)),e.viewer.restyleElement(),e.viewer.removeEventListener("perspective-click",this.onPerspectiveSelect.bind(this)),e.viewer.removeEventListener("perspective-select",this.onPerspectiveSelect.bind(this))}createContextMenu(e){this._menu=new Yi(this.menu_elem.shadowRoot,this.element,{commands:this.commands});let r=(0,fr.find)(this.dockpanel.tabBars(),s=>s.currentTitle?.owner===e);if(this._menu.init_overlay=()=>{e&&(e.addClass("context-focus"),e.viewer.classList.add("context-focus"),r&&r.node.classList.add("context-focus"),this.element.classList.add("context-menu"),this.addClass("context-menu"),e.viewer.classList.contains("workspace-master-widget")?this._menu.node.classList.add("workspace-master-menu"):this._menu.node.classList.remove("workspace-master-menu"))},(e?.parent===this.dockpanel||e===null)&&this._menu.addItem({type:"submenu",command:"workspace:newmenu",submenu:(()=>{let s=new Yi(this.menu_elem.shadowRoot,this.element,{commands:this.commands});for(let c of this.tables.keys()){let d;e!==null?d={table:c,widget_name:e.viewer.getAttribute("slot")}:d={table:c},s.addItem({command:"workspace:new",args:d})}let o=Qt.getWidgets(this.dockpanel.saveLayout());o.length>0&&s.addItem({type:"separator"});let l=new Set;for(let c of o)if(!l.has(c.title.label)){let d;e!==null?d={target_widget_name:c.viewer.getAttribute("slot"),widget_name:e.viewer.getAttribute("slot")}:d={target_widget_name:c.viewer.getAttribute("slot")},s.addItem({command:"workspace:newview",args:d}),l.add(c.title.label)}return s.title.label="New Table",s})()}),e){let s=e.viewer.getAttribute("slot");e?.parent===this.dockpanel&&this._menu.addItem({type:"separator"}),this._menu.addItem({command:"workspace:duplicate",args:{widget_name:s}}),this._menu.addItem({command:"workspace:master",args:{widget_name:s}}),this._menu.addItem({type:"separator"}),this._menu.addItem({command:"workspace:settings",args:{widget_name:s}}),this._menu.addItem({command:"workspace:reset",args:{widget_name:s}}),this._menu.addItem({command:"workspace:export",args:{widget_name:s}}),this._menu.addItem({command:"workspace:copy",args:{widget_name:s}}),this._menu.addItem({type:"separator"}),this._menu.addItem({command:"workspace:close",args:{widget_name:s}}),this._menu.addItem({command:"workspace:help"})}return this._menu.aboutToClose.connect(()=>{e&&(this.element.classList.remove("context-menu"),this.removeClass("context-menu"),e.removeClass("context-focus"),r?.node?.classList.remove("context-focus"))}),this._menu}showContextMenu(e,r){if(!r.shiftKey){let s=this.createContextMenu(e);s.init_overlay?.();let o=this.element.getBoundingClientRect();s.open(r.clientX-o.x,r.clientY-o.y,{host:this.menu_elem.shadowRoot}),r.preventDefault(),r.stopPropagation()}}clearLayout(){this.getAllWidgets().forEach(e=>e.close()),this.widgets.forEach(e=>e.close()),this.detailPanel.close(),this.masterPanel.isAttached&&(this.detailPanel.removeClass("has-master-panel"),this.masterPanel.close())}setupMasterPanel(e){this.detailPanel.addClass("has-master-panel"),this.addWidget(this.masterPanel),this.addWidget(this.detailPanel),this.setRelativeSizes(e)}addViewer(e,r){if(this.dockpanel.mode==="single-document"){let o=this._maximizedWidget.viewer.toggleConfig(!1);this._unmaximize()}let s=this._createWidgetAndNode({config:e});r?(this.masterPanel.isAttached||this.setupMasterPanel(Wo),this.masterPanel.addWidget(s)):(this.detailPanel.isAttached||this.addWidget(this.detailPanel),this.dockpanel.addWidget(s,{mode:"split-right"})),this.update()}_createWidgetAndNode({config:e,slot:r}){let s=this._createNode(r),o=e.table,l=document.createElement("perspective-viewer");return l.setAttribute("slot",s.querySelector("slot").getAttribute("name")),o&&l.setAttribute("table",o),this._createWidget({config:e,elem:s,viewer:l})}_gen_id(){let e=`PERSPECTIVE_GENERATED_ID_${BI++}`;return this.element.querySelector(`[slot=${e}]`)&&(e=this._gen_id()),e}_createNode(e){let r=this.node.querySelector(`slot[name=${e}]`);if(e===void 0||!r){let s=document.createElement("slot");e=e||this._gen_id(),s.setAttribute("name",e);let o=document.createElement("div");o.classList.add("viewer-container"),o.appendChild(s),r=document.createElement("div"),r.classList.add("workspace-widget"),r.appendChild(o)}else r=r.parentElement.parentElement;return r}_createWidget({config:e,elem:r,viewer:s}){let o=r;if(!o){let h=s.getAttribute("slot")||void 0;o=this.node.querySelector(`slot[name=${h}]`),o?o=o.parentElement.parentElement:o=this._createNode(h)}let l=this.tables.get(s.getAttribute("table")||e.table),c=new hr({node:o,viewer:s});c.task=(async()=>{l&&c.load(l),await c.restore(e)})();let d=new CustomEvent("workspace-new-view",{detail:{config:e,widget:c}});return this.element.dispatchEvent(d),c.title.closable=!0,this.element.appendChild(c.viewer),this._addWidgetEventListeners(c),c}_addWidgetEventListeners(e){this.listeners.has(e)&&this.listeners.get(e)();let r=l=>{!l.detail&&this.dockpanel.mode==="single-document"&&this._unmaximize()},s=l=>this.showContextMenu(e,l),o=async l=>{this.workspaceUpdated();let c=typeof l.detail>"u"?await e.viewer.save():l.detail;e.title.label=c.title,e._is_pivoted=c.group_by?.length>0};e.node.addEventListener("contextmenu",s),e.viewer.addEventListener("perspective-toggle-settings",r),e.viewer.addEventListener("perspective-config-update",o),this.listeners.set(e,()=>{e.node.removeEventListener("contextmenu",s),e.viewer.removeEventListener("perspective-toggle-settings",r),e.viewer.removeEventListener("perspective-config-update",o)})}getWidgetByName(e){return this.getAllWidgets().find(r=>r.viewer.getAttribute("slot")===e)||null}getAllWidgets(){return[...this.masterPanel.widgets,...(0,fr.toArray)(this.dockpanel.widgets())]}async workspaceUpdated(){let e=await this.save();if(e){if(this._last_updated_state&&(0,up.isEqual)(this._last_updated_state,e))return;this._last_updated_state=e;let r={};this.tables.forEach((s,o)=>{r[o]=s}),this.element.dispatchEvent(new CustomEvent("workspace-layout-update",{detail:{tables:r,layout:e}}))}}};function DI(n){let e=document.createElement("div");return e.innerHTML=n,Array.prototype.slice.call(e.children)[0]}function PI(n,e,r){let s=DI(n);e&&(s.innerHTML=`<style>${e.toString()}</style>`+s.innerHTML);let o=class extends r{_initialized;_initializing;constructor(){super(),this._initialized=!1,this._initializing=!1}connectedCallback(){if(this._initialized)return;this._initializing=!0;let c=document.importNode(s.content,!0);this.attachShadow({mode:"open"}).appendChild(c),r.prototype.connectedCallback&&r.prototype.connectedCallback.call(this),this._initializing=!1,this._initialized=!0}static get observedAttributes(){return Object.getOwnPropertyNames(r.prototype)}},l=s.getAttribute("id");window.customElements.define(l,o)}function dp(n,...e){let r=e.map(s=>s.toString()).join(`
`);return function(s){return PI(n,r,s)}}var cp=`.lm-Widget{box-sizing:border-box;position:relative;}.lm-Widget.lm-mod-hidden{display:none!important;}.lm-AccordionPanel[data-orientation='horizontal']>.lm-AccordionPanel-title{display:block;transform-origin:top left;transform:rotate(-90deg)translate(-100%);}.lm-CommandPalette{display:flex;flex-direction:column;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.lm-CommandPalette-search{flex:0 0 auto;}.lm-CommandPalette-content{flex:1 1 auto;margin:0;padding:0;min-height:0;overflow:auto;list-style-type:none;}.lm-CommandPalette-header{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;}.lm-CommandPalette-item{display:flex;flex-direction:row;}.lm-CommandPalette-itemIcon{flex:0 0 auto;}.lm-CommandPalette-itemContent{flex:1 1 auto;overflow:hidden;}.lm-CommandPalette-itemShortcut{flex:0 0 auto;}.lm-CommandPalette-itemLabel{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;}.lm-close-icon{border:1px solid transparent;background-color:transparent;position:absolute;z-index:1;right:3%;top:0;bottom:0;margin:auto;padding:7px 0;display:none;vertical-align:middle;outline:0;cursor:pointer;}.lm-close-icon:after{content:'X';display:block;width:15px;height:15px;text-align:center;color:#000;font-weight:normal;font-size:12px;cursor:pointer;}.lm-DockPanel{z-index:0;}.lm-DockPanel-widget{z-index:0;}.lm-DockPanel-tabBar{z-index:1;}.lm-DockPanel-handle{z-index:2;}.lm-DockPanel-handle.lm-mod-hidden{display:none!important;}.lm-DockPanel-handle:after{position:absolute;top:0;left:0;width:100%;height:100%;content:'';}.lm-DockPanel-handle[data-orientation='horizontal']{cursor:ew-resize;}.lm-DockPanel-handle[data-orientation='vertical']{cursor:ns-resize;}.lm-DockPanel-handle[data-orientation='horizontal']:after{left:50%;min-width:8px;transform:translateX(-50%);}.lm-DockPanel-handle[data-orientation='vertical']:after{top:50%;min-height:8px;transform:translateY(-50%);}.lm-DockPanel-overlay{z-index:3;box-sizing:border-box;pointer-events:none;}.lm-DockPanel-overlay.lm-mod-hidden{display:none!important;}.lm-Menu{z-index:10000;position:absolute;white-space:nowrap;overflow-x:hidden;overflow-y:auto;outline:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.lm-Menu-content{margin:0;padding:0;display:table;list-style-type:none;}.lm-Menu-item{display:table-row;}.lm-Menu-item.lm-mod-hidden,.lm-Menu-item.lm-mod-collapsed{display:none!important;}.lm-Menu-itemIcon,.lm-Menu-itemSubmenuIcon{display:table-cell;text-align:center;}.lm-Menu-itemLabel{display:table-cell;text-align:left;}.lm-Menu-itemShortcut{display:table-cell;text-align:right;}.lm-MenuBar{outline:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.lm-MenuBar-content{margin:0;padding:0;display:flex;flex-direction:row;list-style-type:none;}.lm-MenuBar-item{box-sizing:border-box;}.lm-MenuBar-itemIcon,.lm-MenuBar-itemLabel{display:inline-block;}.lm-ScrollBar{display:flex;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.lm-ScrollBar[data-orientation='horizontal']{flex-direction:row;}.lm-ScrollBar[data-orientation='vertical']{flex-direction:column;}.lm-ScrollBar-button{box-sizing:border-box;flex:0 0 auto;}.lm-ScrollBar-track{box-sizing:border-box;position:relative;overflow:hidden;flex:1 1 auto;}.lm-ScrollBar-thumb{box-sizing:border-box;position:absolute;}.lm-SplitPanel-child{z-index:0;}.lm-SplitPanel-handle{z-index:1;}.lm-SplitPanel-handle.lm-mod-hidden{display:none!important;}.lm-SplitPanel-handle:after{position:absolute;top:0;left:0;width:100%;height:100%;content:'';}.lm-SplitPanel[data-orientation='horizontal']>.lm-SplitPanel-handle{cursor:ew-resize;}.lm-SplitPanel[data-orientation='vertical']>.lm-SplitPanel-handle{cursor:ns-resize;}.lm-SplitPanel[data-orientation='horizontal']>.lm-SplitPanel-handle:after{left:50%;min-width:8px;transform:translateX(-50%);}.lm-SplitPanel[data-orientation='vertical']>.lm-SplitPanel-handle:after{top:50%;min-height:8px;transform:translateY(-50%);}.lm-TabBar{display:flex;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.lm-TabBar[data-orientation='horizontal']{flex-direction:row;align-items:flex-end;}.lm-TabBar[data-orientation='vertical']{flex-direction:column;align-items:flex-end;}.lm-TabBar-content{margin:0;padding:0;display:flex;flex:1 1 auto;list-style-type:none;}.lm-TabBar[data-orientation='horizontal']>.lm-TabBar-content{flex-direction:row;}.lm-TabBar[data-orientation='vertical']>.lm-TabBar-content{flex-direction:column;}.lm-TabBar-tab{display:flex;flex-direction:row;box-sizing:border-box;overflow:hidden;touch-action:none;}.lm-TabBar-tabIcon,.lm-TabBar-tabCloseIcon{flex:0 0 auto;}.lm-TabBar-tabLabel{flex:1 1 auto;overflow:hidden;white-space:nowrap;}.lm-TabBar-tabInput{user-select:all;width:100%;box-sizing:border-box;}.lm-TabBar-tab.lm-mod-hidden{display:none!important;}.lm-TabBar-addButton.lm-mod-hidden{display:none!important;}.lm-TabBar.lm-mod-dragging .lm-TabBar-tab{position:relative;}.lm-TabBar.lm-mod-dragging[data-orientation='horizontal'] .lm-TabBar-tab{left:0;transition:left 150ms ease;}.lm-TabBar.lm-mod-dragging[data-orientation='vertical'] .lm-TabBar-tab{top:0;transition:top 150ms ease;}.lm-TabBar.lm-mod-dragging .lm-TabBar-tab.lm-mod-dragging{transition:none;}.lm-TabBar-tabLabel .lm-TabBar-tabInput{user-select:all;width:100%;box-sizing:border-box;background:inherit;}.lm-TabPanel-tabBar{z-index:1;}.lm-TabPanel-stackedPanel{z-index:0;}.workspace-master-widget{--config-button-icon--content:var(--open-settings-button--content,"\\1F527")!important;}.workspace-master-widget[settings]{--config-button-icon--content:var(--close-settings-button--content,"\\1F527")!important;}.widget-maximize:not(.workspace-master-widget){--config-button-icon--content:var(--open-settings-button--content,"\\1F527")!important;}.widget-maximize[settings]:not(.workspace-master-widget){--config-button-icon--content:var(--close-settings-button--content,"\\1F527")!important;}.lm-DockPanel-widget{border:1px solid#eaeaea;border-width:0px!important;min-width:300px;min-height:200px;}.workspace-master-widget:not{--config-button-icon--content:""!important;}.context-menu>perspective-viewer.context-focus{opacity:1;filter:none;}.context-menu>perspective-viewer{filter:saturate(0);}.context-menu>perspective-viewer>*{pointer-events:none;}::slotted(perspective-viewer){flex:1;position:relative;display:block;align-items:center;justify-content:center;flex-direction:column;width:100%;height:100%;overflow:visible!important;}:host-context(.lm-mod-override-cursor){cursor:grabbing!important;}:host-context(.lm-mod-override-cursor) ::slotted(perspective-viewer),.context-menu ::slotted(perspective-viewer){--override-content-pointer-events:none;}.lm-Menu{font-size:12px;padding:8px;background-color:var(--plugin--background);color:var(--icon--color);border:1px solid var(--inactive--color);border-radius:3px;max-width:350px;top:0;left:0;}.lm-Menu.perspective-workspace-menu .lm-Menu-item{padding-left:37px!important;min-width:var(--min-width);}.lm-Menu-item.lm-mod-active{background-color:var(--icon--color);color:var(--plugin--background);}.lm-Menu-item.lm-mod-disabled{opacity:0.5;}.lm-Menu-itemIcon{width:24px;height:12px;margin-right:4px;}.lm-Menu-itemLabel{flex:1 1;padding:4px 2px 4px 2px;}.lm-Menu-itemMnemonic{text-decoration:underline;}.lm-Menu-itemShortcut{padding:4px 0px;}.lm-Menu-itemSubmenuIcon{width:24px;height:18px;}.lm-Menu-item{display:flex;align-items:center;outline:none;margin:0 -8px;padding:0 8px;}.lm-Menu-item[data-type="separator"]>div{padding:0;height:9px;}.lm-Menu-item[data-type="separator"]>div::after{content:"";display:block;position:relative;top:4px;border-top:1px solid#dddddd;}.lm-MenuBar-menu{transform:translateY(-1px);}.lm-MenuBar-item{padding:10px 32px;border-left:1px solid transparent;border-right:1px solid transparent;color:#737373!important;}.lm-MenuBar-item.lm-mod-active{background:rgba(0,0,0,0.2);}.lm-MenuBar.lm-mod-active .lm-MenuBar-item.lm-mod-active{z-index:10001;background:rgba(0,0,0,0.2);}.lm-Menu-itemIcon:before{content:attr(content);font-family:"ui-monospace","SFMono-Regular","SF Mono","Menlo","Consolas","Liberation Mono",monospace;}[data-type="submenu"] .lm-Menu-itemSubmenuIcon:before{content:">";font-family:"ui-monospace","SFMono-Regular","SF Mono","Menlo","Consolas","Liberation Mono",monospace;height:18px;}.lm-mod-drag-image.lm-TabBar-tab{display:none;}:host .lm-TabBar-tabLabel{background-color:transparent;border:none;color:var(--icon--color,#666);cursor:pointer;padding:0px 6px;margin:0;margin-left:15.5px;margin-right:auto;flex:0 1 auto;border-radius:3px;}:host .lm-TabBar-tabLabel:hover{background-color:var(--icon--color);color:var(--plugin--background);}:host .lm-TabBar-tabLabel:focus{outline:none;color:var(--workspace-secondary--color,#666)!important;cursor:text;}:host .lm-TabBar-tab.lm-mod-closable>.lm-TabBar-tabCloseIcon:before{content:var(--close-button--content,"\\2715");}:host .lm-TabBar-tab>.lm-TabBar-tabConfigIcon:before{content:var(--open-settings-button--content,"\\1F527");font-family:var(--settings--font-family,"Arial");transition:color 0.5s ease;}:host .lm-TabBar-tab.lm-mod-current.settings_open>.lm-TabBar-tabConfigIcon:before{content:var(--close-settings-button--content,"\\1F527");}:host .lm-TabBar-tab.lm-mod-current.linked>.lm-TabBar-tabConfigIcon:before{color:#22a0ce;}:host .lm-TabBar-tab>.lm-TabBar-tabConfigIcon{opacity:0;pointer-events:none;}:host .lm-TabBar-tab.lm-mod-current>.lm-TabBar-tabConfigIcon{opacity:1;pointer-events:all;}:host .lm-mod-current .lm-TabBar-tabConfigIcon,:host .lm-mod-current .lm-TabBar-tabCloseIcon{color:inherit;transition:color 0.2s ease-out;}:host .lm-mod-current .lm-TabBar-tabConfigIcon:hover,:host .lm-mod-current .lm-TabBar-tabCloseIcon:hover{color:#1a7da1;transition:color 0.2s ease-out;}:host .lm-BoxPanel{overflow:scroll!important;}:host .lm-TabBar,:host .lm-TabBar-tab{position:relative;overflow:visible!important;}:host .lm-TabBar-tabLabel:empty::after{content:"untitled";color:#aaa;}:host .lm-mod-current .lm-TabBar-tabLabel:empty::after{color:#ddd;}:host .lm-TabBar-tabLabel:empty::after{content:"untitled";}:host .divider{left:32px;bottom:0;position:absolute;right:32px;height:1px;background-color:var(--workspace-tabbar--border-color);margin-bottom:0px;}:host .lm-TabBar-tab .drag-handle{height:12px;width:5px;-webkit-mask-image:var(--column-drag-handle--mask-image);mask-image:var(--column-drag-handle--mask-image);margin:0px 0 0 21.5px;background-repeat:no-repeat;background-color:var(--inactive--color,red);content:"";display:inline-block;-webkit-mask-size:cover;mask-size:cover;}:host .lm-TabBar-tab.lm-mod-hidden{display:flex!important;opacity:0.5;}:host .lm-TabBar-tab.lm-mod-current .divider{display:block;}:host .lm-TabBar{min-height:40px!important;}:host .pfm-button-base{background:white!important;}:host .pfm-button-base:active{background:#016bc6!important;}:host .lm-TabBar-content{padding:0px;border-bottom:0px solid#fff!important;border-left:#eaeaea;border-right:#eaeaea;}:host .lm-TabBar-tab.lm-mod-current .shadow{margin:-1px;position:absolute;width:calc(100% + 2px);height:200%;pointer-events:none;left:0px;}:host .lm-TabBar-tab.lm-mod-current.settings_open .shadow{box-shadow:none;}:host .lm-TabBar-tab{border-color:#eaeaea;align-items:center;}:host .lm-TabBar-content.inactive-blur>.lm-TabBar-tab{background-color:var(--workspace-inactive-blur--background-color,transparent);}:host .condensed .lm-TabBar-content>.lm-TabBar-tab.lm-mod-current .lm-TabBar-tabConfigIcon{display:block;}:host .condensed .lm-TabBar-content>.lm-TabBar-tab.lm-mod-current.settings_open .lm-TabBar-tabLabel{margin-left:0px;}:host .lm-TabBar-content>.lm-TabBar-tab.lm-mod-current.settings_open{border-width:1px 1px 0px 1px!important;border-color:var(--workspace-tabbar--border-color,#ddd);}:host .lm-TabBar-content>.lm-TabBar-tab.lm-mod-current.settings_open .lm-TabBar-tabToolbar{display:flex;}:host .lm-TabBar-content>.lm-TabBar-tab.lm-mod-current.settings_open .divider{height:1px;margin-bottom:0px;background-color:var(--workspace-tabbar--border-color,#ddd);}:host .lm-TabBar-content>.lm-TabBar-tab.lm-mod-current.settings_open:last-child:first-child .divider{transition:none;}:host .lm-TabBar-content>.lm-TabBar-tab.lm-mod-current.perspective_updating .lm-TabBar-tabConfigIcon{display:none;}:host .lm-TabBar-content>.lm-TabBar-tab.lm-mod-current.perspective_updating .lm-TabBar-tabLoadingIcon{display:block;}:host .lm-TabBar-content>.lm-TabBar-tab{max-width:100000px!important;flex:0 1 100000px!important;background:none;color:#737373;height:40px!important;max-height:40px!important;transform:none!important;transition:color 0.2s ease-out;color:#ccc;color:#ccc;}:host .lm-TabBar-content>.lm-TabBar-tab:hover{color:#ccc;}:host .lm-TabBar-content>.lm-TabBar-tab.lm-mod-current{color:var(--workspace-secondary--color,#666);}:host .lm-TabBar-tab.lm-mod-current .lm-TabBar-tabLabel{white-space:nowrap!important;}:host .lm-TabBar-tabLabel{font-family:inherit;font-size:12px;line-height:22px;text-align:start;white-space:normal!important;word-break:break-all;}:host .lm-TabBar-tabCloseIcon,:host .lm-TabBar-tabConfigIcon{cursor:pointer!important;line-height:22px!important;padding-right:16.5px!important;}:host .lm-TabBar-tabConfigIcon{padding-left:8px;padding-right:8px!important;}:host .lm-TabBar-tabLoadingIcon{padding-left:11px;padding-right:12px;}:host .bottom .lm-TabBar-tab{flex-basis:10000px!important;max-width:10000px!important;}:host .lm-TabBar-content>.lm-TabBar-tab.lm-mod-current{color:var(--workspace-tabbar--color,#666)!important;border:var(--workspace-tabbar--border,1px solid#ddd);border-width:var(--workspace-tabbar-tab--border-width);box-shadow:0 13px 0 -12px var(--inactive--border-color);border-radius:6px 6px 0 0;background-color:var(--workspace-tabbar--background-color,white);height:40px!important;max-height:40px!important;}:host .bottom .lm-TabBar-tab.lm-mod-current{border:none;}:host ::-webkit-scrollbar-thumb{background-color:#ccc;}:host .perspective-workspace.context-menu * .lm-TabBar.context-focus{opacity:1;}:host .perspective-workspace.context-menu * .lm-TabBar,:host .perspective-workspace.context-menu .lm-Widget.workspace-widget:not(.context-focus) .viewer-container{opacity:0.2;}:host .bookmarks-button{margin-left:11px;margin-right:-13px;border-radius:3px;height:22px;}:host .bookmarks-button:hover{background-color:var(--icon--color);}:host .bookmarks{cursor:pointer;background-repeat:no-repeat;background-color:var(--icon--color);content:"";display:inline-block;-webkit-mask-size:cover;mask-size:cover;width:26px;height:12px;-webkit-mask-image:var(--bookmarks--mask-image);mask-image:var(--bookmarks--mask-image);-webkit-mask-position:center;mask-position:center;-webkit-mask-size:auto;mask-size:auto;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;padding:5px;}:host .bookmarks:hover{background-color:var(--plugin--background);}:host .lm-DockPanel{overflow:var(--dock-panel--overflow,hidden);position:absolute;background-color:var(--detail--background-color,transparent);padding:3px;top:0;left:0;right:0;bottom:0;}:host .lm-DockPanel[data-mode="single-document"]{padding:0px;}:host .lm-Widget,:host .lm-Widget{cursor:inherit;}:host .lm-DockPanel.ew,:host .lm-DockPanel.ew .lm-Widget,:host .lm-SplitPanel.ew,:host .lm-SplitPanel.ew .lm-Widget{cursor:ew-resize!important;}:host .lm-DockPanel.ns,:host .lm-DockPanel.ns .lm-Widget,:host .lm-SplitPanel.ns,:host .lm-SplitPanel.ns .lm-Widget{cursor:ns-resize!important;}:host .workspace-master-widget{min-width:100px!important;}:host .lm-DockPanel.resizing ::slotted(perspective-viewer),:host .lm-SplitPanel.resizing ::slotted(perspective-viewer){pointer-events:none;}:host .widget-blur ::slotted(perspective-viewer){opacity:0.5;}:host .lm-DockPanel-handle.resizing{background-color:rgba(0,0,0,0.05);}:host .perspective-scroll-panel{overflow:auto!important;}:host .lm-Panel{min-height:100%;}:host .lm-DockPanel-handle{background-color:none;}:host .lm-SplitPanel-handle{background-color:var(--workspace-split-panel-handle--background-color);}:host .lm-SplitPanel-handle,:host .lm-DockPanel-handle{transition:background-color 0.3s ease-out;}:host .lm-SplitPanel-handle:hover,:host .lm-DockPanel-handle:hover{background-color:rgba(0,0,0,0.05);}:host .lm-DockPanel-overlay{background:rgba(75,75,75,0.2);border:1px dashed#666;border-radius:6px;transition-property:top,left,right,bottom;transition-duration:50ms;transition-timing-function:linear;margin:0px;}:host .lm-DockPanel:not([data-mode="single-document"]) .viewer-container{border:var(--workspace-tabbar--border,1px solid var(--inactive--color));border-width:var(--workspace-tabbar--border-width);border-radius:var(--workspace-tabbar--border-radius,0 0 6px 6px);}:host .viewer-container{flex:1;height:100%;overflow:hidden;}:host .perspective-scroll-panel .workspace-widget{min-width:300px;min-height:200px;}:host .workspace-widget{display:flex;flex-direction:column;border:1px solid#eaedef;border-width:0px!important;}:host{background-color:hsl(210deg 18% 90%);}:host .workspace{width:100%;height:100%;}:host .lm-SplitPanel{height:100%;width:100%;}:host div.lm-SplitPanel-handle{background-color:var(--workspace-split-panel-handle--background-color);}:host .master-panel{background-color:var(--workspace-master--background-color,inherit);padding:0px 0px 0px 0px;}:host .master-panel .viewer-container{border-width:0px;}:host .perspective-workspace.context-menu * .lm-SplitPanel-handle{opacity:0.2;}:host .perspective-workspace.context-menu>.lm-SplitPanel-handle{opacity:0.2;}:host .context-menu .lm-TabBar:not(.context-focus){pointer-events:none;}`;var hp=`<!--

Copyright (c) 2017, the Perspective Authors.

This file is part of the Perspective library, distributed under the terms of
the Apache License 2.0.  The full license can be found in the LICENSE file.

-->
<template id="perspective-workspace">
    <div id="container" class="workspace"></div>
</template>
`;var No=class extends HTMLElement{workspace;_resize_observer;constructor(){super(),this.setAutoSize(!0)}save(){return this.workspace.save()}async restore(e){await this.workspace.restore(e)}async clear(){await this.restore({sizes:[],master:{sizes:[]},detail:{sizes:[]},viewers:{}})}async flush(){await Promise.all(Array.from(this.querySelectorAll("perspective-viewer")).map(e=>e.flush()))}async addViewer(e){this.workspace.addViewer(e),await this.flush()}async addTable(e,r){this.workspace.addTable(e,r),await this.flush()}getTable(e){return this.workspace.getTable(e)}async replaceTable(e,r){this.workspace.replaceTable(e,r),await this.flush()}removeTable(e){return this.workspace.removeTable(e)}get tables(){return this.workspace.tables}async resize(){this.workspace.update(),await this.flush()}setAutoSize(e){this._resize_observer?.unobserve(this),this._resize_observer=void 0,e&&(this._resize_observer=new ResizeObserver((...r)=>this.workspace?.update()),this._resize_observer.observe(this))}connectedCallback(){if(!this.workspace){let e=this.shadowRoot.querySelector("#container");this.workspace=new Xi(this),this._register_light_dom_listener(),Z.sendMessage(this.workspace,j.Msg.BeforeAttach),e.insertBefore(this.workspace.node,null),Z.sendMessage(this.workspace,j.Msg.AfterAttach)}}_light_dom_changed(){let e=Array.from(this.childNodes);for(let r of e)if(r.nodeType===Node.ELEMENT_NODE){if(r.tagName!=="PERSPECTIVE-VIEWER"){console.warn("Not a <perspective-viewer>");continue}this.workspace.update_widget_for_viewer(r)}this.workspace.remove_unslotted_widgets(e),this.workspace.update_details_panel(e)}_register_light_dom_listener(){let e=new MutationObserver(this._light_dom_changed.bind(this)),r={attributes:!1,childList:!0,subtree:!1};e.observe(this,r),this._light_dom_changed()}};dp(hp,cp)(No);export{No as HTMLPerspectiveWorkspaceElement,hr as PerspectiveViewerWidget,Xi as PerspectiveWorkspace};
/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/
//# sourceMappingURL=perspective-workspace.js.map
